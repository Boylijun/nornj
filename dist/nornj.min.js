!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.NornJ=n():e.NornJ=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var r=t(1),a=t(2),i=t(15),s=t(18),p=t(20),o=t(21);r.compileStringTmpl=s,r.tmplByKey=p,r.docReady=o,a.assign(r,i,a),"undefined"!=typeof React&&r.setComponentEngine("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var l;"undefined"!=typeof self?(l=self,o(function(){r.componentLib&&r.renderTagComponent(r.initTagData,null,!0)})):l=this,e.exports=l.NornJ=l.nj=r},function(e,n){"use strict";function t(){return t.compileStringTmpl.apply(null,arguments)}t.componentLib=null,t.componentLibObj=null,t.componentLibDom=null,t.componentPort=null,t.componentRender=null,t.componentClasses={},t.asts={},t.templates={},t.errorTitle="NornJ:",t.tmplRule={},e.exports=t},function(e,n,t){"use strict";var r=t(3),a=t(5),i=t(6),s=t(7),p=t(8),o=t(9),l=t(10),u=t(11),c=t(12),f=t(13),m=t(14);m(),e.exports=r.assign({escape:p,setTmplRule:m},o,l,u,c,f,r,a,i,s)},function(e,n,t){"use strict";function r(e,n,t,r){return t&&!a(n)?(r&&null==n||(e[e.length]=n),e):(O.apply(e,n),e)}function a(e){return Array.isArray(e)}function i(e){var n=typeof e;return!a(e)&&("function"===n||"object"===n&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function p(e){return function(n){return null==n?void 0:n[e]}}function o(e){var n=P(e);return"number"==typeof n&&n>=0}function l(e,n,t,r,a){if(e){var i;if(i=a?j:S,null==r&&(r=o(e)),t=t?t:e,r)i.call(e,function(e,r){var i=n.call(t,e,r);if(a)return i!==!1||i});else{var s=Object.keys(e),p=s.length;i.call(s,function(r,i){var s=n.call(t,e[r],r,i,p);if(a)return s!==!1||s})}}}function u(e,n){return e.indexOf(n)}function c(e){return e?e.trim():""}function f(){}function m(e,n,t){if(!e)switch(t){case"expr":throw Error(C+'Expression "'+n+'" is undefined, please check it has been registered.');default:throw Error(C+(n||e))}}function g(e,n){var t=C;switch(n){case"filter":t+='A filter called "'+e+'" is undefined.';default:t+=e}return t}function h(e,n){var t=e.length;if(0==t)return e;null==n&&(n=0);var r,a;for(r=0,t=e.length;t>r;r++)a=e.charCodeAt(r),n=(n<<5)-n+a,n|=0;return n}function v(){return Object.create(null)}function d(e){var n,t=e[0];return"'"===t?n=/[']+/g:'"'===t&&(n=/["]+/g),n&&(e=e.replace(n,"")),e}function _(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var x=t(1),y=t(4),b=Array.prototype,j=b.every,S=b.forEach,O=b.push,C=x.errorTitle,P=p("length"),E={isArray:a,isArrayLike:o,isObject:i,isString:s,each:l,inArray:u,trim:c,throwIf:m,assign:y,uniqueKey:h,lightObj:v,listPush:r,clearQuot:d,toCamelCase:_,warn:g,noop:f};e.exports=E},function(e,n){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;10>t;t++)n["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(n).map(function(e){return n[e]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(i){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,n){for(var r,s,p=t(e),o=1;arguments.length>o;o++){r=Object(arguments[o]);for(var l in r)a.call(r,l)&&(p[l]=r[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var u=0;s.length>u;u++)i.call(r,s[u])&&(p[s[u]]=r[s[u]])}}return p}},function(e,n,t){"use strict";function r(e){return S.xmlOpenTag.exec(e)}function a(e){return O.test(e)}function i(e){return C[e.toLowerCase()]}function s(e,n){for(var t,r,a=/[\s]+([^\s={}>]+)(=(('[^']+')|("[^"]+")|([^"'\s]+)))?/g;t=a.exec(e);){var i=t[1];if("/"!==i&&"/>"!==i){r||(r=[]);var s,p=t[3];p=null!=p?b.clearQuot(p):i,s=p.length,n||(p.lastIndexOf("/>")===s-2?p=p.replace(/\/>/,""):p.lastIndexOf(">")===s-1&&(p=p.replace(/>/,""))),r.push({key:i,value:p})}}return r}function p(e,n){return b.isString(e)&&e.toLowerCase()==="</"+n+">"}function o(e){return S.openTag.exec(e)}function l(e){return P.test(e)}function u(e,n){return b.isString(e)&&e.toLowerCase()==="/"+n.toLowerCase()}function c(e){return S.insideBraceParam.exec(e)}function f(e){var n,t=S.expr.exec(e);if(t){n=[t[1]];var r=c(e);r&&n.push(r[0])}return n}function m(e,n){return b.isString(e)&&e==="/"+S.exprRule+n}function g(e){return"tmpl"===e}function h(e,n,t){var r=n.params;r||(r=n.params=b.lightObj());var a=r.tmpls;if(a){var i=a.strs[0],s=i.length;null!=t?i[t]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=t?i[t]=e:(i[0]=e,i.length=1),r.tmpls=j.compiledParam(i)}}function v(e){return"params"===e||"props"===e}function d(e,n){n.paramsExpr?b.listPush(n.paramsExpr.content,e.content):n.paramsExpr=e}function _(e,n){return e||(e='script[type="text/nornj"]'+(n?"[autorender]":"")),document.querySelectorAll(e)}function x(e){for(var n=e.childNodes,t=n.length,r=0;t>r;r++)e.removeChild(e.firstChild)}var y=t(1),b=t(3),j=t(6),S=y.tmplRule,O=/^<[^>]+\/>$/i,C={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},P=/\/$/i;e.exports={getXmlOpenTag:r,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:p,getOpenTag:o,isSelfCloseTag:l,isCloseTag:u,getInsideBraceParam:c,isControl:f,isControlCloseTag:m,isTmpl:g,addTmpl:h,isParamsExpr:v,addParamsExpr:d,getTagComponents:_,removeChildNode:x}},function(e,n,t){"use strict";function r(e){var n=l.lightObj();return l.each(e,function(e,t){n[t]=p(e)},!1,!1),n}function a(e,n){var t=l.lightObj();if(!n&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.:\/]+)/g,":prop($1)")),e.indexOf(":")>=0){var r,a=[];r=e.split(":"),e=r[0].trim(),r=r.slice(1),l.each(r,function(e){var n=i(e.trim()),t=l.lightObj(),r=n[1].toLowerCase();if(r){var s=n[3];if(s){var p=[];l.each(s.split(","),function(e){p[p.length]=e.trim()},!1,!0),t.params=p}t.name=r,a.push(t)}},!1,!0),t.filters=a}if(!n&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),t.parentNum=s}return t.name=e,n&&(t.isStr=!0),t}function i(e){return c.exec(e)}function s(e,n){for(var t,r,a,i,s=u.replaceParam(),p=/[^\s:]+([\s]?:[\s]?[^\s\(\)]+(\([^\(\)]+\))?(\.[^\s.]+)?){0,}/g,o=0;t=s.exec(e);){a||(a=[]);var c=0;for(i=t[3];r=p.exec(i);){var m=r[0],g=[t[0],t[1],m,!1,!0];m=m.trim(),f.indexOf(m[0])>-1&&(m=l.clearQuot(m),g[3]=!0),g[2]=m,a.push(g),c>0&&(g[4]=!1,n.splice(++o,0,"")),c++}o++}return a}function p(e){var n=l.lightObj(),t=l.isString(e)?e.split(u.replaceSplit):[e],r=null,i=!1;if(t.length>1){var p=s(e,t);r=[],l.each(p,function(n){var t=l.lightObj();i=!!n[4]&&n[0]===e,t.prop=a(n[2],n[3]),t.escape=n[1].split(u.beginRule).length<3,r.push(t)},!1,!0)}if(n.props=r,n.strs=t,n.isAll=i,i){var o=r[0].prop;0===o.name.indexOf("!#")&&(o.name=o.name.substr(2),n.isTmplPlace=!0)}return n}var o=t(1),l=t(3),u=o.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:p,compiledParams:r,compiledProp:a}},function(e,n,t){"use strict";function r(e){if(f.isObject(e))return e;for(var n,t,r=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;n=r.exec(e);){var a=n[1],i=n[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=f.toCamelCase(a),t[a]=i}return t}function a(e,n){for(var t,r,a=0,i=e.length;i>a;a++)if(r=e[a],r&&(t=r[n],null!=t))return t}function i(e,n,t,r){var a=e,i=null!=r;return null==t&&(t=f.isArray(n)),(t||i)&&(a=f.listPush([e],i?t?n:[n]:n.slice(1))),a}function s(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function p(e,n){var t="";for(var r in e)n&&n[r]||(t+=" "+r+'="'+e[r]+'"');return t}function o(e,n,t,r,a){return function(i){return r(e,n,t,i,a)}}function l(e,n){return function(){var t,r=arguments,a=r.length;if(0<a)if(1===a)t=r[0];else{t=[];for(var i=0;a>i;i++)t[t.length]=r[i]}else t={};return n(e,{data:t,parent:this&&this._njParent?this._njParent:null},{multiData:c.isArray(t)})}}function u(e){var n={useString:e.useString,exprs:c.exprs,filters:c.filters,getDatasValue:c.getDatasValue,noop:c.noop,lightObj:c.lightObj,throwIf:c.throwIf,warn:c.warn,getNewData:c.getNewData,styleProps:c.styleProps,exprRet:c.exprRet};return n.useString?(n.assignStringProp=c.assignStringProp,n.escape=c.escape):(n.compPort=c.componentPort,n.compLib=c.componentLibObj,n.compClass=c.componentClasses),f.each(e,function(e,t){0===t.indexOf("main")?(n[t]=l(n,e),n["_"+t]=e):0===t.indexOf("fn")&&(n[t]=e)},!1,!1),n}var c=t(1),f=t(3);e.exports={getNewData:i,getDatasValue:a,fixPropName:s,styleProps:r,assignStringProp:p,exprRet:o,tmplWrap:l,template:u}},function(e,n){"use strict";function t(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return r[e]}):e}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=t},function(e,n,t){"use strict";function r(e,n){var t={},r=n.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),t.type="nj_plaintext",t.content=[p.compiledParam(e)],void n[r].push(t);var i=e[0];if(s.isString(i)){var u,c,f,m,g,i=i,h=e.length,v=e[h-1],d=!1,_=o.getXmlOpenTag(i),x=!1;if(_)f=_[1],o.isXmlSelfCloseTag(i)?t.selfCloseTag=!0:x=o.isXmlCloseTag(v,f),d=!0;else if(u=o.isControl(i)){var y=u[0].toLowerCase();c=u[1],m=o.isTmpl(y),g=o.isParamsExpr(y),t.type="nj_expr",t.expr=y,null==c||m||(t.refer=p.compiledParam(c)),o.isControlCloseTag(v,y)&&(x=!0),d=!0}else{var b=o.getOpenTag(i);b&&(f=b[0],o.isSelfCloseTag(i)?(t.selfCloseTag=!0,d=!0):(x=o.isCloseTag(v,f),x&&(d=!0)))}if(d){var j=-1,S=!0;if(u)if(m){S=!1;var O=o.getInsideBraceParam(c);o.addTmpl(t,n,O?s.clearQuot(O[1]):null)}else g?S=!1:j=s.inArray(e,l.exprRule+"else");else{t.type=f;var C=o.getInsideBraceParam(f);C&&(t.typeRefer=p.compiledParam(C[0]));var P=o.getOpenTagParams(i,!_);P&&(t.params||(t.params=s.lightObj()),s.each(P,function(e){t.params[e.key]=p.compiledParam(e.value)},!1,!0)),t.selfCloseTag||(t.selfCloseTag=o.verifySelfCloseTag(f))}S&&n[r].push(t);var E=h-(x?1:0),T=e.slice(1,0>j?E:j);if(T&&T.length&&a(T,t),j>=0){var R=e.slice(j+1,E);t.hasElse=!0,R&&R.length&&a(R,t)}g&&o.addParamsExpr(t,n)}else a(e,n)}else s.isArray(i)&&a(e,n)}function a(e,n){n.content||(n.content=[]),n.hasElse&&!n.contentElse&&(n.contentElse=[]),s.each(e,function(e){r(e,n)},!1,!0)}var i=t(1),s=t(3),p=t(6),o=t(5),l=i.tmplRule;e.exports={checkElem:r}},function(e,n,t){"use strict";function r(e,n,t,r,s){a.componentLib=e,a.componentLibObj=n,t=t||n,a.componentLibDom=t,"react"===e&&(r="createElement",s="render"),a.componentPort=i.isString(r)?n[r]:r,a.componentRender=i.isString(s)?t[s]:s}var a=t(1),i=t(3);e.exports={setComponentEngine:r}},function(e,n,t){"use strict";function r(e,n){var t=e;return i.isObject(e)||(t={},t[e]=n),i.each(t,function(e,n){a.componentClasses[n.toLowerCase()]=e},!1,!1),n}var a=t(1),i=t(3);e.exports={registerComponent:r}},function(e,n,t){"use strict";function r(e){var n={data:!0,parent:!0,index:!0,useString:!0};return e&&(n=i.assign(n,e)),n}function a(e,n,t){var a=e;i.isObject(e)||(a={},a[e]={filter:n,options:t}),i.each(a,function(e,n){var t,a=n.toLowerCase();e&&e.filter?(s[a]=e.filter,t=e.options):s[a]=e,o[a]=r(t)},!1,!1)}var i=t(3),s={prop:function(e,n){var t=e;return t&&i.each(n.split("."),function(e){t=t[e]},!1,!0),t},count:function(e){return e?e.length:0},item:function(e,n){return e?e[n]:null},equal:function(e,n){return e==n},lt:function(e,n,t){var r;return e=parseFloat(e),n=parseFloat(n),r=t?n>e:n>=e},gt:function(e,n,t){var r;return e=parseFloat(e),n=parseFloat(n),r=t?e>n:e>=n},add:function(e,n,t){return e+(t?parseFloat(n):parseInt(n,10))},"int":function(e){return parseInt(e,10)},"float":function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},p={data:!1,parent:!1,index:!1},o={prop:r(p),count:r(p),item:r(p),equal:r(p),lt:r(p),gt:r(p),add:r(p),"int":r(p),"float":r(p),bool:r(p)};e.exports={filters:s,filterConfig:o,registerFilter:a}},function(e,n,t){"use strict";function r(e){var n={data:!0,parent:!0,index:!0,useString:!0,paramsExpr:!1,result:!0,inverse:!0,newContext:!1};return e&&(n=i.assign(n,e)),n}function a(e,n,t){var a=e;i.isObject(e)||(a={},a[e]={expr:n,options:t}),i.each(a,function(e,n){var t,a=n.toLowerCase();e&&e.expr?(s[a]=e.expr,t=e.options):s[a]=e,o[a]=r(t)},!1,!1)}var i=t(3),s={"if":function(e,n){"false"===e&&(e=!1);var t,r;return t=n?!e:!!e,r=t?this.result():this.inverse(),this.useString&&null==r?"":r},unless:function(e){return s.if.call(this,e,!0)},each:function(e){var n,t=this,r=t.useString;return e?(n=r?"":[],i.each(e,function(e,a){var i=t.result({item:e,index:a,fallback:!0});r?n+=i:n.push(i)},!1,i.isArrayLike(e)),r||n.length||(n=null)):(n=t.inverse(),r&&null==n&&(n="")),n},param:function(){var e,n=this.result(),t="";i.each(arguments,function(e,n){t+=e},!1,!0),null!=n?i.isArray(n)?(e="",i.each(n,function(n){e+=n},!1,!0)):(e=n,e&&e._njShim&&(e=e._njShim)):e=t,this.paramsExpr[t]=e},spreadparam:function(e){if(e){var n=this;i.each(e,function(e,t){n.paramsExpr[t]=e},!1,!1)}},equal:function(e,n){var t;return t=e==n?this.result():this.inverse()},"for":function(e,n){var t,r=this.useString;for(t=r?"":[],null==n&&(n=e,e=0),e=parseInt(e,10),n=parseInt(n,10);n>=e;e++){var a=this.result({index:e});r?t+=a:t.push(a)}return t},blank:function(){return this.result()}},p={data:!1,parent:!1,index:!1},o={"if":r(p),unless:r(p),each:r(i.assign({newContext:!0},p)),param:r(i.assign({inverse:!1,paramsExpr:!0},p)),spreadparam:r(i.assign({useString:!1,result:!1,inverse:!1,paramsExpr:!0},p)),equal:r(i.assign({useString:!1},p)),"for":r(i.assign({newContext:!0},p,{data:!0})),blank:r(i.assign({useString:!1,inverse:!1},p))};s.prop=s.p=s.param,o.prop=o.p=o.param,s.spread=s.spreadparam,o.spread=o.spreadparam,e.exports={exprs:s,exprConfig:o,registerExpr:a}},function(e,n,t){"use strict";function r(e,n){return RegExp(e,n)}function a(e){for(var n,t="",r=0,a=e.length;a>r;r++)n=e[r],t.indexOf(n)<0&&(t+=n);return t}var i=t(1),s=t(3);e.exports=function(e,n,t){e||(e="{"),n||(n="}"),t||(t="#");var p=a(e+n),o=e[0],l=p.substr(1),u=a(t),c=t.replace(/\$/g,"\\$");s.assign(i.tmplRule,{beginRule:e,endRule:n,exprRule:t,xmlOpenTag:r("^<([a-z"+o+"][-a-z0-9_:./"+l+"]*)[^>]*>$","i"),openTag:r("^[a-z"+o+"][-a-z0-9_:./"+l+"]*","i"),insideBraceParam:r(e+"([^"+p+"]+)"+n,"i"),replaceBraceParam:function(){return r("[\\s]+("+e+"){1,2}([^"+p+"]+)("+n+"){1,2}","g")},replaceSplit:r("(?:"+e+"){1,2}[^"+p+"]+(?:"+n+"){1,2}"),replaceParam:function(){return r("(("+e+"){1,2})([^"+p+"]+)("+n+"){1,2}","g")},checkElem:function(){return r("([^>]*)(<([a-z"+o+"/"+u+"!][-a-z0-9_:."+p+u+"]*)[^>]*>)([^<]*)","ig")},expr:r("^"+c+"([^\\s]+)","i")})}},function(e,n,t){"use strict";function r(e,n,t){if(e){var r;if(n&&(r=l.templates[n]),!r){var i,s=u.isObject(e);if(s&&e.main)i=e;else{var p;n&&(p=l.asts[n]),p||(s&&"nj_root"===e.type?p=e:(p=a(),u.isString(e)&&(e=f(e)),u.checkElem(e,p)),n&&(l.asts[n]=p)),i=c(p.content,!t)}r=u.template(i),n&&(l.templates[n]=r)}return r.main}}function a(){var e=u.lightObj();return e.type="nj_root",e.content=[],e}function i(e,n){return r(e,n,!0)}function s(e,n,t){var r=u.getTagComponents(n,t),a=[];return u.each(r,function(n){var t=i(n.innerHTML,n.id),r=n.parentNode;"inferno"===l.componentLib&&u.removeChildNode(r),a.push(l.componentRender(t(e),r))},!1,!0),a}function p(e){l.initTagData=e}function o(e,n){var t=a();return u.checkElem(e,t),c(t.content,!n)}var l=t(1),u=t(2),c=t(16),f=t(18);e.exports={compile:r,compileComponent:i,renderTagComponent:s,setInitTagData:p,precompile:o}},function(e,n,t){"use strict";function r(e,n,t,r){var i="",s=n.useString,p=c.isString(t),o=p||0===t,u=1===e.length?"1":"2",f={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_this:0,_value:0,_filter:0,_thisF:0,newContext:r};return s?f._children=0:f._compParam=0,o?(i+=a(),i+="if(!parent) {\n",i+="  parent = p1.lightObj();\n",i+="  if (data) {\n",i+="    parent.data = multiData ? data[0] : data;\n",i+="  }\n",i+="  p2.parent = parent;\n",i+="};\n"):r?(i+="var parent = p1.lightObj(),\n",i+="  _parent = p2.parent,\n",i+="  multiData = p3.multiData,\n",i+="  hasItem = 'item' in p4;\n",i+="parent.data = hasItem ? p4.item : _parent.data;\n",i+="parent.parent = p4.fallback ? _parent : _parent.parent;\n",i+="parent.index = 'index' in p4 ? p4.index : _parent.index;\n",i+="var data;\n",i+="if(hasItem) data = p1.getNewData(p4.item, p2.data, multiData, p4.addData);\n",i+="else data = p2.data;\n",i+="var _p2 = p1.lightObj();\n",i+="_p2.parent = parent;\n",i+="_p2.data = data;\n",i+="var _p3 = p1.lightObj();\n",i+="if(p4.addData) multiData = true;\n",i+="_p3.multiData = multiData;\n"):i+=a(),"2"===u&&(i+=s?"var ret = '';\n":"var ret = [];\n"),i+=l(e,n,f,u),"2"===u&&(i+="return ret;"),n[o?"main"+(p?t:""):"fn"+t]=Function("p1","p2","p3","p4","p5",i),t}function a(){return"var parent = p2.parent,\n  data = p2.data,\n  multiData = p3.multiData;\n"}function i(e,n,t,r){var a,i=t.useString,p=!r&&e.escape;if(e.prop.isStr)a="'"+e.prop.name+"'";else{var o=e.prop.name,l=e.prop.parentNum,u="",f=!1;if("#"===o?(u="parent.index",f=!0):"."===o&&(u="parent.data",f=!0),l){u||(u="parent.data");for(var g=0;l>g;g++)u="parent."+u;f||(u+="['"+o+"']",f=!0)}a=f?u:"(!multiData ? data['"+o+"'] : p1.getDatasValue(data, '"+o+"'))"}var h=e.prop.filters;if(h){var v="_value"+n._value++,d="var "+v+" = "+a+";\n";return c.each(h,function(e){var t=n._filter++,r=n._thisF++,a=m[e.name],i=!a;d+="\nvar _filter"+t+" = p1.filters['"+e.name+"'];\n",d+="if (!_filter"+t+") {\n",d+="  p1.warn('"+e.name+"', 'filter');\n",d+="}\n",d+="else {\n",d+="  var _thisF"+r+" = p1.lightObj();\n",(i||a.useString)&&(d+="  _thisF"+r+".useString = p1.useString;\n"),(i||a.data)&&(d+="  _thisF"+r+".data = parent.data;\n"),(i||a.parent)&&(d+="  _thisF"+r+".parent = parent.parent;\n"),(i||a.index)&&(d+="  _thisF"+r+".index = parent.index;\n"),d+="\n  "+v+" = _filter"+t+".apply(_thisF"+r+", ["+v+(e.params?e.params.reduce(function(e,n){return e+", '"+n+"'"},""):"")+"]);\n",d+="}\n"},!1,!0),{valueStr:s(v,i,p),filterStr:d}}return s(a,i,p)}function s(e,n,t){return n&&t?"p1.escape("+e+")":e}function p(e,n,t){var a=e.strs[0],s="",p="";return c.isString(a)?(s=e.isAll||""===a?"":"'"+a+"'",p="",c.each(e.props,function(r,o){var l,u=i(r,n,t);if(c.isString(u)?l=u:(l=u.valueStr,p+=u.filterStr),e.isAll)e.isTmplPlace&&(l+=".call({ _njParent: parent }, data)");else{var f=e.strs[o+1];l=(""===a&&0==o?"":" + ")+"("+l+")"+(""!==f?" + '"+f+"'":"")}if(s+=l,e.isAll)return!1},!1,!0,!0)):c.isObject(a)&&a.length?(s+="{\n",c.each(a,function(e,n,a,i){s+="length"!==n?'  "'+n+'": p1.main'+r(e.content,t,"T"+ ++t._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=JSON.stringify(a),""===p?s:{valueStr:s,filterStr:p}}function o(e,n,t,a){var s="",o=n.useString;if("nj_plaintext"===e.type){var m,h=p(e.content[0],t,n);c.isObject(h)&&(m=h.filterStr,h=h.valueStr);var v=u(1,a,{text:h},n);m&&(v=m+v),s+=o?v:g(v)}else if("nj_expr"===e.type){var d=t._expr++,_=t._dataRefer++,x="";if(s+="\nvar _expr"+d+" = p1.exprs['"+e.expr+"'];\n",e.refer){x+="var _dataRefer"+_+" = [\n";var y=e.refer.props,b=y.length,m="";c.each(y,function(e,r){var a=i(e,t,n,!0);c.isObject(a)&&(m+=a.filterStr,a=a.valueStr),x+="  "+a+(b-1>r?",":"")},!1,!0),x+="\n];\n",""!==m&&(x=m+x),s+=x}s+="p1.throwIf(_expr"+d+", '"+e.expr+"', 'expr');\n";var j=t._this++,S=f[e.expr],O=!S,C=!!S&&S.newContext,P=t.newContext;s+="\nvar _this"+j+" = p1.lightObj();\n",(O||S.useString)&&(s+="_this"+j+".useString = p1.useString;\n"),(O||S.data)&&(s+="_this"+j+".data = parent.data;\n"),(O||S.parent)&&(s+="_this"+j+".parent = parent.parent;\n"),(O||S.index)&&(s+="_this"+j+".index = parent.index;\n");var E="p5";a&&a._paramsE&&(E=a._paramsE),(O||S.paramsExpr)&&(s+="_this"+j+".paramsExpr = "+E+";\n"),(O||S.result)&&(s+="_this"+j+".result = "+(e.content?"p1.exprRet(p1, "+(P?"_":"")+"p2, "+(P?"_":"")+"p3, p1.fn"+r(e.content,n,++n._no,C)+", "+E+")":"p1.noop")+";\n"),(O||S.inverse)&&(s+="_this"+j+".inverse = "+(e.contentElse?"p1.exprRet(p1, "+(P?"_":"")+"p2, "+(P?"_":"")+"p3, p1.fn"+r(e.contentElse,n,++n._no,C)+", "+E+")":"p1.noop")+";\n"),s+=u(2,a,{_expr:d,_dataRefer:""!==x?_:"none",_this:j},n)}else{var T,R=t._type++;T=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var w;if(w=o?"'"+T+"'":"p1.compClass['"+T+"'] ? p1.compClass['"+T+"'] : '"+T+"'",e.typeRefer){var D=t._typeRefer++,L=p(e.typeRefer,t,n);c.isObject(L)&&(s+=L.filterStr,L=L.valueStr),s+="\nvar _typeRefer"+D+" = "+L+";\n",s+="var _type"+R+" = _typeRefer"+D+" ? _typeRefer"+D+" : ("+w+");\n"}else s+="\nvar _type"+R+" = "+w+";\n";var k=e.params,A=e.paramsExpr,N="";if(k||A){var I=t._params++;if(N="var _params"+I+" = ",A){var F=t._paramsE++;if(N+=(o?"''":"null")+";\n",N+="var _paramsE"+F+" = {};\n",N+=l(A.content,n,t,{_paramsE:"_paramsE"+F}),o){var q="";c.each(k,function(e,n,t,r){0==t&&(q+="{ "),q+=n+": 1",q+=r-1>t?", ":" }"},!1,!1),N+="_params"+I+" += p1.assignStringProp(_paramsE"+F+", "+(""===q?"null":q)+");\n"}else N+="\n_params"+I+" = _paramsE"+F+";\n"}if(k){var K=Object.keys(k),b=K.length,m="";o||A||(N+="{\n"),c.each(K,function(e,r){var a=p(k[e],t,n);c.isObject(a)&&(m+=a.filterStr,a=a.valueStr),o||"style"!==e||(a="p1.styleProps("+a+")");var i;i=o?e:c.fixPropName(e),N+=A?o?"_params"+I+" += ' "+i+"=\"' + "+a+" + '\"';\n":"_params"+I+"."+i+" = "+a+";\n":o?(r>0?"  + ":"")+"' "+i+"=\"' + "+a+" + '\"'"+(r==b-1?";":"")+"\n":"  "+i+": "+a+(b-1>r?",\n":"")},!1,!1),o||A||(N+="\n};\n"),""!==m&&(N=m+N),s+=N}}var $,z;o?(z=t._children++,s+="var _children"+z+" = '';\n"):($=t._compParam++,s+="var _compParam"+$+" = [_type"+R+", "+(""!==N?"_params"+I:"null")+"];\n"),s+=l(e.content,n,t,o?{_children:"_children"+z}:{_compParam:"_compParam"+$}),s+=u(3,a,o?{_type:R,_params:""!==N?I:null,_children:z,_selfClose:e.selfCloseTag}:{_compParam:$},n)}return s}function l(e,n,t,r){var a="";return e?(c.each(e,function(e){a+=o(e,n,t,r)},!1,!0),a):a}function u(e,n,t,r){var a,i=r.useString;switch(e){case 1:a=t.text;break;case 2:a="_expr"+t._expr+".apply(_this"+t._this+("none"!==t._dataRefer?", _dataRefer"+t._dataRefer:"")+")";break;case 3:i?(a="'<' + _type"+t._type+" + "+(null!=t._params?"_params"+t._params+" + ":""),t._selfClose?a+="'/>'":(a+="'>'",a+=" + _children"+t._children+" + ",a+="'</' + _type"+t._type+" + '>'")):a="p1.compPort.apply(p1.compLib, _compParam"+t._compParam+")"}return"1"===n?"\nreturn "+a+";":"2"===n?i?"\nret += "+a+";\n":"\nret.push("+a+");\n":n._paramsE?"\n"+a+";\n":i?"\n"+n._children+" += "+a+";\n":"\n"+n._compParam+".push("+a+");\n"}var c=(t(1),t(2)),f=c.exprConfig,m=c.filterConfig,g=t(17);e.exports=function(e,n){var t={useString:n,_no:0,_noT:0};return r(e,t,t._no),t}},function(e,n){"use strict";function t(e){return e.replace(a,function(e,n){return r[n]})}var r={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">"},a=RegExp("&("+Object.keys(r).join("|")+");","g");e.exports=t},function(e,n,t){"use strict";function r(e){var n,t;if(this&&(n=this.tmplKey),n&&(t=g.strTmpls[n]))return t;var r=h.isString(e),s=e,o=arguments,l=0,u=[],c="";r&&(s=e.split(v));var f=s.length;return h.each(s,function(e,n){var t="";if(f-1>n){var r=o[n+1],a=e.length-1,i="@"===e[a];!h.isString(r)||i?(t="_nj-split"+l+"_",i&&(e=e.substr(0,a),r=_(r)),u.push(r),l++):t=r}c+=e+t},!1,!0),c=i(c),null==n&&(n=h.uniqueKey(c+p(u)),t=g.strTmpls[n])?t:(t=a(c,u),m(t,n),g.strTmpls[n]=t,t)}function a(e,n){for(var t,r=[],a={elem:r,elemName:"root",parent:null},i=null,p=d.checkElem();t=p.exec(e);){var o=t[1],u=t[2],m=t[3],g=t[4];o&&"\n"!==o&&(o=s(o),f(o,a.elem,n)),u&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===u[u.length-2]?c(u,m,a.elem,n):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),l(u,m,a.elem,n))),g&&"\n"!==g&&(g=s(g),f(g,a.elem,n))}return r}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"").trim()}function p(e){var n="";return h.each(e,function(e){n+=h.isArray(e)?"|"+o(e,!0):"|"+JSON.stringify(e)},!1,!0),n}function o(e,n){var t;if(n||h.isArray(e))if(null!=e.njKey)t="+"+e.njKey;else{t="";for(var r=0,a=e.length;a>r;r++)t+=o(e[r])}else t="+"+e;return t}function l(e,n,t,r,a){var i,s;if(n[0]===d.exprRule)i=e.substring(1,e.length-1);else{var p=u(e,r);i=p.elem,s=p.params}if(a){var o=[i];s&&o.push(s),t.push(o)}else t.push(i),s&&t.push(s)}function u(e,n){var t,r=d.exprRule,a=d.beginRule,i=d.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,p){return t||(t=[r+"params"]),t.push([r+"param "+a+"'"+s+"'"+i,n[p]]),""}),e=e.replace(d.replaceBraceParam(),function(e,n,s){s=s.trim();var p=s.replace(/\.\.\//g,"");return 0===p.indexOf("...")?(t||(t=[r+"params"]),t.push([r+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+p+"="+e.trim()}),{elem:e,params:t}}function c(e,n,t,r){n===d.exprRule+"else"?t.push(e.substr(1,5)):l(e,n,t,r,!0)}function f(e,n,t){for(var r,a=/_nj-split(\d+)_/g,i=[];r=a.exec(e);)i.push(r[1]);i.length?h.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&n.push(e);var r=i.shift();null!=r&&n.push(t[r])},!1,!0):n.push(e)}function m(e,n){e.njKey=n,e.render=function(){return g.compile(this,this.njKey).apply(null,arguments)},e.renderComponent=function(){return g.compileComponent(this,this.njKey).apply(null,arguments)}}var g=t(1),h=t(3),v=(t(5),/\$\{\d+\}/),d=g.tmplRule,_=t(19);g.strTmpls={},e.exports=r},function(e,n){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,n,t){"use strict";var r=t(18);e.exports=function(e){return function(){return r.apply({tmplKey:e},arguments)}}},function(e,n){"use strict";e.exports=function(e){var n=document;n.addEventListener?n.addEventListener("DOMContentLoaded",e,!1):self.attachEvent("onload",e)}}])});
//# sourceMappingURL=nornj.min.js.map