!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NornJ=t():e.NornJ=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),a=n(2),i=n(16),s=n(19),p=n(21),o=n(22),l=n(23);r.compileStringTmpl=s,r.tmplByKey=p,r.docReady=o,r.config=l,a.assign(r,i,a),"undefined"!=typeof React&&r.setComponentEngine("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var u;"undefined"!=typeof self?(u=self,o(function(){r.componentLib&&r.renderTagComponent(r.initTagData,null,!0)})):u=this,e.exports=u.NornJ=u.nj=r},function(e,t){"use strict";function n(){return n.compileStringTmpl.apply(null,arguments)}n.componentLib=null,n.componentLibObj=null,n.componentLibDom=null,n.componentPort=null,n.componentRender=null,n.componentClasses={},n.asts={},n.templates={},n.errorTitle="NornJ:",n.tmplRule={},e.exports=n},function(e,t,n){"use strict";var r=n(3),a=n(5),i=n(6),s=n(7),p=n(8),o=n(9),l=n(10),u=n(11),c=n(12),f=n(13),m=n(14),v=n(15);m(),e.exports=r.assign({escape:p,setTmplRule:m,registerTmpl:v},o,l,u,c,f,r,a,i,s)},function(e,t,n){"use strict";function r(e,t,n,r){return n&&!a(t)?(r&&null==t||(e[e.length]=t),e):(C.apply(e,t),e)}function a(e){return Array.isArray(e)}function i(e){var t=typeof e;return!a(e)&&("function"===t||"object"===t&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function p(e){return function(t){return null==t?void 0:t[e]}}function o(e){var t=E(e);return"number"==typeof t&&t>=0}function l(e,t,n,r,a){if(e){var i;if(i=a?O:S,null==r&&(r=o(e)),n=n?n:e,r)i.call(e,function(e,r){var i=t.call(n,e,r);if(a)return i!==!1||i});else{var s=Object.keys(e),p=s.length;i.call(s,function(r,i){var s=t.call(n,e[r],r,i,p);if(a)return s!==!1||s})}}}function u(e,t){return e.indexOf(t)}function c(e){return e?e.trim():""}function f(e){var t=[],n=0;if(a(e))for(var r=0,i=E(e);i>r;r++){var s=e[r];s=f(s);var p=0,o=s.length;for(t.length+=o;o>p;)t[n++]=s[p++]}else t[n++]=e;return t}function m(){}function v(e,t,n){if(!e)switch(n){case"expr":throw Error(P+'Expression "'+t+'" is undefined, please check it has been registered.');default:throw Error(P+(t||e))}}function g(e,t){var n=P;switch(t){case"filter":n+='A filter called "'+e+'" is undefined.';default:n+=e}return n}function h(e,t){var n=e.length;if(0==n)return e;null==t&&(t=0);var r,a;for(r=0,n=e.length;n>r;r++)a=e.charCodeAt(r),t=(t<<5)-t+a,t|=0;return t}function d(){return Object.create(null)}function x(e){var t,n=e[0];return"'"===n?t=/[']+/g:'"'===n&&(t=/["]+/g),t&&(e=e.replace(t,"")),e}function _(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var y=n(1),b=n(4),j=Array.prototype,O=j.every,S=j.forEach,C=j.push,P=y.errorTitle,E=p("length"),R={isArray:a,isArrayLike:o,isObject:i,isString:s,each:l,inArray:u,trim:c,flatten:f,throwIf:v,assign:b,uniqueKey:h,lightObj:d,listPush:r,clearQuot:x,toCamelCase:_,warn:g,noop:m};e.exports=R},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,s,p=n(e),o=1;arguments.length>o;o++){r=Object(arguments[o]);for(var l in r)a.call(r,l)&&(p[l]=r[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var u=0;s.length>u;u++)i.call(r,s[u])&&(p[s[u]]=r[s[u]])}}return p}},function(e,t,n){"use strict";function r(e){return y.xmlOpenTag.exec(e)}function a(e){return b.test(e)}function i(e){return j[e.toLowerCase()]}function s(e,t){for(var n,r,a=/[\s]+([^\s=>]+)(=(('[^']+')|("[^"]+")|([^"'\s]+)))?/g;n=a.exec(e);){var i=n[1];if("/"!==i&&"/>"!==i){r||(r=[]);var s,p=n[3];p=null!=p?x.clearQuot(p):i,s=p.length,t||(p.lastIndexOf("/>")===s-2?p=p.replace(/\/>/,""):p.lastIndexOf(">")===s-1&&(p=p.replace(/>/,""))),r.push({key:i,value:p})}}return r}function p(e,t){return x.isString(e)&&e.toLowerCase()==="</"+t+">"}function o(e){return y.insideBraceParam.exec(e)}function l(e){var t,n=y.expr.exec(e);if(n){t=[n[1]];var r=o(e);r&&t.push(r[0])}return t}function u(e,t){return x.isString(e)&&e==="/"+y.exprRule+t}function c(e){return"tmpl"===e}function f(e,t,n){var r=t.params;r||(r=t.params=x.lightObj());var a=r.tmpls;if(a){var i=a.strs[0],s=i.length;null!=n?i[n]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=n?i[n]=e:(i[0]=e,i.length=1),r.tmpls=_.compiledParam(i)}}function m(e){return"params"===e||"props"===e}function v(e,t){t.paramsExpr?x.listPush(t.paramsExpr.content,e.content):t.paramsExpr=e}function g(e,t){return e||(e='script[type="text/nornj"]'+(t?"[autorender]":"")),document.querySelectorAll(e)}function h(e){for(var t=e.childNodes,n=t.length,r=0;n>r;r++)e.removeChild(e.firstChild)}var d=n(1),x=n(3),_=n(6),y=d.tmplRule,b=/^<[^>]+\/>$/i,j={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports={getXmlOpenTag:r,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:p,getInsideBraceParam:o,isControl:l,isControlCloseTag:u,isTmpl:c,addTmpl:f,isParamsExpr:m,addParamsExpr:v,getTagComponents:g,removeChildNode:h}},function(e,t,n){"use strict";function r(e){var t=l.lightObj();return l.each(e,function(e,n){t[n]=p(e)},!1,!1),t}function a(e,t){var n=l.lightObj();if(!t&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.:\/]+)/g,":prop($1)")),e.indexOf(":")>=0){var r,a=[];r=e.split(":"),e=r[0].trim(),r=r.slice(1),l.each(r,function(e){var t=i(e.trim()),n=l.lightObj(),r=t[1].toLowerCase();if(r){var s=t[3];if(s){var p=[];l.each(s.split(","),function(e){p[p.length]=e.trim()},!1,!0),n.params=p}n.name=r,a.push(n)}},!1,!0),n.filters=a}if(!t&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),n.parentNum=s}return n.name=e,t&&(n.isStr=!0),n}function i(e){return c.exec(e)}function s(e,t){for(var n,r,a,i,s=u.replaceParam(),p=/[^\s:]+([\s]?:[\s]?[^\s\(\)]+(\([^\(\)]+\))?(\.[^\s.]+)?){0,}/g,o=0;n=s.exec(e);){a||(a=[]);var c=0;for(i=n[3];r=p.exec(i);){var m=r[0],v=[n[0],n[1],m,!1,!0];m=m.trim(),f.indexOf(m[0])>-1&&(m=l.clearQuot(m),v[3]=!0),v[2]=m,a.push(v),c>0&&(v[4]=!1,t.splice(++o,0,"")),c++}o++}return a}function p(e){var t=l.lightObj(),n=l.isString(e)?e.split(u.replaceSplit):[e],r=null,i=!1;if(n.length>1){var p=s(e,n);r=[],l.each(p,function(t){var n=l.lightObj();i=!!t[4]&&t[0]===e,n.prop=a(t[2],t[3]),n.escape=t[1].split(u.startRule).length<3,r.push(n)},!1,!0)}if(t.props=r,t.strs=n,t.isAll=i,i){var o=r[0].prop;0===o.name.indexOf("!#")&&(o.name=o.name.substr(2),t.isTmplPlace=!0)}return t}var o=n(1),l=n(3),u=o.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:p,compiledParams:r,compiledProp:a}},function(e,t,n){"use strict";function r(e){if(f.isObject(e))return e;for(var t,n,r=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;t=r.exec(e);){var a=t[1],i=t[2];n||(n={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=f.toCamelCase(a),n[a]=i}return n}function a(e,t){for(var n,r,a=0,i=e.length;i>a;a++)if(r=e[a],r&&(n=r[t],null!=n))return n}function i(e,t,n,r){var a=e,i=null!=r;return null==n&&(n=f.isArray(t)),(n||i)&&(a=f.listPush([e],i?n?t:[t]:t.slice(1))),a}function s(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function p(e,t){var n="";for(var r in e)if(!t||!t[r]){var a=e[r];n+=" "+r+(r!==a?'="'+a+'"':" ")}return n}function o(e,t,n,r,a){return function(i){return r(e,t,n,i,a)}}function l(e,t){return function(){var n,r=arguments,a=r.length;if(0<a)if(1===a)n=r[0];else{n=[];for(var i=0;a>i;i++)n[n.length]=r[i]}else n={};return t(e,{data:n,parent:this&&this._njParent?this._njParent:null},{multiData:c.isArray(n)})}}function u(e){var t={useString:e.useString,exprs:c.exprs,filters:c.filters,getDatasValue:c.getDatasValue,noop:c.noop,lightObj:c.lightObj,throwIf:c.throwIf,warn:c.warn,getNewData:c.getNewData,styleProps:c.styleProps,exprRet:c.exprRet};return t.useString?(t.assignStringProp=c.assignStringProp,t.escape=c.escape):(t.compPort=c.componentPort,t.compLib=c.componentLibObj,t.compClass=c.componentClasses),f.each(e,function(e,n){0===n.indexOf("main")?(t[n]=l(t,e),t["_"+n]=e):0===n.indexOf("fn")&&(t[n]=e)},!1,!1),t}var c=n(1),f=n(3);e.exports={getNewData:i,getDatasValue:a,fixPropName:s,styleProps:r,assignStringProp:p,exprRet:o,tmplWrap:l,template:u}},function(e,t){"use strict";function n(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return r[e]}):e}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=n},function(e,t,n){"use strict";function r(e,t){var n={},r=t.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),n.type="nj_plaintext",n.content=[p.compiledParam(e)],void t[r].push(n);var i=e[0];if(s.isString(i)){var u,c,f,m,v,i=i,g=e.length,h=e[g-1],d=!1,x=!1;if(u=o.isControl(i)){var _=u[0].toLowerCase();c=u[1],m=o.isTmpl(_),v=o.isParamsExpr(_),n.type="nj_expr",n.expr=_,null==c||m||(n.refer=p.compiledParam(c)),o.isControlCloseTag(h,_)&&(x=!0),d=!0}else{var y=o.getXmlOpenTag(i);y&&(f=y[1],o.isXmlSelfCloseTag(i)?n.selfCloseTag=!0:x=o.isXmlCloseTag(h,f),d=!0)}if(d){var b=-1,j=!0;if(u)if(m){j=!1;var O=o.getInsideBraceParam(c);o.addTmpl(n,t,O?s.clearQuot(O[1]):null)}else v?j=!1:b=s.inArray(e,l.exprRule+"else");else{n.type=f;var S=o.getInsideBraceParam(f);S&&(n.typeRefer=p.compiledParam(S[0]));var C=o.getOpenTagParams(i);C&&(n.params||(n.params=s.lightObj()),s.each(C,function(e){n.params[e.key]=p.compiledParam(e.value)},!1,!0)),n.selfCloseTag||(n.selfCloseTag=o.verifySelfCloseTag(f))}j&&t[r].push(n);var P=g-(x?1:0),E=e.slice(1,0>b?P:b);if(E&&E.length&&a(E,n),b>=0){var R=e.slice(b+1,P);n.hasElse=!0,R&&R.length&&a(R,n)}v&&o.addParamsExpr(n,t)}else a(e,t)}else s.isArray(i)&&a(e,t)}function a(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),s.each(e,function(e){r(e,t)},!1,!0)}var i=n(1),s=n(3),p=n(6),o=n(5),l=i.tmplRule;e.exports={checkElem:r}},function(e,t,n){"use strict";function r(e,t,n,r,s){a.componentLib=e,a.componentLibObj=t,n=n||t,a.componentLibDom=n,"react"===e&&(r="createElement",s="render"),a.componentPort=i.isString(r)?t[r]:r,a.componentRender=i.isString(s)?n[s]:s}var a=n(1),i=n(3);e.exports={setComponentEngine:r}},function(e,t,n){"use strict";function r(e,t){var n=e;return i.isObject(e)||(n={},n[e]=t),i.each(n,function(e,t){a.componentClasses[t.toLowerCase()]=e},!1,!1),t}var a=n(1),i=n(3);e.exports={registerComponent:r}},function(e,t,n){"use strict";function r(e){var t={data:!0,parent:!0,index:!0,useString:!0};return e&&(t=i.assign(t,e)),t}function a(e,t,n){var a=e;i.isObject(e)||(a={},a[e]={filter:t,options:n}),i.each(a,function(e,t){var n=t.toLowerCase();if(e){var a=e.filter,i=e.options;a||i?(a&&(s[n]=a),i&&(o[n]=r(i))):s[n]=e}},!1,!1)}var i=n(3),s={prop:function(e,t){var n=e;return n&&i.each(t.split("."),function(e){n=n[e]},!1,!0),n},count:function(e){return e?e.length:0},item:function(e,t){return e?e[t]:null},equal:function(e,t){return e==t},lt:function(e,t,n){var r;return e=parseFloat(e),t=parseFloat(t),r=n?t>e:t>=e},gt:function(e,t,n){var r;return e=parseFloat(e),t=parseFloat(t),r=n?e>t:e>=t},add:function(e,t,n){return e+(n?parseFloat(t):parseInt(t,10))},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},p={data:!1,parent:!1,index:!1},o={prop:r(p),count:r(p),item:r(p),equal:r(p),lt:r(p),gt:r(p),add:r(p),int:r(p),float:r(p),bool:r(p)};e.exports={filters:s,filterConfig:o,registerFilter:a}},function(e,t,n){"use strict";function r(e){var t={data:!0,parent:!0,index:!0,useString:!0,paramsExpr:!1,result:!0,inverse:!0,newContext:!1};return e&&(t=i.assign(t,e)),t}function a(e,t,n){var a=e;i.isObject(e)||(a={},a[e]={expr:t,options:n}),i.each(a,function(e,t){var n=t.toLowerCase();if(e){var a=e.expr,i=e.options;a||i?(a&&(s[n]=a),i&&(o[n]=r(i))):s[n]=e}},!1,!1)}var i=n(3),s={if:function(e,t){"false"===e&&(e=!1);var n,r;return n=t?!e:!!e,r=n?this.result():this.inverse(),this.useString&&null==r?"":r},unless:function(e){return s.if.call(this,e,!0)},each:function(e){var t,n=this,r=n.useString;return e?(t=r?"":[],i.each(e,function(e,a){var i=n.result({item:e,index:a,fallback:!0});r?t+=i:t.push(i)},!1,i.isArrayLike(e)),r||t.length||(t=null)):(t=n.inverse(),r&&null==t&&(t="")),t},param:function(){var e,t=this.result(),n="";i.each(arguments,function(e,t){n+=e},!1,!0),null!=t?i.isArray(t)?(e="",i.each(i.flatten(t),function(t){e+=null!=t?t:""},!1,!0)):e=t:e=!this.useString||n,this.paramsExpr[n]=e},spreadparam:function(e){if(e){var t=this;i.each(e,function(e,n){t.paramsExpr[n]=e},!1,!1)}},equal:function(e,t){var n;return n=e==t?this.result():this.inverse()},for:function(e,t){var n,r=this.useString;for(n=r?"":[],null==t&&(t=e,e=0),e=parseInt(e,10),t=parseInt(t,10);t>=e;e++){var a=this.result({index:e});r?n+=a:n.push(a)}return n},blank:function(){return this.result()}},p={data:!1,parent:!1,index:!1},o={if:r(p),unless:r(p),each:r(i.assign({newContext:!0},p)),param:r(i.assign({inverse:!1,paramsExpr:!0},p)),spreadparam:r(i.assign({useString:!1,result:!1,inverse:!1,paramsExpr:!0},p)),equal:r(i.assign({useString:!1},p)),for:r(i.assign({newContext:!0},p,{data:!0})),blank:r(i.assign({useString:!1,inverse:!1},p))};s.prop=s.p=s.param,o.prop=o.p=o.param,s.spread=s.spreadparam,o.spread=o.spreadparam,e.exports={exprs:s,exprConfig:o,registerExpr:a}},function(e,t,n){"use strict";function r(e,t){return RegExp(e,t)}function a(e){for(var t,n="",r=0,a=e.length;a>r;r++)t=e[r],n.indexOf(t)<0&&(n+=t);return n}var i=n(1),s=n(3);e.exports=function(e,t,n,p,o,l){if(s.isObject(e)){var u=e;e=u.start,t=u.end,n=u.expr,p=u.external,o=u.prop,l=u.template}e||(e="{"),t||(t="}"),n||(n="#"),p||(p="$"),o||(o="@"),l||(l="template");var c=a(e+t),f=e[0],m=c.substr(1),v="#$@",g=a(n+v),h=n.replace(/\$/g,"\\$"),d=p.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:t,exprRule:n,externalRule:p,propRule:o,xmlOpenTag:r("^<([a-z"+f+g+"][-a-z0-9_:./"+m+"]*)[^>]*>$","i"),insideBraceParam:r(e+"([^"+c+"]+)"+t,"i"),replaceBraceParam:function(){return r("[\\s]+("+e+"){1,2}([^"+c+"]+)("+t+"){1,2}","g")},replaceSplit:r("(?:"+e+"){1,2}[^"+c+"]+(?:"+t+"){1,2}"),replaceParam:function(){return r("(("+e+"){1,2})([^"+c+"]+)("+t+"){1,2}","g")},checkElem:function(){return r("([^>]*)(<([a-z"+f+"/"+g+"!][-a-z0-9_:."+c+g+"]*)[^>]*>)([^<]*)","ig")},externalSplit:r(d+"\\{[^{}]*(?:\\{[^"+p+"]*\\})*[^{}]*\\}"),external:function(){return r(d+"\\{([^{}]*(\\{[^"+p+"]*\\})*[^{}]*)\\}","g")},expr:r("^"+h+"([^\\s]+)","i"),include:function(){return r("<"+h+"include([^>]*)>","ig")},template:l})}},function(e,t,n){"use strict";function r(e,t){return i.isObject(e)&&(t=e.template,e=e.name),function(n){null!=e&&s(e,n),t&&(n.prototype.template=a.compileComponent(t,e))}}var a=n(1),i=n(3),s=n(11).registerComponent;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){if(e){if(u.isObject(t)){var i=t;t=i.tmplName,n=i.isComponent,r=i.fileName}var s;if(t&&(s=l.templates[t]),!s){var p,o=u.isObject(e);if(o&&e.main)p=e;else{var m;if(t&&(m=l.asts[t]),!m){if(o&&"nj_root"===e.type)m=e;else{if(m=a(),u.isString(e)){var v=l.includeParser;v&&(e=v(e,r)),e=f(e)}u.checkElem(e,m)}t&&(l.asts[t]=m)}p=c(m.content,!n)}s=u.template(p),t&&(l.templates[t]=s)}return s.main}}function a(){var e=u.lightObj();return e.type="nj_root",e.content=[],e}function i(e,t){return r(e,t,!0)}function s(e,t,n){var r=u.getTagComponents(t,n),a=[];return u.each(r,function(t){var n=i(t.innerHTML,t.id),r=t.parentNode;"inferno"===l.componentLib&&u.removeChildNode(r),a.push(l.componentRender(n(e),r))},!1,!0),a}function p(e){l.initTagData=e}function o(e,t){var n=a();return u.isString(e)&&(e=f(e)),u.checkElem(e,n),c(n.content,!t)}var l=n(1),u=n(2),c=n(17),f=n(19);e.exports={compile:r,compileComponent:i,renderTagComponent:s,setInitTagData:p,precompile:o}},function(e,t,n){"use strict";function r(e,t,n,r,i){var s="",p=t.useString,o=f.isString(n),u=o||0===n,c=1===e.length?"1":"2",m={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_this:0,_value:0,_filter:0,_thisF:0,newContext:r};return p?m._children=0:m._compParam=0,u?(s+=a(),s+="if(!parent) {\n",s+="  parent = p1.lightObj();\n",s+="  if (data) {\n",s+="    parent.data = multiData ? data[0] : data;\n",s+="  }\n",s+="  p2.parent = parent;\n",s+="};\n"):r?(s+="var parent = p1.lightObj(),\n",s+="  _parent = p2.parent,\n",s+="  multiData = p3.multiData,\n",s+="  hasItem = 'item' in p4;\n",s+="parent.data = hasItem ? p4.item : _parent.data;\n",s+="parent.parent = p4.fallback ? _parent : _parent.parent;\n",s+="parent.index = 'index' in p4 ? p4.index : _parent.index;\n",s+="var data;\n",s+="if(hasItem) data = p1.getNewData(p4.item, p2.data, multiData, p4.addData);\n",s+="else data = p2.data;\n",s+="var _p2 = p1.lightObj();\n",s+="_p2.parent = parent;\n",s+="_p2.data = data;\n",s+="var _p3 = p1.lightObj();\n",s+="if(p4.addData) multiData = true;\n",s+="_p3.multiData = multiData;\n"):s+=a(),"2"===c&&(s+=p?"var ret = '';\n":"var ret = [];\n"),s+=l(e,t,m,c,i),"2"===c&&(s+="return ret;"),t[u?"main"+(o?n:""):"fn"+n]=Function("p1","p2","p3","p4","p5",s),n}function a(){return"var parent = p2.parent,\n  data = p2.data,\n  multiData = p3.multiData;\n"}function i(e,t,n,r){var a,i=n.useString,p=!r&&e.escape;if(e.prop.isStr)a="'"+e.prop.name+"'";else{var o=e.prop.name,l=e.prop.parentNum,u="",c=!1;if("#"===o?(u="parent.index",c=!0):"."===o&&(u="parent.data",c=!0),l){u||(u="parent.data");for(var m=0;l>m;m++)u="parent."+u;c||(u+="['"+o+"']",c=!0)}a=c?u:"(!multiData ? data['"+o+"'] : p1.getDatasValue(data, '"+o+"'))"}var g=e.prop.filters;if(g){var h="_value"+t._value++,d="var "+h+" = "+a+";\n";return f.each(g,function(e){var n=t._filter++,r=t._thisF++,a=v[e.name],i=!a;d+="\nvar _filter"+n+" = p1.filters['"+e.name+"'];\n",d+="if (!_filter"+n+") {\n",d+="  p1.warn('"+e.name+"', 'filter');\n",d+="}\n",d+="else {\n",d+="  var _thisF"+r+" = p1.lightObj();\n",(i||a.useString)&&(d+="  _thisF"+r+".useString = p1.useString;\n"),(i||a.data)&&(d+="  _thisF"+r+".data = parent.data;\n"),(i||a.parent)&&(d+="  _thisF"+r+".parent = parent.parent;\n"),(i||a.index)&&(d+="  _thisF"+r+".index = parent.index;\n"),d+="\n  "+h+" = _filter"+n+".apply(_thisF"+r+", ["+h+(e.params?e.params.reduce(function(e,t){return e+", '"+t+"'"},""):"")+"]);\n",d+="}\n"},!1,!0),{valueStr:s(h,i,p),filterStr:d}}return s(a,i,p)}function s(e,t,n){return t&&n?"p1.escape("+e+")":e}function p(e,t,n){var a=e.strs[0],s="",p="";return f.isString(a)?(s=e.isAll||""===a?"":"'"+a+"'",p="",f.each(e.props,function(r,o){var l,u=i(r,t,n);if(f.isString(u)?l=u:(l=u.valueStr,p+=u.filterStr),e.isAll)e.isTmplPlace&&(l+=".call({ _njParent: parent }, data)");else{var c=e.strs[o+1];l=(""===a&&0==o?"":" + ")+"("+l+")"+(""!==c?" + '"+c+"'":"")}if(s+=l,e.isAll)return!1},!1,!0,!0)):f.isObject(a)&&null!=a.length?(s+="{\n",f.each(a,function(e,t,a,i){s+="length"!==t?'  "'+t+'": p1.main'+r(e.content,n,"T"+ ++n._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=f.isObject(a)&&a._njEx?a._njEx:JSON.stringify(a._njShim?a._njShim:a),""===p?s:{valueStr:s,filterStr:p}}function o(e,t,n,a,s){var o="",c=t.useString;if("nj_plaintext"===e.type){var v,h=p(e.content[0],n,t);f.isObject(h)&&(v=h.filterStr,h=h.valueStr);var d=u(1,a,{text:h},t,s);v&&(d=v+d),o+=c?d:g(d)}else if("nj_expr"===e.type){var x=n._expr++,_=n._dataRefer++,y="";if(o+="\nvar _expr"+x+" = p1.exprs['"+e.expr+"'];\n",e.refer){y+="var _dataRefer"+_+" = [\n";var b=e.refer.props,j=b.length,v="";f.each(b,function(e,r){var a=i(e,n,t,!0);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),y+="  "+a+(j-1>r?",":"")},!1,!0),y+="\n];\n",""!==v&&(y=v+y),o+=y}o+="p1.throwIf(_expr"+x+", '"+e.expr+"', 'expr');\n";var O=n._this++,S=m[e.expr],C=!S,P=!!S&&S.newContext,E=n.newContext;o+="\nvar _this"+O+" = p1.lightObj();\n",(C||S.useString)&&(o+="_this"+O+".useString = p1.useString;\n"),(C||S.data)&&(o+="_this"+O+".data = parent.data;\n"),(C||S.parent)&&(o+="_this"+O+".parent = parent.parent;\n"),(C||S.index)&&(o+="_this"+O+".index = parent.index;\n");var R="p5";a&&a._paramsE&&(R=a._paramsE),(C||S.paramsExpr)&&(o+="_this"+O+".paramsExpr = "+R+";\n"),(C||S.result)&&(o+="_this"+O+".result = "+(e.content?"p1.exprRet(p1, "+(E?"_":"")+"p2, "+(E?"_":"")+"p3, p1.fn"+r(e.content,t,++t._no,P,s)+", "+R+")":"p1.noop")+";\n"),(C||S.inverse)&&(o+="_this"+O+".inverse = "+(e.contentElse?"p1.exprRet(p1, "+(E?"_":"")+"p2, "+(E?"_":"")+"p3, p1.fn"+r(e.contentElse,t,++t._no,P,s)+", "+R+")":"p1.noop")+";\n"),o+=u(2,a,{_expr:x,_dataRefer:""!==y?_:"none",_this:O},t,s)}else{var w,T=n._type++;w=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var D;if(D=c?"'"+w+"'":"p1.compClass['"+w+"'] ? p1.compClass['"+w+"'] : '"+w+"'",e.typeRefer){var k=n._typeRefer++,L=p(e.typeRefer,n,t);f.isObject(L)&&(o+=L.filterStr,L=L.valueStr),o+="\nvar _typeRefer"+k+" = "+L+";\n",o+="var _type"+T+" = _typeRefer"+k+" ? _typeRefer"+k+" : ("+D+");\n"}else o+="\nvar _type"+T+" = "+D+";\n";var N=e.params,A=e.paramsExpr,I="";if(N||A){var F=n._params++;if(I="var _params"+F+" = ",A){var $=n._paramsE++;if(I+=(c?"''":"null")+";\n",I+="var _paramsE"+$+" = {};\n",I+=l(A.content,t,n,{_paramsE:"_paramsE"+$}),c){var q="";f.each(N,function(e,t,n,r){0==n&&(q+="{ "),q+=t+": 1",q+=r-1>n?", ":" }"},!1,!1),I+="_params"+F+" += p1.assignStringProp(_paramsE"+$+", "+(""===q?"null":q)+");\n"}else I+="\n_params"+F+" = _paramsE"+$+";\n"}if(N){var K=Object.keys(N),j=K.length,v="";c||A||(I+="{\n"),f.each(K,function(e,r){var a=p(N[e],n,t);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),c||"style"!==e||(a="p1.styleProps("+a+")");var i=e,s="'"+i+"'"===a;c||(i=f.fixPropName(e)),I+=A?c?"_params"+F+" += ' "+i+(s?" '":"=\"' + "+a+" + '\"'")+";\n":"_params"+F+"['"+i+"'] = "+(s?"true":a)+";\n":c?(r>0?"  + ":"")+"' "+i+(s?" '":"=\"' + "+a+" + '\"'")+(r==j-1?";":"")+"\n":"  '"+i+"': "+(s?"true":a)+(j-1>r?",\n":"")},!1,!1),c||A||(I+="\n};\n"),""!==v&&(I=v+I)}o+=I}var B,z;c?(z=n._children++,o+="var _children"+z+" = '';\n"):(B=n._compParam++,o+="var _compParam"+B+" = [_type"+T+", "+(""!==I?"_params"+F:"null")+"];\n"),o+=l(e.content,t,n,c?{_children:"_children"+z}:{_compParam:"_compParam"+B},null!=s?s+1:s),o+=u(3,a,c?{_type:T,_params:""!==I?F:null,_children:z,_selfClose:e.selfCloseTag}:{_compParam:B},t,s)}return o}function l(e,t,n,r,a){var i="";return e?(f.each(e,function(e){i+=o(e,t,n,r,a)},!1,!0),i):i}function u(e,t,n,r,a){var i,s=r.useString;switch(e){case 1:i=c(a,s)+n.text+(s&&null!=a?" + '\\n'":"");break;case 2:i="_expr"+n._expr+".apply(_this"+n._this+("none"!==n._dataRefer?", _dataRefer"+n._dataRefer:"")+")";break;case 3:if(s){var p=c(a,s);i=p+"'<' + _type"+n._type+" + "+(null!=n._params?"_params"+n._params+" + ":""),n._selfClose?i+="' />\\n'":(i+="'>\\n'",i+=" + _children"+n._children+" + ",i+=p+"'</' + _type"+n._type+" + '>\\n'")}else i="p1.compPort.apply(p1.compLib, _compParam"+n._compParam+")"}return"1"===t?"\nreturn "+i+";":"2"===t?s?"\nret += "+i+";\n":"\nret.push("+i+");\n":t._paramsE?"\n"+i+";\n":s?"\n"+t._children+" += "+i+";\n":"\n"+t._compParam+".push("+i+");\n"}function c(e,t){var n="";if(t&&null!=e&&e>0){n+="'";for(var r=0;e>r;r++)n+="  ";n+="' + "}return n}var f=(n(1),n(2)),m=f.exprConfig,v=f.filterConfig,g=n(18);e.exports=function(e,t){var n={useString:t,_no:0,_noT:0};return r(e,n,n._no,null,0),n}},function(e,t){"use strict";function n(e){return e.replace(a,function(e,t){return r[t]})}var r={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(r).join("|")+");","g");e.exports=n},function(e,t,n){"use strict";function r(e){var t,n;if(this&&(t=this.tmplKey),t&&(n=v.strTmpls[t]))return n;var r,s=g.isString(e),o=e,l=arguments,u=0,c=[],f="";if(s){o=e.split(h.externalSplit);var x,_=h.external();for(r=[];x=_.exec(e);)r.push(x[1])}var y=o.length;return g.each(o,function(e,t){var n="";if(y-1>t){var a,i,p=e.length-1,o="@"===e[p];if(s){var m=r[t],v=m.match(/#(\d+)/);v&&null!=v[1]?a=l[parseInt(v[1],10)+1]:(a=m,o=i=!0)}else a=l[t+1];!g.isString(a)||o?(n="_nj-split"+u+"_",o&&(i?a=d({_njEx:a}):(e=e.substr(0,p),a=d(a))),c.push(a),u++):n=a}f+=e+n},!1,!0),f=i(f),null==t&&(t=g.uniqueKey(f+p(c)),n=v.strTmpls[t])?n:(n=a(f,c),m(n,t),v.strTmpls[t]=n,n)}function a(e,t){for(var n,r=[],a={elem:r,elemName:"root",parent:null},i=null,p=h.checkElem();n=p.exec(e);){var o=n[1],u=n[2],m=n[3],v=n[4];o&&"\n"!==o&&(o=s(o),f(o,a.elem,t)),u&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===u[u.length-2]?c(u,m,a.elem,t):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),l(u,m,a.elem,t))),v&&"\n"!==v&&(v=s(v),f(v,a.elem,t))}return r}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function p(e){var t="";return g.each(e,function(e){t+=g.isArray(e)?"|"+o(e,!0):"|"+JSON.stringify(e)},!1,!0),t}function o(e,t){var n;if(t||g.isArray(e))if(null!=e.njKey)n="+"+e.njKey;else{n="";for(var r=0,a=e.length;a>r;r++)n+=o(e[r])}else n="+"+e;return n}function l(e,t,n,r,a){var i,s;if(t[0]===h.exprRule)i=e.substring(1,e.length-1);else if(0===t.indexOf(h.propRule))i=h.exprRule+"prop {'"+t.substr(h.propRule.length)+"'}";else{var p=u(e,r);i=p.elem,s=p.params}if(a){var o=[i];s&&o.push(s),n.push(o)}else n.push(i),s&&n.push(s)}function u(e,t){var n,r=h.exprRule,a=h.startRule,i=h.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,p){return n||(n=[r+"params"]),n.push([r+"param "+a+"'"+s+"'"+i,t[p]]),""}),e=e.replace(h.replaceBraceParam(),function(e,t,s){s=s.trim();var p=s.replace(/\.\.\//g,"");return 0===p.indexOf("...")?(n||(n=[r+"params"]),n.push([r+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+p+"="+e.trim()}),{elem:e,params:n}}function c(e,t,n,r){t===h.exprRule+"else"?n.push(e.substr(1,5)):l(e,t,n,r,!0)}function f(e,t,n){for(var r,a=/_nj-split(\d+)_/g,i=[];r=a.exec(e);)i.push(r[1]);i.length?g.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&t.push(e);var r=i.shift();null!=r&&t.push(n[r])},!1,!0):t.push(e)}function m(e,t){e.njKey=t,e.render=function(){return v.compile(this,this.njKey).apply(null,arguments)},e.renderComponent=function(){return v.compileComponent(this,this.njKey).apply(null,arguments)}}var v=n(1),g=n(3),h=(n(5),v.tmplRule),d=n(20);v.strTmpls={},e.exports=r},function(e,t){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,t,n){"use strict";var r=n(19);e.exports=function(e){return function(){return r.apply({tmplKey:e},arguments)}}},function(e,t){"use strict";e.exports=function(e){var t=document;t.addEventListener?t.addEventListener("DOMContentLoaded",e,!1):self.attachEvent("onload",e)}},function(e,t,n){"use strict";var r=n(1),a=n(3);e.exports=function(e){a.assign(r,e)}}])});
//# sourceMappingURL=nornj.min.js.map