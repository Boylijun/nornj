!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.NornJ=r():e.NornJ=r()}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){(function(r){"use strict";var t=n(1),a=n(2),i=n(13),s=n(16),p=n(17),o=n(18);t.compileStringTmpl=s,t.config=o,a.assign(t,i,p,a);var u="undefined"!=typeof self?self:r;e.exports=u.NornJ=u.nj=t}).call(r,function(){return this}())},function(e,r){"use strict";function n(){return n["tmplTag"+(n.outputH?"H":"")].apply(null,arguments)}n.createElement=null,n.components={},n.asts={},n.templates={},n.tmplStrs={},n.errorTitle="[NornJ]",n.tmplRule={},n.outputH=!1,e.exports=n},function(e,r,n){"use strict";var t=n(3),a=n(4),i=n(5),s=n(7),p=n(8),o=n(9),u=n(10),l=n(11),c=n(6),f=n(12);f(),e.exports=t.assign({escape:p,setTmplRule:f},o,u,l,c,t,a,i,s)},function(e,r,n){"use strict";function t(e,r){return y.apply(e,r),e}function a(e,r){return j.call(e,r)}function i(e){return Array.isArray(e)}function s(e){var r=void 0===e?"undefined":d(e);return!i(e)&&("function"===r||"object"===r&&!!e)}function p(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return function(r){return null==r?void 0:r[e]}}function u(e){var r=S(e);return"number"==typeof r&&r>=0}function l(e,r,n,t){if(e)if(null==t&&(t=u(e)),n=n?n:e,t)for(var a=0,i=e.length;i>a;a++){var s=r.call(n,e[a],a,i);if(s===!1)break}else for(var p=Object.keys(e),i=p.length,a=0;i>a;a++){var o=p[a],s=r.call(n,e[o],o,a,i);if(s===!1)break}}function c(e){var r=[],n=0;if(i(e))for(var t=0,a=S(e);a>t;t++){var s=e[t];s=c(s);var p=0,o=s.length;for(r.length+=o;o>p;)r[n++]=s[p++]}else r[n++]=e;return r}function f(){}function m(e,r,n){if(!e)switch(n){case"expr":throw Error(b+'Expression "'+r+'" is undefined, please check it has been registered.');default:throw Error(b+(r||e))}}function v(e,r){var n=b;switch(r){case"filter":n+='A filter called "'+e+'" is undefined.';break;default:n+=e}console.warn(n)}function g(){return Object.create(null)}function x(e,r){if(null!=e){var n;if(null==r){var t=e[0];"'"===t?n=O:'"'===t&&(n=C)}else n=r?C:O;return n&&(e=e.replace(n,"")),e}}function h(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=n(1),y=Array.prototype.push,j=Array.prototype.slice,P=Object.prototype.hasOwnProperty,b=_.errorTitle,S=o("length"),C=/["]+/g,O=/[']+/g,w=Object.assign||function(e){for(var r=1,n=arguments;n.length>r;r++){var t=n[r];for(var a in t)P.call(t,a)&&(e[a]=t[a])}return e},R={isArray:i,isArrayLike:u,isObject:s,isString:p,each:l,flatten:c,throwIf:m,assign:w,lightObj:g,arrayPush:t,arraySlice:a,clearQuot:x,toCamelCase:h,warn:v,noop:f};e.exports=R},function(e,r,n){"use strict";function t(e){return _.xmlOpenTag.exec(e)}function a(e){return y.test(e)}function i(e){return j[e.toLowerCase()]}function s(e){for(var r,n,t=_.openTagParams;r=t.exec(e);){var a=r[1];if("/"!==a){n||(n=[]);var i=r[7],s=r[4];i=null!=i?x.clearQuot(i):a,/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)),n.push({key:a,value:i,onlyBrace:s})}}return n}function p(e,r){return x.isString(e)&&e.toLowerCase()==="</"+r+">"}function o(e){return _.insideBraceParam.exec(e)}function u(e){var r,n=_.expr.exec(e);if(n){r=[n[1]];var t=s(e);t&&r.push(t)}return r}function l(e){return"tmpl"===e}function c(e,r,n){var t=r.params;t||(t=r.params=x.lightObj());var a=t.tmpls;if(a){var i=a.strs[0],s=i.length;null!=n?i[n]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=n?i[n]=e:(i[0]=e,i.length=1),t.tmpls=h.compiledParam(i)}}function f(e){return"params"===e||"props"===e}function m(e,r,n){if(r.paramsExpr)x.arrayPush(r.paramsExpr.content,n?[e]:e.content);else{var t=void 0;t=n?{type:"nj_expr",expr:"props",content:[e]}:e,r.paramsExpr=t}}function v(e){var r=d[e];return{isExprProp:!!r&&r.exprProps,isProp:P.indexOf(e)>-1}}var g=n(1),x=n(3),h=n(5),d=n(6).exprConfig,_=g.tmplRule,y=/^<[^>]+\/>$/i,j={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},P=["param","prop","spread"];e.exports={getXmlOpenTag:t,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:p,getInsideBraceParam:o,isExpr:u,isTmpl:l,addTmpl:c,isParamsExpr:f,addParamsExpr:m,isExprProp:v}},function(e,r,n){"use strict";function t(e){var r=u.lightObj();return u.each(e,function(e,n){r[n]=p(e)},!1,!1),r}function a(e){var r=u.lightObj();if(e.indexOf("|")>=0){var n,t=[];n=e.split("|"),e=n[0].trim(),n=n.slice(1),u.each(n,function(e){var r=i(e.trim()),n=u.lightObj(),s=r[1];if(s){var p=r[3];if(p){var o=[];u.each(p.split(","),function(e){o[o.length]=a(e.trim())},!1,!0),n.params=o}n.name=s,t.push(n)}},!1,!0),r.filters=t}if(0===e.indexOf("../")){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),r.parentNum=s}e=c.exec(e);var p=e[7];return r.name=p?e[8]:e[1],r.jsProp=e[9],e[8]||(r.isBasicType=!0),p&&(r.isComputed=!0),r}function i(e){return f.exec(e)}function s(e,r){for(var n,t,a=l.replaceParam,i=0;n=a.exec(e);){t||(t=[]);var s=n[3],p=[n[0],n[1],null,!0];i>0&&(p[3]=!1),s=s.trim(),p[2]=s,t.push(p),i++}return t}function p(e){var r=u.lightObj(),n=u.isString(e)?e.split(l.replaceSplit):[e],t=null,i=!1;if(n.length>1){var p=s(e,n);t=[],u.each(p,function(r){var n=u.lightObj();i=!!r[3]&&r[0]===e,n.prop=a(r[2]),n.escape=r[1]!==l.firstChar+l.startRule,t.push(n)},!1,!0)}return r.props=t,r.strs=n,r.isAll=i,r}var o=n(1),u=n(3),l=o.tmplRule,c=/(('[^']+')|("[^"]+")|(-?([0-9][0-9]*)(\.\d+)?)|true|false|null|undefined|([#]*)([^.[\]()]+))([^\s()]*)/,f=/([\w$@=+-\\*\/&%]+)(\(([^()]+)\))*/;e.exports={compiledParam:p,compiledParams:t,compiledProp:a}},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e){var r={useString:!0,exprProps:!1,newContext:!0};return e&&(r=s.assign(r,e)),r}function i(e,r,n){var t=e;s.isObject(e)||(t={},t[e]={expr:r,options:n}),s.each(t,function(e,r){if(e){var n=e.expr,t=e.options;n||t?(n&&(p[r]=n),t&&(o[r]=a(t))):p[r]=e}},!1,!1)}var s=n(3),p={if:function(e,r){"false"===e&&(e=!1);var n,t;if(n=r.useUnless?!e:!!e)t=r.result();else{var a=r.props;a&&!function(){var e=a.else;a.elseifs?!function(){var r=a.elseifs.length;s.each(a.elseifs,function(n,a){return n.value?(t=n.fn(),!1):void(a===r-1&&e&&(t=e()))},!1,!0)}():e&&(t=e())}()}return r.useString&&null==t?"":t},else:function(e){return e.exprProps.else=e.result},elseif:function(e,r){var n=r.exprProps;n.elseifs||(n.elseifs=[]),n.elseifs.push({value:e,fn:r.result})},switch:function(e,r){var n,t=r.props,a=t.elseifs.length;return s.each(t.elseifs,function(r,i){return e===r.value?(n=r.fn(),!1):void(i===a-1&&t.else&&(n=t.else()))},!1,!0),n},unless:function(e,r){return r.useUnless=!0,p.if.call(this,e,r)},each:function(e,r){var n,a=r.useString;if(e)!function(){n=a?"":[];var i=r.props;s.each(e,function(e,s,p){var o={data:e,index:s,fallback:!0};if(i&&i.moreValues){var u;o.extra=(u={},t(u,"@first",0===s),t(u,"@last",s===p-1),t(u,"@length",p),u)}var l=r.result(o);a?n+=l:n.push(l)},!1,s.isArrayLike(e)),a||n.length||(n=null)}();else{var i=r.props;i&&i.else&&(n=i.else()),a&&null==n&&(n="")}return n},param:function(e,r){var n,t=r.result();null!=t?s.isArray(t)?(n="",s.each(s.flatten(t),function(e){n+=null!=e?e:""},!1,!0)):n=t:n=!r.useString||e,r.exprProps[e]=n},spread:function(e,r){e&&s.each(e,function(e,n){r.exprProps[n]=e},!1,!1)},for:function(e,r,n){r._njOpts&&(n=r,r=e,e=0);var t,a=n.useString;for(t=a?"":[];r>=e;e++){var i=n.result({index:e});a?t+=i:t.push(i)}return t},obj:function(e){return e.props},blank:function(e){return e.result()}},o={if:a({newContext:!1}),else:a({newContext:!1,useString:!1,exprProps:!0}),elseif:a({newContext:!1,useString:!1,exprProps:!0}),switch:a({newContext:!1}),unless:a({newContext:!1}),each:a(),param:a({newContext:!1,exprProps:!0}),spread:a({newContext:!1,useString:!1,exprProps:!0}),for:a(),obj:a({newContext:!1,useString:!1}),blank:a({newContext:!1,useString:!1})};p.prop=p.param,o.prop=o.param,p.case=p.elseif,o.case=o.elseif,p.default=p.else,o.default=o.else,e.exports={exprs:p,exprConfig:o,registerExpr:i}},function(e,r,n){"use strict";function t(e){if(m.isObject(e))return e;for(var r=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g,n=void 0,t=void 0;n=r.exec(e);){var a=n[1],i=n[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=m.toCamelCase(a),t[a]=i}return t}function a(e,r){var n,t;void 0===r&&(r=this.data);for(var a=0,i=r.length;i>a;a++)if(t=r[a],t&&(n=t[e],void 0!==n))return n}function i(e,r){return null==e?e:e._njTmpl?e.call({_njData:r.data,_njParent:r.parent,_njIndex:r.index}):e(r)}function s(e,r){var n=[];return"data"in r&&n.push(r.data),"extra"in r&&n.push(r.extra),{data:n.length?m.arrayPush(n,e.data):e.data,parent:r.fallback?e:e.parent,index:"index"in r?r.index:e.index,getData:a}}function p(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function o(e,r){var n="";for(var t in e)if(!r||!r[t]){var a=e[t];n+=" "+t+(t!==a?'="'+a+'"':" ")}return n}function u(e,r,n,t){return function(a){return n(e,r,a,t)}}function l(e,r){return function(){var n=this,t=m.arraySlice(arguments);return r(e,{data:n&&n._njData?m.arrayPush(t,n._njData):t,parent:n&&n._njParent?n._njParent:null,index:n&&n._njIndex?n._njIndex:null,getData:a})}}function c(e){var r={useString:e.useString,exprs:f.exprs,filters:f.filters,noop:m.noop,lightObj:m.lightObj,throwIf:m.throwIf,warn:m.warn,newContext:s,getComputedData:i,styleProps:t,exprRet:u};return r.useString?(r.assignStringProp=o,r.escape=f.escape):(r.h=f.createElement,r.components=f.components),m.each(e,function(e,n){0===n.indexOf("main")?(r[n]=l(r,e),r[n]._njTmpl=!0,r["_"+n]=e):0===n.indexOf("fn")&&(r[n]=e)},!1,!1),r}var f=n(1),m=n(3);e.exports={newContext:s,getData:a,getComputedData:i,fixPropName:p,styleProps:t,assignStringProp:o,exprRet:u,tmplWrap:l,template:c}},function(e,r){"use strict";function n(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return t[e]}):e}var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=n},function(e,r,n){"use strict";function t(e,r,n){var t={};t.type="nj_plaintext",t.content=[o.compiledParam(e)],r[n].push(t)}function a(e,r,n){var a="content";if(p.isArray(e)){var s={},c=e[0];if(p.isString(c)){var f,m,v,g,x,h,d,_,c=c,y=e.length,j=e[y-1],P=!1,b=!1;if(f=u.isExpr(c)){var S=f[0];if(m=f[1],g=u.isTmpl(S),x=u.isParamsExpr(S),!x){var C=u.isExprProp(S);h=C.isProp,d=C.isExprProp,_=h?!n:d}s.type="nj_expr",s.expr=S,null==m||g||x||(s.args||(s.args=[]),p.each(m,function(e){var r=o.compiledParam(e.value);e.onlyBrace?s.args.push(r):(s.params||(s.params=p.lightObj()),s.params[e.key]=r)},!1,!0)),P=!0}else{var O=u.getXmlOpenTag(c);O&&(v=O[1],u.isXmlSelfCloseTag(c)?s.selfCloseTag=!0:b=u.isXmlCloseTag(j,v),P=!0)}if(P){var w=!0;if(f)g?(w=!1,u.addTmpl(s,r,m?m[0].value:null)):x?w=!1:_&&(w=!1);else{s.type=v;var R=u.getInsideBraceParam(v);R&&(s.typeRefer=o.compiledParam(R[0]));var T=u.getOpenTagParams(c);T&&(s.params||(s.params=p.lightObj()),p.each(T,function(e){s.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=o.compiledParam(e.value)},!1,!0)),s.selfCloseTag||(s.selfCloseTag=u.verifySelfCloseTag(v))}w&&r[a].push(s);var E=y-(b?1:0),k=e.slice(1,E);k&&k.length&&i(k,s,x||n&&!h),(x||_)&&u.addParamsExpr(s,r,d)}else i(e,r)}else p.isArray(c)&&i(e,r)}else if(p.isString(e)){var A=e.split(l.newlineSplit),N=A.length-1;A.forEach(function(e,n){e=e.trim(),""!==e&&t(e+(N>n?"\\n":""),r,a)})}else t(e,r,a)}function i(e,r,n){r.content||(r.content=[]),p.each(e,function(e){a(e,r,n)},!1,!0)}var s=n(1),p=n(3),o=n(5),u=n(4),l=s.tmplRule;e.exports={checkElem:a}},function(e,r,n){"use strict";function t(e,r){var n=e;return i.isObject(e)||(n={},n[e]=r),i.each(n,function(e,r){a.components[r.toLowerCase()]=e},!1,!1),r}var a=n(1),i=n(3);e.exports={registerComponent:t}},function(e,r,n){"use strict";function t(e){var r={useString:!1};return e&&(r=i.assign(r,e)),r}function a(e,r,n){var a=e;i.isObject(e)||(a={},a[e]={filter:r,options:n}),i.each(a,function(e,r){if(e){var n=e.filter,a=e.options;n||a?(n&&(s[r]=n),a&&(p[r]=t(a))):s[r]=e}},!1,!1)}var i=n(3),s={prop:function(e,r){var n=e;return n&&i.each(r.split("."),function(e){n=n[e]},!1,!0),n},"==":function(e,r){return e==r},"===":function(e,r){return e===r},lt:function(e,r){return r>e},lte:function(e,r){return r>=e},gt:function(e,r){return e>r},gte:function(e,r){return e>=r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},p={prop:t(),"==":t(),"===":t(),lt:t(),lte:t(),gt:t(),gte:t(),"+":t(),"-":t(),int:t(),float:t(),bool:t()};e.exports={filters:s,filterConfig:p,registerFilter:a}},function(e,r,n){"use strict";function t(e,r){return RegExp(e,r)}function a(e){for(var r,n="",t=0,a=e.length;a>t;t++)r=e[t],n.indexOf(r)<0&&(n+=r);return n}var i=n(1),s=n(3);e.exports=function(e,r,n,p,o){if(s.isObject(e)){var u=e;e=u.start,r=u.end,n=u.expr,p=u.prop,o=u.template}e||(e="{{"),r||(r="}}"),n||(n="#"),p||(p="@"),o||(o="template");var l=a(e+r),c=e[0],f=r[r.length-1],m=l.substr(1),v="#$@",g=a(n+v),x=n.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:r,firstChar:c,lastChar:f,exprRule:n,propRule:p,xmlOpenTag:t("^<([a-z"+c+g+"][-a-z0-9_|./"+c+m+"]*)[^>]*>$","i"),openTagParams:t("[\\s]+(((["+c+"]?"+e+")([^"+l+"]+)("+r+"["+f+"]?))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),insideBraceParam:t("(["+c+"]?"+e+")([^"+l+"]+)("+r+"["+f+"]?)","i"),spreadProp:t("[\\s]+(["+c+"]?"+e+")[\\s]*(\\.\\.\\.[^"+l+"]+)("+r+"["+f+"]?)","g"),replaceSplit:t("(?:["+c+"]?"+e+")[^"+l+"]+(?:"+r+"["+f+"]?)"),replaceParam:t("((["+c+"]?"+e+"))([^"+l+"]+)("+r+"["+f+"]?)","g"),checkElem:t("([^>]*)(<([a-z"+c+"/"+g+"!][-a-z0-9_|."+l+g+"]*)([^>]*)>)([^<]*)","ig"),expr:t("^"+x+"([^\\s]+)","i"),include:t("<"+x+"include([^>]*)>","ig"),template:o,newlineSplit:t("\\\\n(?![^"+c+f+"]*"+f+")","g")})}},function(e,r,n){"use strict";function t(e){return function(r,n,t){if(r){if(o.isObject(n)){var i=n;n=i.tmplKey,t=i.fileName}var s;if(n&&(s=p.templates[n]),!s){var c,f=o.isObject(r);if(f&&r.main)c=r;else{var m;if(n&&(m=p.asts[n]),!m){if(f&&"nj_root"===r.type)m=r;else{if(m=a(),o.isString(r)){var v=p.includeParser;v&&(r=v(r,t)),r=l(r)}o.checkElem(r._njTmpl,m)}n&&(p.asts[n]=m)}c=u(m.content,!e)}s=o.template(c),n&&(p.templates[n]=s)}if(r._njParams){var g=function(){return s.main.apply(this,o.arrayPush([r._njParams],arguments))};return g._njTmpl=!0,g}return s.main}}}function a(){var e=o.lightObj();return e.type="nj_root",e.content=[],e}function i(e,r){var n=a();return o.isString(e)&&(e=l(e)),o.checkElem(e._njTmpl,n),u(n.content,!r)}function s(e){return function(r,n){return(e?f:c)(r,n?{tmplKey:n.tmplKey?n.tmplKey:r._njTmplKey,fileName:n.fileName}:r._njTmplKey).apply(null,o.arraySlice(arguments,1))}}var p=n(1),o=n(2),u=n(14),l=n(16),c=t(),f=t(!0);e.exports={compile:c,compileH:f,precompile:i,render:s(),renderH:s(!0)}},function(e,r,n){"use strict";function t(e,r,n,t,a){var i="",s=r.useString,p=v.isString(n),o=p||0===n,u=1===e.length?"1":"2",l={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_value:0,_filter:0,newContext:t};return s?l._children=0:l._compParam=0,!o&&t&&(i+="p2 = p1.newContext(p2, p3);\n"),"2"===u&&(i+=s?"var ret = '';\n":"var ret = [];\n"),i+=c(e,r,l,u,a),"2"===u&&(i+="return ret;"),r[o?"main"+(p?n:""):"fn"+n]=Function("p1","p2","p3","p4",i),n}function a(e,r,n,a,i,s){var p="",o=!e;if((o||e.useString)&&(p+=", useString: p1.useString"),r){var u=!e||e.newContext;(o||e.exprProps)&&(p+=", exprProps: "+a),p+=", result: "+(r.content?"p1.exprRet(p1, p2, p1.fn"+t(r.content,n,++n._no,u,i)+", "+a+")":"p1.noop"),null!=s&&(p+=", props: "+s)}return"{ _njOpts: true, ctx: p2"+p+" }"}function i(e,r,n){var t=void 0,p=n.useString,o=e.escape,u=e.prop,l=u.jsProp,c=u.isComputed;if(e.prop.isBasicType)t=e.prop.name+l;else{var f=e.prop,m=f.name,g=f.parentNum,h="",d=!1,_=!1;if("@index"===m?(h="index",d=!0):"this"===m&&(h="data[0]",d=!0),g){h||(h="data");for(var y=0;g>y;y++)h="parent."+h;d||(_=!0)}if(d||_){var j="p2."+h;t=(d?j:(c?"p1.getComputedData(":"")+"p2.getData('"+m+"', "+j+")"+(c?", p2)":""))+l}else t=(c?"p1.getComputedData(":"")+"p2.getData('"+m+"')"+(c?", p2)":"")+l}var P=e.prop.filters;if(P){var b="_value"+r._value++,S="var "+b+" = "+t+";\n";return v.each(P,function(e){var t=r._filter++,s=x[e.name],p="_filter"+t,u="p1.filters['"+e.name+"']";s?S+="\nvar "+p+" = "+u+";\n":(S+="\nvar "+p+" = p2.getData('"+e.name+"');\n",S+="if(!"+p+") "+p+" = "+u+";\n"),S+="if (!"+p+") {\n",S+="  p1.warn('"+e.name+"', 'filter');\n",S+="}\n",S+="else {\n",S+="  "+b+" = "+p+".apply(p2, ["+b+(e.params?e.params.reduce(function(e,t){return e+", "+i({prop:t,escape:o},r,n)},""):"")+", "+a(s)+"]);\n",S+="}\n"},!1,!0),{valueStr:s(b,p,!c&&o),filterStr:S}}return s(t,p,!c&&o)}function s(e,r,n){return r?n?"p1.escape("+e+")":e:h(e)}function p(e,r){return r.useString?e.replace(/'/g,"\\'"):e}function o(e,r,n){var a=e.strs[0],s="",o="";return v.isString(a)?(s=e.isAll||""===a?"":"'"+p(a,n)+"'",o="",v.each(e.props,function(t,u){var l,c=i(t,r,n);if(v.isString(c)?l=c:(l=c.valueStr,o+=c.filterStr),!e.isAll){var f=e.strs[u+1];if(!n.useString&&"\\n"===f.trim())return void(s+=l);l=(""===a&&0==u?"":" + ")+"("+l+")"+(""!==f?" + '"+p(f,n)+"'":"")}if(s+=l,e.isAll)return!1},!1,!0)):v.isObject(a)&&null!=a.length?(s+="{\n",v.each(a,function(e,r,a,i){s+="length"!==r?'  "'+r+'": p1.main'+t(e.content,n,"T"+ ++n._noT):"  length: "+e,s+=",\n",a===i-1&&(s+="  _njData: p2.data,\n  _njParent: p2.parent,\n  _njIndex: p2.index\n")},!1,!1),s+="}"):v.isObject(a)&&a._njEx&&(s=a._njEx),""===o?s:{valueStr:s,filterStr:o}}function u(e,r,n,t){var a,i=e.params,s=e.paramsExpr,p="";if(i||s){if(a=n._params++,p="var _params"+a+" = ",s){var u=n._paramsE++;if(p+=(t?"''":"null")+";\n",p+="var _paramsE"+u+" = {};\n",p+=c(s.content,r,n,{_paramsE:"_paramsE"+u}),t){var l="";v.each(i,function(e,r,n,t){0==n&&(l+="{ "),l+=r+": 1",l+=t-1>n?", ":" }"},!1,!1),p+="_params"+a+" += p1.assignStringProp(_paramsE"+u+", "+(""===l?"null":l)+");\n"}else p+="\n_params"+a+" = _paramsE"+u+";\n"}if(i){var f=Object.keys(i),m=f.length,g="";t||s||(p+="{\n"),v.each(f,function(e,u){var l=o(i[e],n,r);v.isObject(l)&&(g+=l.filterStr,l=l.valueStr),t||"style"!==e||(l="p1.styleProps("+l+")");var c=e,f="'"+c+"'"===l;t||(c=v.fixPropName(e)),p+=s?t?"_params"+a+" += ' "+c+(f?" '":"=\"' + "+l+" + '\"'")+";\n":"_params"+a+"['"+c+"'] = "+(f?"true":l)+";\n":t?(u>0?"  + ":"")+"' "+c+(f?" '":"=\"' + "+l+" + '\"'")+(u==m-1?";":"")+"\n":"  '"+c+"': "+(f?"true":l)+(m-1>u?",\n":"")},!1,!1),t||s||(p+="\n};\n"),""!==g&&(p=g+p)}}return[p,a]}function l(e,r,n,t,i){var s="",p=r.useString;if("nj_plaintext"===e.type){var l,m=o(e.content[0],n,r);v.isObject(m)&&(l=m.filterStr,m=m.valueStr);var x=f(1,t,{text:m},r,i);l&&(x=l+x),s+=p?x:h(x)}else if("nj_expr"===e.type){var d=n._expr++,_=n._dataRefer++,y="",l="",j=g[e.expr],P="_expr"+d,b="p1.exprs['"+e.expr+"']";j?s+="\nvar "+P+" = "+b+";\n":(s+="\nvar "+P+" = p2.getData('"+e.expr+"');\n",s+="if(!"+P+") "+P+" = "+b+";\n"),y+="var _dataRefer"+_+" = [\n",e.args&&v.each(e.args,function(e,t){var a=o(e,n,r);v.isObject(a)&&(l+=a.filterStr,a=a.valueStr),y+="  "+a+","},!1,!0);var S="p4";t&&t._paramsE&&(S=t._paramsE);var C=u(e,r,n,!1),O=C[0],w=C[1];y+=a(j,e,r,S,i,""!==O?"_params"+w:null),y+="\n];\n",""!==l&&(y=l+y),s+=O+y,s+="p1.throwIf(_expr"+d+", '"+e.expr+"', 'expr');\n",s+=f(2,t,{_expr:d,_dataRefer:_},r,i)}else{var R,T=n._type++;R=e.typeRefer?e.typeRefer.props[0].prop.name:e.type;var E;if(E=p?"'"+R+"'":"p1.components['"+R.toLowerCase()+"'] ? p1.components['"+R.toLowerCase()+"'] : '"+R+"'",e.typeRefer){var k=n._typeRefer++,A=o(e.typeRefer,n,r);v.isObject(A)&&(s+=A.filterStr,A=A.valueStr),s+="\nvar _typeRefer"+k+" = "+A+";\n",s+="var _type"+T+" = _typeRefer"+k+" ? _typeRefer"+k+" : ("+E+");\n"}else s+="\nvar _type"+T+" = "+E+";\n";var C=u(e,r,n,p),O=C[0],w=C[1];s+=O;var N,D;p?(D=n._children++,s+="var _children"+D+" = '';\n"):(N=n._compParam++,s+="var _compParam"+N+" = [_type"+T+", "+(""!==O?"_params"+w:"null")+"];\n"),s+=c(e.content,r,n,p?{_children:"_children"+D}:{_compParam:"_compParam"+N},null!=i?i+1:i),s+=f(3,t,p?{_type:T,_params:""!==O?w:null,_children:D,_selfClose:e.selfCloseTag}:{_compParam:N},r,i)}return s}function c(e,r,n,t,a){var i="";return e?(v.each(e,function(e){i+=l(e,r,n,t,a)},!1,!0),i):i}function f(e,r,n,t,a){var i,s=t.useString;switch(e){case 1:i=m(a,s)+n.text+(s&&null!=a?" + '\\n'":"");break;case 2:i="_expr"+n._expr+".apply(p2, _dataRefer"+n._dataRefer+")";break;case 3:if(s){var p=m(a,s);i=p+"'<' + _type"+n._type+" + "+(null!=n._params?"_params"+n._params+" + ":""),n._selfClose?i+="' />\\n'":(i+="'>\\n'",i+=" + _children"+n._children+" + ",i+=p+"'</' + _type"+n._type+" + '>\\n'")}else i="p1.h.apply(null, _compParam"+n._compParam+")"}return"1"===r?"\nreturn "+i+";":"2"===r?s?"\nret += "+i+";\n":"\nret.push("+i+");\n":r._paramsE?"\n"+i+";\n":s?"\n"+r._children+" += "+i+";\n":"\n"+r._compParam+".push("+i+");\n"}function m(e,r){var n="";if(r&&null!=e&&e>0){n+="'";for(var t=0;e>t;t++)n+="  ";n+="' + "}return n}var v=(n(1),n(2)),g=v.exprConfig,x=v.filterConfig,h=n(15);e.exports=function(e,r){var n={useString:r,_no:0,_noT:0};return t(e,n,n._no,null,0),n}},function(e,r){"use strict";function n(e){return e.replace(a,function(e,r){return t[r]})}var t={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(t).join("|")+");","g");e.exports=n},function(e,r,n){"use strict";function t(e){var r=""+e,n=v[r],t=!!this&&this.outputH;if(!n){var s=f.isString(e),p=s?[e]:e,o=p.length,u=[],l="";f.each(p,function(e,r){var n="";if(o-1>r){var t=e.length-1,a=e[t],i="#"===a,s="@"===a;(i||s)&&(i&&u.push(r),e=e.substr(0,t)),n=(s?m.firstChar:"")+m.startRule+(i?"#":"")+g+r+m.endRule+(s?m.lastChar:"")}l+=e+n},!1,!0),l=i(l),n=a(l),n._njParamCount=o-1,n._njComputedNos=u,v[r]=n}var x,h=arguments,d=n._njParamCount;if(d>0){x={};for(var _=0;d>_;_++)x[g+_]=h[_+1]}var y=function e(){return c["compile"+(t?"H":"")](e,r).apply(this,x?f.arrayPush([x],arguments):arguments)};return y._njTmpl=n,y._njTmplKey=r,y._njParams=x,y}function a(e){for(var r,n=[],t={elem:n,elemName:"root",parent:null},a=null,i=m.checkElem;r=i.exec(e);){var o=r[1],c=r[2],f=r[3],v=r[4],g=r[5];o&&"\n"!==o&&(o=s(o),l(o,t.elem)),c&&("/"===f[0]?f==="/"+t.elemName&&(t=t.parent):"/"===c[c.length-2]?u(c,f,v,t.elem):(a=t,t={elem:[],elemName:f,parent:a},a.elem.push(t.elem),p(c,f,v,t.elem))),g&&"\n"!==g&&(g=s(g),l(g,t.elem))}return n}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim().replace(/(>|<|>=|<=)\(/g,function(e){return x[e]})}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function p(e,r,n,t,a){var i,s;if(r[0]===m.exprRule)i=e.substring(1,e.length-1);else if(0===r.indexOf(m.propRule))i=m.exprRule+"prop "+m.startRule+"'"+r.substr(m.propRule.length)+"'"+m.endRule+n;else{var p=o(e);i=p.elem,s=p.params}if(a){var u=[i];s&&u.push(s),t.push(u)}else t.push(i),s&&t.push(s)}function o(e){var r,n=m.exprRule,t=m.startRule,a=m.endRule;return e=e.replace(m.spreadProp,function(e,i,s){return s=s.trim(),r||(r=[n+"props"]),r.push([n+"spread "+t+s.replace(/\.\.\./g,"")+a+"/"])," "}),{elem:e,params:r}}function u(e,r,n,t){p(e,r,n,t,!0)}function l(e,r){r.push(e)}var c=n(1),f=n(3),m=(n(4),c.tmplRule),v=c.tmplStrs,g="_nj_split",x={">(":"gt(","<(":"lt(",">=(":"gte(","<=(":"lte("};e.exports=t},function(e,r,n){"use strict";var t=n(16);e.exports={tmplTag:function(){return t.apply({outputH:!1},arguments)},tmplTagH:function(){return t.apply({outputH:!0},arguments)}}},function(e,r,n){"use strict";var t=n(1),a=n(12);e.exports=function(e){var r=e.delimiters,n=e.includeParser,i=e.createElement,s=e.outputH;r&&a(r),n&&(t.includeParser=n),i&&(t.createElement=i),null!=s&&(t.outputH=s)}}])});
//# sourceMappingURL=nornj.min.js.map