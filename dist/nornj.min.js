!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.NornJ=n():e.NornJ=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var r=t(1),a=t(2),i=t(16),s=t(19),o=t(21),p=t(22),l=t(23);r.compileStringTmpl=s,r.tmplByKey=o,r.docReady=p,r.config=l,a.assign(r,i,a),"undefined"!=typeof React&&r.setComponentEngine("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var u;"undefined"!=typeof self?(u=self,p(function(){r.componentLib&&r.renderTagComponent(r.initTagData,null,!0)})):u=this,e.exports=u.NornJ=u.nj=r},function(e,n){"use strict";function t(){return t.compileStringTmpl.apply(null,arguments)}t.componentLib=null,t.componentLibObj=null,t.componentLibDom=null,t.componentPort=null,t.componentRender=null,t.componentClasses={},t.asts={},t.templates={},t.errorTitle="NornJ:",t.tmplRule={},e.exports=t},function(e,n,t){"use strict";var r=t(3),a=t(5),i=t(6),s=t(7),o=t(8),p=t(9),l=t(10),u=t(11),c=t(12),f=t(13),m=t(14),v=t(15);m(),e.exports=r.assign({escape:o,setTmplRule:m,registerTmpl:v},p,l,u,c,f,r,a,i,s)},function(e,n,t){"use strict";function r(e,n){return y.apply(e,n),e}function a(e){return Array.isArray(e)}function i(e){var n=typeof e;return!a(e)&&("function"===n||"object"===n&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return function(n){return null==n?void 0:n[e]}}function p(e){var n=j(e);return"number"==typeof n&&n>=0}function l(e,n,t,r){if(e)if(null==r&&(r=p(e)),t=t?t:e,r)for(var a=0,i=e.length;i>a;a++){var s=n.call(t,e[a],a);if(s===!1)break}else for(var o=Object.keys(e),i=o.length,a=0;i>a;a++){var l=o[a],s=n.call(t,e[l],l,a,i);if(s===!1)break}}function u(e){var n=[],t=0;if(a(e))for(var r=0,i=j(e);i>r;r++){var s=e[r];s=u(s);var o=0,p=s.length;for(n.length+=p;p>o;)n[t++]=s[o++]}else n[t++]=e;return n}function c(){}function f(e,n,t){if(!e)switch(t){case"expr":throw Error(b+'Expression "'+n+'" is undefined, please check it has been registered.');default:throw Error(b+(n||e))}}function m(e,n){var t=b;switch(n){case"filter":t+='A filter called "'+e+'" is undefined.';default:t+=e}return t}function v(e,n){var t=e.length;if(0==t)return e;null==n&&(n=0);var r,a;for(r=0,t=e.length;t>r;r++)a=e.charCodeAt(r),n=(n<<5)-n+a,n|=0;return n}function g(){return Object.create(null)}function h(e){var n,t=e[0];return"'"===t?n=/[']+/g:'"'===t&&(n=/["]+/g),n&&(e=e.replace(n,"")),e}function d(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var x=t(1),_=t(4),y=Array.prototype.push,b=x.errorTitle,j=o("length"),S={isArray:a,isArrayLike:p,isObject:i,isString:s,each:l,flatten:u,throwIf:f,assign:_,uniqueKey:v,lightObj:g,listPush:r,clearQuot:h,toCamelCase:d,warn:m,noop:c};e.exports=S},function(e,n){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;10>t;t++)n["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(n).map(function(e){return n[e]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,n){for(var r,s,o=t(e),p=1;arguments.length>p;p++){r=Object(arguments[p]);for(var l in r)a.call(r,l)&&(o[l]=r[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var u=0;s.length>u;u++)i.call(r,s[u])&&(o[s[u]]=r[s[u]])}}return o}},function(e,n,t){"use strict";function r(e){return y.xmlOpenTag.exec(e)}function a(e){return b.test(e)}function i(e){return j[e.toLowerCase()]}function s(e,n){for(var t,r,a=/[\s]+([^\s=>]+)(=(('[^']+')|("[^"]+")|([^"'\s]+)))?/g;t=a.exec(e);){var i=t[1];if("/"!==i&&"/>"!==i){r||(r=[]);var s,o=t[3];o=null!=o?x.clearQuot(o):i,s=o.length,n||(o.lastIndexOf("/>")===s-2?o=o.replace(/\/>/,""):o.lastIndexOf(">")===s-1&&(o=o.replace(/>/,""))),r.push({key:i,value:o})}}return r}function o(e,n){return x.isString(e)&&e.toLowerCase()==="</"+n+">"}function p(e){return y.insideBraceParam.exec(e)}function l(e){var n,t=y.expr.exec(e);if(t){n=[t[1]];var r=y.exprBraceParam.exec(e);r&&n.push(r[0])}return n}function u(e,n){return x.isString(e)&&e==="/"+y.exprRule+n}function c(e){return"tmpl"===e}function f(e,n,t){var r=n.params;r||(r=n.params=x.lightObj());var a=r.tmpls;if(a){var i=a.strs[0],s=i.length;null!=t?i[t]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=t?i[t]=e:(i[0]=e,i.length=1),r.tmpls=_.compiledParam(i)}}function m(e){return"params"===e||"props"===e}function v(e,n){n.paramsExpr?x.listPush(n.paramsExpr.content,e.content):n.paramsExpr=e}function g(e,n){return e||(e='script[type="text/nornj"]'+(n?"[autorender]":"")),document.querySelectorAll(e)}function h(e){for(var n=e.childNodes,t=n.length,r=0;t>r;r++)e.removeChild(e.firstChild)}var d=t(1),x=t(3),_=t(6),y=d.tmplRule,b=/^<[^>]+\/>$/i,j={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports={getXmlOpenTag:r,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:o,getInsideBraceParam:p,isControl:l,isControlCloseTag:u,isTmpl:c,addTmpl:f,isParamsExpr:m,addParamsExpr:v,getTagComponents:g,removeChildNode:h}},function(e,n,t){"use strict";function r(e){var n=l.lightObj();return l.each(e,function(e,t){n[t]=o(e)},!1,!1),n}function a(e,n){var t=l.lightObj();if(!n&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.|\/]+)/g,"|prop($1)")),e.indexOf("|")>=0){var r,a=[];r=e.split("|"),e=r[0].trim(),r=r.slice(1),l.each(r,function(e){var n=i(e.trim()),t=l.lightObj(),r=n[1].toLowerCase();if(r){var s=n[3];if(s){var o=[];l.each(s.split(","),function(e){o[o.length]=l.clearQuot(e).trim()},!1,!0),t.params=o}t.name=r,a.push(t)}},!1,!0),t.filters=a}if(!n&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),t.parentNum=s}return t.name=e,n&&(t.isStr=!0),t}function i(e){return c.exec(e)}function s(e,n){for(var t,r,a=u.replaceParam(),i=0;t=a.exec(e);){r||(r=[]);var s=t[3],o=[t[0],t[1],null,!1,!0];i>0&&(o[4]=!1),s=s.trim(),f.indexOf(s[0])>-1&&(s=l.clearQuot(s),o[3]=!0),o[2]=s,r.push(o),i++}return r}function o(e){var n=l.lightObj(),t=l.isString(e)?e.split(u.replaceSplit):[e],r=null,i=!1;if(t.length>1){var o=s(e,t);r=[],l.each(o,function(n){var t=l.lightObj();i=!!n[4]&&n[0]===e,t.prop=a(n[2],n[3]),t.escape=n[1].split(u.startRule).length<3,r.push(t)},!1,!0)}if(n.props=r,n.strs=t,n.isAll=i,i){var p=r[0].prop;0===p.name.indexOf("!#")&&(p.name=p.name.substr(2),n.isTmplPlace=!0)}return n}var p=t(1),l=t(3),u=p.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:o,compiledParams:r,compiledProp:a}},function(e,n,t){"use strict";function r(e){if(m.isObject(e))return e;for(var n,t,r=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;n=r.exec(e);){var a=n[1],i=n[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=m.toCamelCase(a),t[a]=i}return t}function a(e,n){for(var t,r,a=0,i=e.length;i>a;a++)if(r=e[a],r&&(t=r[n],null!=t))return t}function i(e,n,t,r){var a=e;return null==t&&(t=m.isArray(n)),(t||r)&&(a=m.listPush([e],r?t?n:[n]:n.slice(1))),a}function s(e,n,t,r){var a=n.parent,s=t.multiData,o="item"in r,p={data:o?r.item:a.data,parent:r.fallback?a:a.parent,index:"index"in r?r.index:a.index},l=o?i(r.item,n.data,t.multiData,r.addData):n.data,s=!!r.addData||t.multiData;return{_1:p,_2:l,_3:s,_4:{parent:p,data:l},_5:{multiData:s}}}function o(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function p(e,n){var t="";for(var r in e)if(!n||!n[r]){var a=e[r];t+=" "+r+(r!==a?'="'+a+'"':" ")}return t}function l(e,n,t,r,a){return function(i){return r(e,n,t,i,a)}}function u(e,n){return function(){var t,r=arguments,a=r.length;if(0<a)if(1===a)t=r[0];else{t=[];for(var i=0;a>i;i++)t[t.length]=r[i]}else t={};return n(e,{data:t,parent:this&&this._njParent?this._njParent:null},{multiData:f.isArray(t)})}}function c(e){var n={useString:e.useString,exprs:f.exprs,filters:f.filters,getDatasValue:f.getDatasValue,noop:f.noop,lightObj:f.lightObj,throwIf:f.throwIf,warn:f.warn,getNewData:f.getNewData,newContextVars:f.newContextVars,styleProps:f.styleProps,exprRet:f.exprRet};return n.useString?(n.assignStringProp=f.assignStringProp,n.escape=f.escape):(n.compPort=f.componentPort,n.compLib=f.componentLibObj,n.compClass=f.componentClasses),m.each(e,function(e,t){0===t.indexOf("main")?(n[t]=u(n,e),n["_"+t]=e):0===t.indexOf("fn")&&(n[t]=e)},!1,!1),n}var f=t(1),m=t(3);e.exports={getNewData:i,newContextVars:s,getDatasValue:a,fixPropName:o,styleProps:r,assignStringProp:p,exprRet:l,tmplWrap:u,template:c}},function(e,n){"use strict";function t(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return r[e]}):e}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=t},function(e,n,t){"use strict";function r(e,n){var t={},r=n.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),t.type="nj_plaintext",t.content=[o.compiledParam(e)],void n[r].push(t);var i=e[0];if(s.isString(i)){var u,c,f,m,v,i=i,g=e.length,h=e[g-1],d=!1,x=!1;if(u=p.isControl(i)){var _=u[0].toLowerCase();c=u[1],m=p.isTmpl(_),v=p.isParamsExpr(_),t.type="nj_expr",t.expr=_,null==c||m||(t.refer=o.compiledParam(c)),p.isControlCloseTag(h,_)&&(x=!0),d=!0}else{var y=p.getXmlOpenTag(i);y&&(f=y[1],p.isXmlSelfCloseTag(i)?t.selfCloseTag=!0:x=p.isXmlCloseTag(h,f),d=!0)}if(d){var b=-1,j=!0;if(u)if(m){j=!1;var S=p.getInsideBraceParam(c);p.addTmpl(t,n,S?s.clearQuot(S[1]):null)}else v?j=!1:b=e.indexOf(l.exprRule+"else");else{t.type=f;var O=p.getInsideBraceParam(f);O&&(t.typeRefer=o.compiledParam(O[0]));var C=p.getOpenTagParams(i);C&&(t.params||(t.params=s.lightObj()),s.each(C,function(e){t.params[e.key]=o.compiledParam(e.value)},!1,!0)),t.selfCloseTag||(t.selfCloseTag=p.verifySelfCloseTag(f))}j&&n[r].push(t);var P=g-(x?1:0),w=e.slice(1,0>b?P:b);if(w&&w.length&&a(w,t),b>=0){var E=e.slice(b+1,P);t.hasElse=!0,E&&E.length&&a(E,t)}v&&p.addParamsExpr(t,n)}else a(e,n)}else s.isArray(i)&&a(e,n)}function a(e,n){n.content||(n.content=[]),n.hasElse&&!n.contentElse&&(n.contentElse=[]),s.each(e,function(e){r(e,n)},!1,!0)}var i=t(1),s=t(3),o=t(6),p=t(5),l=i.tmplRule;e.exports={checkElem:r}},function(e,n,t){"use strict";function r(e,n,t,r,s){a.componentLib=e,a.componentLibObj=n,t=t||n,a.componentLibDom=t,"react"===e&&(r="createElement",s="render"),a.componentPort=i.isString(r)?n[r]:r,a.componentRender=i.isString(s)?t[s]:s}var a=t(1),i=t(3);e.exports={setComponentEngine:r}},function(e,n,t){"use strict";function r(e,n){var t=e;return i.isObject(e)||(t={},t[e]=n),i.each(t,function(e,n){a.componentClasses[n.toLowerCase()]=e},!1,!1),n}var a=t(1),i=t(3);e.exports={registerComponent:r}},function(e,n,t){"use strict";function r(e){var n={data:!0,parent:!0,index:!0,useString:!0};return e&&(n=i.assign(n,e)),n}function a(e,n,t){var a=e;i.isObject(e)||(a={},a[e]={filter:n,options:t}),i.each(a,function(e,n){var t=n.toLowerCase();if(e){var a=e.filter,i=e.options;a||i?(a&&(s[t]=a),i&&(p[t]=r(i))):s[t]=e}},!1,!1)}var i=t(3),s={prop:function(e,n){var t=e;return t&&i.each(n.split("."),function(e){t=t[e]},!1,!0),t},count:function(e){return e?e.length:0},item:function(e,n){return e?e[n]:null},equal:function(e,n){return e==n},lt:function(e,n,t){var r;return e=parseFloat(e),n=parseFloat(n),r=t?n>e:n>=e},gt:function(e,n,t){var r;return e=parseFloat(e),n=parseFloat(n),r=t?e>n:e>=n},add:function(e,n,t){return e+(t?parseFloat(n):parseInt(n,10))},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},o={data:!1,parent:!1,index:!1},p={prop:r(o),count:r(o),item:r(o),equal:r(o),lt:r(o),gt:r(o),add:r(o),int:r(o),float:r(o),bool:r(o)};e.exports={filters:s,filterConfig:p,registerFilter:a}},function(e,n,t){"use strict";function r(e){var n={data:!0,parent:!0,index:!0,useString:!0,paramsExpr:!1,result:!0,inverse:!0,newContext:!1};return e&&(n=i.assign(n,e)),n}function a(e,n,t){var a=e;i.isObject(e)||(a={},a[e]={expr:n,options:t}),i.each(a,function(e,n){var t=n.toLowerCase();if(e){var a=e.expr,i=e.options;a||i?(a&&(s[t]=a),i&&(p[t]=r(i))):s[t]=e}},!1,!1)}var i=t(3),s={if:function(e,n){"false"===e&&(e=!1);var t,r;return t=n?!e:!!e,r=t?this.result():this.inverse(),this.useString&&null==r?"":r},unless:function(e){return s.if.call(this,e,!0)},each:function(e){var n,t=this,r=t.useString;return e?(n=r?"":[],i.each(e,function(e,a){var i=t.result({item:e,index:a,fallback:!0});r?n+=i:n.push(i)},!1,i.isArrayLike(e)),r||n.length||(n=null)):(n=t.inverse(),r&&null==n&&(n="")),n},param:function(){var e,n=this.result(),t="";i.each(arguments,function(e,n){t+=e},!1,!0),null!=n?i.isArray(n)?(e="",i.each(i.flatten(n),function(n){e+=null!=n?n:""},!1,!0)):e=n:e=!this.useString||t,this.paramsExpr[t]=e},spreadparam:function(e){if(e){var n=this;i.each(e,function(e,t){n.paramsExpr[t]=e},!1,!1)}},equal:function(e,n){var t;return t=e==n?this.result():this.inverse()},for:function(e,n){var t,r=this.useString;for(t=r?"":[],null==n&&(n=e,e=0),e=parseInt(e,10),n=parseInt(n,10);n>=e;e++){var a=this.result({index:e});r?t+=a:t.push(a)}return t},blank:function(){return this.result()}},o={data:!1,parent:!1,index:!1},p={if:r(o),unless:r(o),each:r(i.assign({newContext:!0},o)),param:r(i.assign({inverse:!1,paramsExpr:!0},o)),spreadparam:r(i.assign({useString:!1,result:!1,inverse:!1,paramsExpr:!0},o)),equal:r(i.assign({useString:!1},o)),for:r(i.assign({newContext:!0},o,{data:!0})),blank:r(i.assign({useString:!1,inverse:!1},o))};s.prop=s.p=s.param,p.prop=p.p=p.param,s.spread=s.spreadparam,p.spread=p.spreadparam,e.exports={exprs:s,exprConfig:p,registerExpr:a}},function(e,n,t){"use strict";function r(e,n){return RegExp(e,n)}function a(e){for(var n,t="",r=0,a=e.length;a>r;r++)n=e[r],t.indexOf(n)<0&&(t+=n);return t}var i=t(1),s=t(3);e.exports=function(e,n,t,o,p,l){if(s.isObject(e)){var u=e;e=u.start,n=u.end,t=u.expr,o=u.external,p=u.prop,l=u.template}e||(e="{"),n||(n="}"),t||(t="#"),o||(o="$"),p||(p="@"),l||(l="template");var c=a(e+n),f=e[0],m=c.substr(1),v="#$@",g=a(t+v),h=t.replace(/\$/g,"\\$"),d=o.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:n,exprRule:t,externalRule:o,propRule:p,xmlOpenTag:r("^<([a-z"+f+g+"][-a-z0-9_|./"+m+"]*)[^>]*>$","i"),insideBraceParam:r(e+"([^"+c+"]+)"+n,"i"),exprBraceParam:r("([\\s]+("+e+"){1,2}[^"+c+"]+("+n+"){1,2})+","i"),replaceBraceParam:function(){return r("[\\s]+("+e+"){1,2}([^"+c+"]+)("+n+"){1,2}","g")},replaceSplit:r("(?:"+e+"){1,2}[^"+c+"]+(?:"+n+"){1,2}"),replaceParam:function(){return r("(("+e+"){1,2})([^"+c+"]+)("+n+"){1,2}","g")},checkElem:function(){return r("([^>]*)(<([a-z"+f+"/"+g+"!][-a-z0-9_|."+c+g+"]*)[^>]*>)([^<]*)","ig")},externalSplit:r(d+"\\{[^{}]*(?:\\{[^"+o+"]*\\})*[^{}]*\\}"),external:function(){return r(d+"\\{([^{}]*(\\{[^"+o+"]*\\})*[^{}]*)\\}","g")},expr:r("^"+h+"([^\\s]+)","i"),include:function(){return r("<"+h+"include([^>]*)>","ig")},template:l})}},function(e,n,t){"use strict";function r(e,n){return i.isObject(e)&&(n=e.template,e=e.name),function(t){null!=e&&s(e,t),n&&(t.prototype.template=a.compileComponent(n,e))}}var a=t(1),i=t(3),s=t(11).registerComponent;e.exports=r},function(e,n,t){"use strict";function r(e,n,t,r){if(e){if(u.isObject(n)){var i=n;n=i.tmplName,t=i.isComponent,r=i.fileName}var s;if(n&&(s=l.templates[n]),!s){var o,p=u.isObject(e);if(p&&e.main)o=e;else{var m;if(n&&(m=l.asts[n]),!m){if(p&&"nj_root"===e.type)m=e;else{if(m=a(),u.isString(e)){var v=l.includeParser;v&&(e=v(e,r)),e=f(e)}u.checkElem(e,m)}n&&(l.asts[n]=m)}o=c(m.content,!t)}s=u.template(o),n&&(l.templates[n]=s)}return s.main}}function a(){var e=u.lightObj();return e.type="nj_root",e.content=[],e}function i(e,n){return r(e,n,!0)}function s(e,n,t){var r=u.getTagComponents(n,t),a=[];return u.each(r,function(n){var t=i(n.innerHTML,n.id),r=n.parentNode;"inferno"===l.componentLib&&u.removeChildNode(r),a.push(l.componentRender(t(e),r))},!1,!0),a}function o(e){l.initTagData=e}function p(e,n){var t=a();return u.isString(e)&&(e=f(e)),u.checkElem(e,t),c(t.content,!n)}var l=t(1),u=t(2),c=t(17),f=t(19);e.exports={compile:r,compileComponent:i,renderTagComponent:s,setInitTagData:o,precompile:p}},function(e,n,t){"use strict";function r(e,n,t,r,i){var s="",o=n.useString,p=f.isString(t),u=p||0===t,c=1===e.length?"1":"2",m={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_this:0,_value:0,_filter:0,_thisF:0,newContext:r};return o?m._children=0:m._compParam=0,u?(s+=a(),s+="if(!parent) {\n",s+="  if (data) parent = { data: multiData ? data[0] : data };\n",s+="  else parent = {};\n",s+="  p2.parent = parent;\n",s+="};\n"):r?(s+="var _newVars = p1.newContextVars(p1, p2, p3, p4),\n",s+="  parent = _newVars._1,\n",s+="  data = _newVars._2,\n",s+="  multiData = _newVars._3,\n",s+="  _p2 = _newVars._4,\n",s+="  _p3 = _newVars._5;\n"):s+=a(),"2"===c&&(s+=o?"var ret = '';\n":"var ret = [];\n"),s+=l(e,n,m,c,i),"2"===c&&(s+="return ret;"),n[u?"main"+(p?t:""):"fn"+t]=Function("p1","p2","p3","p4","p5",s),t}function a(){return"var parent = p2.parent,\n  data = p2.data,\n  multiData = p3.multiData;\n"}function i(e,n,t,r){var a,i=t.useString,o=!r&&e.escape;if(e.prop.isStr)a="'"+e.prop.name+"'";else{var p=e.prop.name,l=e.prop.parentNum,u="",c=!1;if("#"===p?(u="parent.index",c=!0):"."===p&&(u="parent.data",c=!0),l){u||(u="parent.data");for(var m=0;l>m;m++)u="parent."+u;c||(u+="['"+p+"']",c=!0)}a=c?u:"(!multiData ? data['"+p+"'] : p1.getDatasValue(data, '"+p+"'))"}var g=e.prop.filters;if(g){var h="_value"+n._value++,d="var "+h+" = "+a+";\n";return f.each(g,function(e){var t=n._filter++,r=n._thisF++,a=v[e.name],i=!a;d+="\nvar _filter"+t+" = p1.filters['"+e.name+"'];\n",d+="if (!_filter"+t+") {\n",d+="  p1.warn('"+e.name+"', 'filter');\n",d+="}\n",d+="else {\n",d+="  var _thisF"+r+" = p1.lightObj();\n",(i||a.useString)&&(d+="  _thisF"+r+".useString = p1.useString;\n"),(i||a.data)&&(d+="  _thisF"+r+".data = parent.data;\n"),(i||a.parent)&&(d+="  _thisF"+r+".parent = parent.parent;\n"),(i||a.index)&&(d+="  _thisF"+r+".index = parent.index;\n"),d+="\n  "+h+" = _filter"+t+".apply(_thisF"+r+", ["+h+(e.params?e.params.reduce(function(e,n){return e+", '"+n+"'"},""):"")+"]);\n",d+="}\n"},!1,!0),{valueStr:s(h,i,o),filterStr:d}}return s(a,i,o)}function s(e,n,t){return n&&t?"p1.escape("+e+")":e}function o(e,n,t){var a=e.strs[0],s="",o="";return f.isString(a)?(s=e.isAll||""===a?"":"'"+a+"'",o="",f.each(e.props,function(r,p){var l,u=i(r,n,t);if(f.isString(u)?l=u:(l=u.valueStr,o+=u.filterStr),e.isAll)e.isTmplPlace&&(l+=".call({ _njParent: parent }, data)");else{var c=e.strs[p+1];l=(""===a&&0==p?"":" + ")+"("+l+")"+(""!==c?" + '"+c+"'":"")}if(s+=l,e.isAll)return!1},!1,!0)):f.isObject(a)&&null!=a.length?(s+="{\n",f.each(a,function(e,n,a,i){s+="length"!==n?'  "'+n+'": p1.main'+r(e.content,t,"T"+ ++t._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=f.isObject(a)&&a._njEx?a._njEx:JSON.stringify(a._njShim?a._njShim:a),""===o?s:{valueStr:s,filterStr:o}}function p(e,n,t,a,s){var p="",c=n.useString;if("nj_plaintext"===e.type){var v,h=o(e.content[0],t,n);f.isObject(h)&&(v=h.filterStr,h=h.valueStr);var d=u(1,a,{text:h},n,s);v&&(d=v+d),p+=c?d:g(d)}else if("nj_expr"===e.type){var x=t._expr++,_=t._dataRefer++,y="";if(p+="\nvar _expr"+x+" = p1.exprs['"+e.expr+"'];\n",e.refer){y+="var _dataRefer"+_+" = [\n";var b=e.refer.props,j=b.length,v="";f.each(b,function(e,r){var a=i(e,t,n,!0);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),y+="  "+a+(j-1>r?",":"")},!1,!0),y+="\n];\n",""!==v&&(y=v+y),p+=y}p+="p1.throwIf(_expr"+x+", '"+e.expr+"', 'expr');\n";var S=t._this++,O=m[e.expr],C=!O,P=!!O&&O.newContext,w=t.newContext;p+="\nvar _this"+S+" = p1.lightObj();\n",(C||O.useString)&&(p+="_this"+S+".useString = p1.useString;\n"),(C||O.data)&&(p+="_this"+S+".data = parent.data;\n"),(C||O.parent)&&(p+="_this"+S+".parent = parent.parent;\n"),(C||O.index)&&(p+="_this"+S+".index = parent.index;\n");var E="p5";a&&a._paramsE&&(E=a._paramsE),(C||O.paramsExpr)&&(p+="_this"+S+".paramsExpr = "+E+";\n"),(C||O.result)&&(p+="_this"+S+".result = "+(e.content?"p1.exprRet(p1, "+(w?"_":"")+"p2, "+(w?"_":"")+"p3, p1.fn"+r(e.content,n,++n._no,P,s)+", "+E+")":"p1.noop")+";\n"),(C||O.inverse)&&(p+="_this"+S+".inverse = "+(e.contentElse?"p1.exprRet(p1, "+(w?"_":"")+"p2, "+(w?"_":"")+"p3, p1.fn"+r(e.contentElse,n,++n._no,P,s)+", "+E+")":"p1.noop")+";\n"),p+=u(2,a,{_expr:x,_dataRefer:""!==y?_:"none",_this:S},n,s)}else{var R,T=t._type++;R=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var k;if(k=c?"'"+R+"'":"p1.compClass['"+R+"'] ? p1.compClass['"+R+"'] : '"+R+"'",e.typeRefer){var D=t._typeRefer++,L=o(e.typeRefer,t,n);f.isObject(L)&&(p+=L.filterStr,L=L.valueStr),p+="\nvar _typeRefer"+D+" = "+L+";\n",p+="var _type"+T+" = _typeRefer"+D+" ? _typeRefer"+D+" : ("+k+");\n"}else p+="\nvar _type"+T+" = "+k+";\n";var N=e.params,A=e.paramsExpr,F="";if(N||A){var I=t._params++;if(F="var _params"+I+" = ",A){var V=t._paramsE++;if(F+=(c?"''":"null")+";\n",F+="var _paramsE"+V+" = {};\n",F+=l(A.content,n,t,{_paramsE:"_paramsE"+V}),c){var $="";f.each(N,function(e,n,t,r){0==t&&($+="{ "),$+=n+": 1",$+=r-1>t?", ":" }"},!1,!1),F+="_params"+I+" += p1.assignStringProp(_paramsE"+V+", "+(""===$?"null":$)+");\n"}else F+="\n_params"+I+" = _paramsE"+V+";\n"}if(N){var q=Object.keys(N),j=q.length,v="";c||A||(F+="{\n"),f.each(q,function(e,r){var a=o(N[e],t,n);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),c||"style"!==e||(a="p1.styleProps("+a+")");var i=e,s="'"+i+"'"===a;c||(i=f.fixPropName(e)),F+=A?c?"_params"+I+" += ' "+i+(s?" '":"=\"' + "+a+" + '\"'")+";\n":"_params"+I+"['"+i+"'] = "+(s?"true":a)+";\n":c?(r>0?"  + ":"")+"' "+i+(s?" '":"=\"' + "+a+" + '\"'")+(r==j-1?";":"")+"\n":"  '"+i+"': "+(s?"true":a)+(j-1>r?",\n":"")},!1,!1),c||A||(F+="\n};\n"),""!==v&&(F=v+F)}p+=F}var B,K;c?(K=t._children++,p+="var _children"+K+" = '';\n"):(B=t._compParam++,p+="var _compParam"+B+" = [_type"+T+", "+(""!==F?"_params"+I:"null")+"];\n"),p+=l(e.content,n,t,c?{_children:"_children"+K}:{_compParam:"_compParam"+B},null!=s?s+1:s),p+=u(3,a,c?{_type:T,_params:""!==F?I:null,_children:K,_selfClose:e.selfCloseTag}:{_compParam:B},n,s)}return p}function l(e,n,t,r,a){var i="";return e?(f.each(e,function(e){i+=p(e,n,t,r,a)},!1,!0),i):i}function u(e,n,t,r,a){var i,s=r.useString;switch(e){case 1:i=c(a,s)+t.text+(s&&null!=a?" + '\\n'":"");break;case 2:i="_expr"+t._expr+".apply(_this"+t._this+("none"!==t._dataRefer?", _dataRefer"+t._dataRefer:"")+")";break;case 3:if(s){var o=c(a,s);i=o+"'<' + _type"+t._type+" + "+(null!=t._params?"_params"+t._params+" + ":""),t._selfClose?i+="' />\\n'":(i+="'>\\n'",i+=" + _children"+t._children+" + ",i+=o+"'</' + _type"+t._type+" + '>\\n'")}else i="p1.compPort.apply(p1.compLib, _compParam"+t._compParam+")"}return"1"===n?"\nreturn "+i+";":"2"===n?s?"\nret += "+i+";\n":"\nret.push("+i+");\n":n._paramsE?"\n"+i+";\n":s?"\n"+n._children+" += "+i+";\n":"\n"+n._compParam+".push("+i+");\n"}function c(e,n){var t="";if(n&&null!=e&&e>0){t+="'";for(var r=0;e>r;r++)t+="  ";t+="' + "}return t}var f=(t(1),t(2)),m=f.exprConfig,v=f.filterConfig,g=t(18);e.exports=function(e,n){var t={useString:n,_no:0,_noT:0};return r(e,t,t._no,null,0),t}},function(e,n){"use strict";function t(e){return e.replace(a,function(e,n){return r[n]})}var r={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(r).join("|")+");","g");e.exports=t},function(e,n,t){"use strict";function r(e){var n,t;if(this&&(n=this.tmplKey),n&&(t=v.strTmpls[n]))return t;var r,s=g.isString(e),p=e,l=arguments,u=0,c=[],f="";if(s){p=e.split(h.externalSplit);var x,_=h.external();for(r=[];x=_.exec(e);)r.push(x[1])}var y=p.length;return g.each(p,function(e,n){var t="";if(y-1>n){var a,i,o=e.length-1,p="@"===e[o];if(s){var m=r[n],v=m.match(/#(\d+)/);v&&null!=v[1]?a=l[parseInt(v[1],10)+1]:(a=m,p=i=!0)}else a=l[n+1];!g.isString(a)||p?(t="_nj-split"+u+"_",p&&(i?a=d({_njEx:a}):(e=e.substr(0,o),a=d(a))),c.push(a),u++):t=a}f+=e+t},!1,!0),f=i(f),null==n&&(n=g.uniqueKey(f+o(c)),t=v.strTmpls[n])?t:(t=a(f,c),m(t,n),v.strTmpls[n]=t,t)}function a(e,n){for(var t,r=[],a={elem:r,elemName:"root",parent:null},i=null,o=h.checkElem();t=o.exec(e);){var p=t[1],u=t[2],m=t[3],v=t[4];p&&"\n"!==p&&(p=s(p),f(p,a.elem,n)),u&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===u[u.length-2]?c(u,m,a.elem,n):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),l(u,m,a.elem,n))),v&&"\n"!==v&&(v=s(v),f(v,a.elem,n))}return r}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function o(e){var n="";return g.each(e,function(e){n+=g.isArray(e)?"|"+p(e,!0):"|"+JSON.stringify(e)},!1,!0),n}function p(e,n){var t;if(n||g.isArray(e))if(null!=e.njKey)t="+"+e.njKey;else{t="";for(var r=0,a=e.length;a>r;r++)t+=p(e[r])}else t="+"+e;return t}function l(e,n,t,r,a){var i,s;if(n[0]===h.exprRule)i=e.substring(1,e.length-1);else if(0===n.indexOf(h.propRule))i=h.exprRule+"prop {'"+n.substr(h.propRule.length)+"'}";else{var o=u(e,r);i=o.elem,s=o.params}if(a){var p=[i];s&&p.push(s),t.push(p)}else t.push(i),s&&t.push(s)}function u(e,n){var t,r=h.exprRule,a=h.startRule,i=h.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,o){return t||(t=[r+"params"]),t.push([r+"param "+a+"'"+s+"'"+i,n[o]]),""}),e=e.replace(h.replaceBraceParam(),function(e,n,s){s=s.trim();var o=s.replace(/\.\.\//g,"");return 0===o.indexOf("...")?(t||(t=[r+"params"]),t.push([r+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+o+"="+e.trim()}),{elem:e,params:t}}function c(e,n,t,r){n===h.exprRule+"else"?t.push(e.substr(1,5)):l(e,n,t,r,!0)}function f(e,n,t){for(var r,a=/_nj-split(\d+)_/g,i=[];r=a.exec(e);)i.push(r[1]);i.length?g.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&n.push(e);var r=i.shift();null!=r&&n.push(t[r])},!1,!0):n.push(e)}function m(e,n){e.njKey=n,e.render=function(){return v.compile(this,this.njKey).apply(null,arguments)},e.renderComponent=function(){return v.compileComponent(this,this.njKey).apply(null,arguments)}}var v=t(1),g=t(3),h=(t(5),v.tmplRule),d=t(20);v.strTmpls={},e.exports=r},function(e,n){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,n,t){"use strict";var r=t(19);e.exports=function(e){return function(){return r.apply({tmplKey:e},arguments)}}},function(e,n){"use strict";e.exports=function(e){var n=document;n.addEventListener?n.addEventListener("DOMContentLoaded",e,!1):self.attachEvent("onload",e)}},function(e,n,t){"use strict";var r=t(1),a=t(3);e.exports=function(e){a.assign(r,e)}}])});
//# sourceMappingURL=nornj.min.js.map