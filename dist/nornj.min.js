!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.NornJ=r():e.NornJ=r()}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){"use strict";var t=n(1),a=n(2),i=n(14),s=n(17),l=n(19),u=n(20);t.compileStringTmpl=s,t.tmplByKey=l,t.config=u,a.assign(t,i,a);var p="undefined"!=typeof self?self:this;e.exports=p.NornJ=p.nj=t},function(e,r){"use strict";function n(){return n.compileStringTmpl.apply(null,arguments)}n.createElement=null,n.components={},n.asts={},n.templates={},n.errorTitle="NornJ:",n.tmplRule={},e.exports=n},function(e,r,n){"use strict";var t=n(3),a=n(5),i=n(6),s=n(7),l=n(8),u=n(9),p=n(10),o=n(11),c=n(12),f=n(13);f(),e.exports=t.assign({escape:l,setTmplRule:f},u,p,o,c,t,a,i,s)},function(e,r,n){"use strict";function t(e,r){return j.apply(e,r),e}function a(e){return b.call(e)}function i(e){return Array.isArray(e)}function s(e){var r=typeof e;return!i(e)&&("function"===r||"object"===r&&!!e)}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){return function(r){return null==r?void 0:r[e]}}function p(e){var r=O(e);return"number"==typeof r&&r>=0}function o(e,r,n,t){if(e)if(null==t&&(t=p(e)),n=n?n:e,t)for(var a=0,i=e.length;i>a;a++){var s=r.call(n,e[a],a);if(s===!1)break}else for(var l=Object.keys(e),i=l.length,a=0;i>a;a++){var u=l[a],s=r.call(n,e[u],u,a,i);if(s===!1)break}}function c(e){var r=[],n=0;if(i(e))for(var t=0,a=O(e);a>t;t++){var s=e[t];s=c(s);var l=0,u=s.length;for(r.length+=u;u>l;)r[n++]=s[l++]}else r[n++]=e;return r}function f(){}function m(e,r,n){if(!e)switch(n){case"expr":throw Error(S+'Expression "'+r+'" is undefined, please check it has been registered.');default:throw Error(S+(r||e))}}function v(e,r){var n=S;switch(r){case"filter":n+='A filter called "'+e+'" is undefined.';default:n+=e}return n}function g(e,r){var n=e.length;if(0==n)return e;null==r&&(r=0);var t,a;for(t=0,n=e.length;n>t;t++)a=e.charCodeAt(t),r=(r<<5)-r+a,r|=0;return r}function h(){return Object.create(null)}function x(e,r){if(null!=e){var n;if(null==r){var t=e[0];"'"===t?n=E:'"'===t&&(n=P)}else n=r?P:E;return n&&(e=e.replace(n,"")),e}}function d(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var _=n(1),y=n(4),j=Array.prototype.push,b=Array.prototype.slice,S=_.errorTitle,O=u("length"),P=/["]+/g,E=/[']+/g,w={isArray:i,isArrayLike:p,isObject:s,isString:l,each:o,flatten:c,throwIf:m,assign:y,uniqueKey:g,lightObj:h,arrayPush:t,arraySlice:a,clearQuot:x,toCamelCase:d,warn:v,noop:f};e.exports=w},function(e,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},n=0;10>n;n++)r["_"+String.fromCharCode(n)]=n;var t=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==t.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=t()?Object.assign:function(e,r){for(var t,s,l=n(e),u=1;arguments.length>u;u++){t=Object(arguments[u]);for(var p in t)a.call(t,p)&&(l[p]=t[p]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(t);for(var o=0;s.length>o;o++)i.call(t,s[o])&&(l[s[o]]=t[s[o]])}}return l}},function(e,r,n){"use strict";function t(e){return d.xmlOpenTag.exec(e)}function a(e){return _.test(e)}function i(e){return y[e.toLowerCase()]}function s(e){for(var r,n,t=d.openTagParams;r=t.exec(e);){var a=r[1];if("/"!==a){n||(n=[]);var i=r[6],s=null!=r[3];i=null!=i?h.clearQuot(i):a,/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)),n.push({key:a,value:i,onlyBrace:s})}}return n}function l(e,r){return h.isString(e)&&e.toLowerCase()==="</"+r+">"}function u(e){return d.insideBraceParam.exec(e)}function p(e){var r,n=d.expr.exec(e);if(n){r=[n[1]];var t=s(e);t&&r.push(t)}return r}function o(e,r){return h.isString(e)&&e==="/"+d.exprRule+r}function c(e){return"tmpl"===e}function f(e,r,n){var t=r.params;t||(t=r.params=h.lightObj());var a=t.tmpls;if(a){var i=a.strs[0],s=i.length;null!=n?i[n]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=n?i[n]=e:(i[0]=e,i.length=1),t.tmpls=x.compiledParam(i)}}function m(e){return"params"===e||"props"===e}function v(e,r){r.paramsExpr?h.arrayPush(r.paramsExpr.content,e.content):r.paramsExpr=e}var g=n(1),h=n(3),x=n(6),d=g.tmplRule,_=/^<[^>]+\/>$/i,y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports={getXmlOpenTag:t,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:l,getInsideBraceParam:u,isExpr:p,isExprCloseTag:o,isTmpl:c,addTmpl:f,isParamsExpr:m,addParamsExpr:v}},function(e,r,n){"use strict";function t(e){var r=p.lightObj();return p.each(e,function(e,n){r[n]=l(e)},!1,!1),r}function a(e,r){var n=p.lightObj();if(!r&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.|\/]+)/g,"|prop($1)")),e.indexOf("|")>=0){var t,a=[];t=e.split("|"),e=t[0].trim(),t=t.slice(1),p.each(t,function(e){var r=i(e.trim()),n=p.lightObj(),t=r[1].toLowerCase();if(t){var s=r[3];if(s){var l=[];p.each(s.split(","),function(e){l[l.length]=p.clearQuot(e).trim()},!1,!0),n.params=l}n.name=t,a.push(n)}},!1,!0),n.filters=a}if(!r&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),n.parentNum=s}return n.name=e,r&&(n.isStr=!0),n}function i(e){return c.exec(e)}function s(e,r){for(var n,t,a=o.replaceParam(),i=0;n=a.exec(e);){t||(t=[]);var s=n[3],l=[n[0],n[1],null,!1,!0];i>0&&(l[4]=!1),s=s.trim(),f.indexOf(s[0])>-1&&(s=p.clearQuot(s),l[3]=!0),l[2]=s,t.push(l),i++}return t}function l(e){var r=p.lightObj(),n=p.isString(e)?e.split(o.replaceSplit):[e],t=null,i=!1;if(n.length>1){var l=s(e,n);t=[],p.each(l,function(r){var n=p.lightObj();i=!!r[4]&&r[0]===e,n.prop=a(r[2],r[3]),n.escape=r[1].split(o.startRule).length<3,t.push(n)},!1,!0)}if(r.props=t,r.strs=n,r.isAll=i,i){var u=t[0].prop;0===u.name.indexOf("!#")&&(u.name=u.name.substr(2),r.isTmplPlace=!0)}return r}var u=n(1),p=n(3),o=u.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:l,compiledParams:t,compiledProp:a}},function(e,r,n){"use strict";function t(e){if(f.isObject(e))return e;for(var r,n,t=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;r=t.exec(e);){var a=r[1],i=r[2];n||(n={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=f.toCamelCase(a),n[a]=i}return n}function a(e,r){for(var n,t,a=0,i=e.length;i>a;a++)if(t=e[a],t&&(n=t[r],null!=n))return n}function i(e,r){var n=[];return"data"in r&&n.push(r.data),"extra"in r&&n.push(r.extra),{data:n.length?f.arrayPush(n,e.data):e.data,parent:r.fallback?e:e.parent,index:"index"in r?r.index:e.index}}function s(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function l(e,r){var n="";for(var t in e)if(!r||!r[t]){var a=e[t];n+=" "+t+(t!==a?'="'+a+'"':" ")}return n}function u(e,r,n,t){return function(a){return n(e,r,a,t)}}function p(e,r){return function(){var n=arguments,t=this;return r(e,{data:f.isArray(n[0])?n[0]:f.arraySlice(n),parent:t&&t._njParent?t._njParent:null,index:t&&t._njIndex?t._njIndex:null})}}function o(e){var r={useString:e.useString,exprs:c.exprs,filters:c.filters,getDataValue:a,noop:f.noop,lightObj:f.lightObj,throwIf:f.throwIf,warn:f.warn,newContext:i,styleProps:t,exprRet:u};return r.useString?(r.assignStringProp=l,r.escape=c.escape):(r.h=c.createElement,r.components=c.components),f.each(e,function(e,n){0===n.indexOf("main")?(r[n]=p(r,e),r["_"+n]=e):0===n.indexOf("fn")&&(r[n]=e)},!1,!1),r}var c=n(1),f=n(3);e.exports={newContext:i,getDataValue:a,fixPropName:s,styleProps:t,assignStringProp:l,exprRet:u,tmplWrap:p,template:o}},function(e,r){"use strict";function n(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return t[e]}):e}var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=n},function(e,r,n){"use strict";function t(e,r){var n={},t=r.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),n.type="nj_plaintext",n.content=[l.compiledParam(e)],void r[t].push(n);var i=e[0];if(s.isString(i)){var o,c,f,m,v,i=i,g=e.length,h=e[g-1],x=!1,d=!1;if(o=u.isExpr(i)){var _=o[0].toLowerCase();c=o[1],m=u.isTmpl(_),v=u.isParamsExpr(_),n.type="nj_expr",n.expr=_,null==c||m||(n.refer=l.compiledParam(c.reduce(function(e,r){return e+(r.onlyBrace?" "+r.key:"")},""))),u.isExprCloseTag(h,_)&&(d=!0),x=!0}else{var y=u.getXmlOpenTag(i);y&&(f=y[1],u.isXmlSelfCloseTag(i)?n.selfCloseTag=!0:d=u.isXmlCloseTag(h,f),x=!0)}if(x){var j=-1,b=!0;if(o)m?(b=!1,u.addTmpl(n,r,c?c[0].value:null)):v?b=!1:j=e.indexOf(p.exprRule+"else");else{n.type=f;var S=u.getInsideBraceParam(f);S&&(n.typeRefer=l.compiledParam(S[0]));var O=u.getOpenTagParams(i);O&&(n.params||(n.params=s.lightObj()),s.each(O,function(e){n.params[e.key]=l.compiledParam(e.value)},!1,!0)),n.selfCloseTag||(n.selfCloseTag=u.verifySelfCloseTag(f))}b&&r[t].push(n);var P=g-(d?1:0),E=e.slice(1,0>j?P:j);if(E&&E.length&&a(E,n),j>=0){var w=e.slice(j+1,P);n.hasElse=!0,w&&w.length&&a(w,n)}v&&u.addParamsExpr(n,r)}else a(e,r)}else s.isArray(i)&&a(e,r)}function a(e,r){r.content||(r.content=[]),r.hasElse&&!r.contentElse&&(r.contentElse=[]),s.each(e,function(e){t(e,r)},!1,!0)}var i=n(1),s=n(3),l=n(6),u=n(5),p=i.tmplRule;e.exports={checkElem:t}},function(e,r,n){"use strict";function t(e,r){var n=e;return i.isObject(e)||(n={},n[e]=r),i.each(n,function(e,r){a.components[r.toLowerCase()]=e},!1,!1),r}var a=n(1),i=n(3);e.exports={registerComponent:t}},function(e,r,n){"use strict";function t(e){var r={useString:!0};return e&&(r=i.assign(r,e)),r}function a(e,r,n){var a=e;i.isObject(e)||(a={},a[e]={filter:r,options:n}),i.each(a,function(e,r){var n=r.toLowerCase();if(e){var a=e.filter,i=e.options;a||i?(a&&(s[n]=a),i&&(l[n]=t(i))):s[n]=e}},!1,!1)}var i=n(3),s={prop:function(e,r){var n=e;return n&&i.each(r.split("."),function(e){n=n[e]},!1,!0),n},count:function(e){return e?e.length:0},item:function(e,r){return e?e[r]:null},equal:function(e,r){return e==r},lt:function(e,r,n){var t;return e=parseFloat(e),r=parseFloat(r),t=n?r>e:r>=e},gt:function(e,r,n){var t;return e=parseFloat(e),r=parseFloat(r),t=n?e>r:e>=r},add:function(e,r,n){return e+(n?parseFloat(r):parseInt(r,10))},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},l={prop:t(),count:t(),item:t(),equal:t(),lt:t(),gt:t(),add:t(),int:t(),float:t(),bool:t()};e.exports={filters:s,filterConfig:l,registerFilter:a}},function(e,r,n){"use strict";function t(e){var r={useString:!0,exprProps:!1,newContext:!0};return e&&(r=i.assign(r,e)),r}function a(e,r,n){var a=e;i.isObject(e)||(a={},a[e]={expr:r,options:n}),i.each(a,function(e,r){var n=r.toLowerCase();if(e){var a=e.expr,i=e.options;a||i?(a&&(s[n]=a),i&&(l[n]=t(i))):s[n]=e}},!1,!1)}var i=n(3),s={if:function(e,r){"false"===e&&(e=!1);var n,t;return n=r.useUnless?!e:!!e,t=n?r.result():r.inverse(),r.useString&&null==t?"":t},unless:function(e,r){return r.useUnless=!0,s.if.call(this,e,r)},each:function(e,r){var n,t=r.useString;return e?(n=t?"":[],i.each(e,function(e,a){var i=r.result({data:e,index:a,fallback:!0});t?n+=i:n.push(i)},!1,i.isArrayLike(e)),t||n.length||(n=null)):(n=r.inverse(),t&&null==n&&(n="")),n},param:function(e,r){var n,t=r.result();null!=t?i.isArray(t)?(n="",i.each(i.flatten(t),function(e){n+=null!=e?e:""},!1,!0)):n=t:n=!r.useString||e,r.exprProps[e]=n},spreadparam:function(e,r){e&&i.each(e,function(e,n){r.exprProps[n]=e},!1,!1)},equal:function(e,r,n){var t;return t=e==r?n.result():n.inverse()},for:function(e,r,n){var t,a=n.useString;for(t=a?"":[],null==r&&(r=e,e=0),e=parseInt(e,10),r=parseInt(r,10);r>=e;e++){var i=n.result({index:e});a?t+=i:t.push(i)}return t},blank:function(e){return e.result()}},l={if:t({newContext:!1}),unless:t({newContext:!1}),each:t(),param:t({newContext:!1,exprProps:!0}),spreadparam:t({newContext:!1,useString:!1,exprProps:!0}),equal:t({newContext:!1,useString:!1}),for:t(),blank:t({newContext:!1,useString:!1})};s.prop=s.p=s.param,l.prop=l.p=l.param,s.spread=s.spreadparam,l.spread=l.spreadparam,e.exports={exprs:s,exprConfig:l,registerExpr:a}},function(e,r,n){"use strict";function t(e,r){return RegExp(e,r)}function a(e){for(var r,n="",t=0,a=e.length;a>t;t++)r=e[t],n.indexOf(r)<0&&(n+=r);return n}var i=n(1),s=n(3);e.exports=function(e,r,n,l,u,p){if(s.isObject(e)){var o=e;e=o.start,r=o.end,n=o.expr,l=o.external,u=o.prop,p=o.template}e||(e="{"),r||(r="}"),n||(n="#"),l||(l="$"),u||(u="@"),p||(p="template");var c=a(e+r),f=e[0],m=c.substr(1),v="#$@",g=a(n+v),h=n.replace(/\$/g,"\\$"),x=l.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:r,exprRule:n,externalRule:l,propRule:u,xmlOpenTag:t("^<([a-z"+f+g+"][-a-z0-9_|./"+m+"]*)[^>]*>$","i"),openTagParams:t("[\\s]+((("+e+"){1,2}[^"+c+"]+("+r+"){1,2})|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),insideBraceParam:t("("+e+"){1,2}([^"+c+"]+)("+r+"){1,2}","i"),replaceBraceParam:function(){return t("[\\s]+("+e+"){1,2}([^"+c+"]+)("+r+"){1,2}","g")},replaceSplit:t("(?:"+e+"){1,2}[^"+c+"]+(?:"+r+"){1,2}"),replaceParam:function(){return t("(("+e+"){1,2})([^"+c+"]+)("+r+"){1,2}","g")},checkElem:function(){return t("([^>]*)(<([a-z"+f+"/"+g+"!][-a-z0-9_|."+c+g+"]*)([^>]*)>)([^<]*)","ig")},externalSplit:t(x+"\\{[^{}]*(?:\\{[^"+l+"]*\\})*[^{}]*\\}"),external:function(){return t(x+"\\{([^{}]*(\\{[^"+l+"]*\\})*[^{}]*)\\}","g")},expr:t("^"+h+"([^\\s]+)","i"),include:function(){return t("<"+h+"include([^>]*)>","ig")},template:p})}},function(e,r,n){"use strict";function t(e,r,n,t){if(e){if(u.isObject(r)){var i=r;r=i.tmplName,n=i.outputH,t=i.fileName}var s;if(r&&(s=l.templates[r]),!s){var c,f=u.isObject(e);if(f&&e.main)c=e;else{var m;if(r&&(m=l.asts[r]),!m){if(f&&"nj_root"===e.type)m=e;else{if(m=a(),u.isString(e)){var v=l.includeParser;v&&(e=v(e,t)),e=o(e)}u.checkElem(e,m)}r&&(l.asts[r]=m)}c=p(m.content,!n)}s=u.template(c),r&&(l.templates[r]=s)}return s.main}}function a(){var e=u.lightObj();return e.type="nj_root",e.content=[],e}function i(e,r){return t(e,r,!0)}function s(e,r){var n=a();return u.isString(e)&&(e=o(e)),u.checkElem(e,n),p(n.content,!r)}var l=n(1),u=n(2),p=n(15),o=n(17);e.exports={compile:t,compileH:i,precompile:s}},function(e,r,n){"use strict";function t(e,r,n,t,a){var i="",s=r.useString,l=f.isString(n),u=l||0===n,o=1===e.length?"1":"2",c={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_value:0,_filter:0,newContext:t};return s?c._children=0:c._compParam=0,!u&&t&&(i+="p2 = p1.newContext(p2, p3);\n"),"2"===o&&(i+=s?"var ret = '';\n":"var ret = [];\n"),i+=p(e,r,c,o,a),"2"===o&&(i+="return ret;"),r[u?"main"+(l?n:""):"fn"+n]=Function("p1","p2","p3","p4",i),n}function a(e,r,n,a,i){var s="",l=!e;if((l||e.useString)&&(s+=", useString: p1.useString"),r){var u=!e||e.newContext;(l||e.exprProps)&&(s+=", exprProps: "+a),s+=", result: "+(r.content?"p1.exprRet(p1, p2, p1.fn"+t(r.content,n,++n._no,u,i)+", "+a+")":"p1.noop"),s+=", inverse: "+(r.contentElse?"p1.exprRet(p1, p2, p1.fn"+t(r.contentElse,n,++n._no,u,i)+", "+a+")":"p1.noop")}return s.length?"{ _njOpts: true"+s+" }":""}function i(e,r,n,t){var i,l=n.useString,u=!t&&e.escape;if(e.prop.isStr)i="'"+e.prop.name+"'";else{var p=e.prop.name,o=e.prop.parentNum,c="",m=!1,g=!1;if("#"===p?(c="index",m=!0):"this"===p&&(c="data[0]",m=!0),o){c||(c="data");for(var h=0;o>h;h++)c="parent."+c;m||(g=!0)}if(m||g){var x="p2."+c;i=m?x:"p1.getDataValue("+x+", '"+p+"')"}else i="p1.getDataValue(p2.data, '"+p+"')"}var d=e.prop.filters;if(d){var _="_value"+r._value++,y="var "+_+" = "+i+";\n";return f.each(d,function(e){var n=r._filter++,t=v[e.name];y+="\nvar _filter"+n+" = p1.filters['"+e.name+"'];\n",y+="if (!_filter"+n+") {\n",y+="  p1.warn('"+e.name+"', 'filter');\n",y+="}\n",y+="else {\n",y+="  "+_+" = _filter"+n+".apply(p2, ["+_+(e.params?e.params.reduce(function(e,r){return e+", '"+r+"'"},""):"")+", "+a(t)+"]);\n",y+="}\n"},!1,!0),{valueStr:s(_,l,u),filterStr:y}}return s(i,l,u)}function s(e,r,n){return r&&n?"p1.escape("+e+")":e}function l(e,r,n){var a=e.strs[0],s="",l="";return f.isString(a)?(s=e.isAll||""===a?"":"'"+a+"'",l="",f.each(e.props,function(t,u){var p,o=i(t,r,n);if(f.isString(o)?p=o:(p=o.valueStr,l+=o.filterStr),e.isAll)e.isTmplPlace&&(p+=".call({ _njParent: p2, _njIndex: p2.index }, p2.data)");else{var c=e.strs[u+1];p=(""===a&&0==u?"":" + ")+"("+p+")"+(""!==c?" + '"+c+"'":"")}if(s+=p,e.isAll)return!1},!1,!0)):f.isObject(a)&&null!=a.length?(s+="{\n",f.each(a,function(e,r,a,i){s+="length"!==r?'  "'+r+'": p1.main'+t(e.content,n,"T"+ ++n._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=f.isObject(a)&&a._njEx?a._njEx:JSON.stringify(a._njShim?a._njShim:a),""===l?s:{valueStr:s,filterStr:l}}function u(e,r,n,t,s){var u="",c=r.useString;if("nj_plaintext"===e.type){var v,h=l(e.content[0],n,r);f.isObject(h)&&(v=h.filterStr,h=h.valueStr);var x=o(1,t,{text:h},r,s);v&&(x=v+x),u+=c?x:g(x)}else if("nj_expr"===e.type){var d=n._expr++,_=n._dataRefer++,y="";u+="\nvar _expr"+d+" = p1.exprs['"+e.expr+"'];\n",y+="var _dataRefer"+_+" = [\n";var v="",j=m[e.expr];if(e.refer){var b=e.refer.props;f.each(b,function(e,t){var a=i(e,n,r,!0);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),y+="  "+a+","},!1,!0)}var S="p4";t&&t._paramsE&&(S=t._paramsE),y+=a(j,e,r,S,s),y+="\n];\n",""!==v&&(y=v+y),u+=y,u+="p1.throwIf(_expr"+d+", '"+e.expr+"', 'expr');\n",u+=o(2,t,{_expr:d,_dataRefer:_},r,s)}else{var O,P=n._type++;O=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var E;if(E=c?"'"+O+"'":"p1.components['"+O+"'] ? p1.components['"+O+"'] : '"+O+"'",e.typeRefer){var w=n._typeRefer++,C=l(e.typeRefer,n,r);f.isObject(C)&&(u+=C.filterStr,C=C.valueStr),u+="\nvar _typeRefer"+w+" = "+C+";\n",u+="var _type"+P+" = _typeRefer"+w+" ? _typeRefer"+w+" : ("+E+");\n"}else u+="\nvar _type"+P+" = "+E+";\n";var R=e.params,T=e.paramsExpr,k="";if(R||T){var A=n._params++;if(k="var _params"+A+" = ",T){var N=n._paramsE++;if(k+=(c?"''":"null")+";\n",k+="var _paramsE"+N+" = {};\n",k+=p(T.content,r,n,{_paramsE:"_paramsE"+N}),c){var I="";f.each(R,function(e,r,n,t){0==n&&(I+="{ "),I+=r+": 1",I+=t-1>n?", ":" }"},!1,!1),k+="_params"+A+" += p1.assignStringProp(_paramsE"+N+", "+(""===I?"null":I)+");\n"}else k+="\n_params"+A+" = _paramsE"+N+";\n"}if(R){var $=Object.keys(R),L=$.length,v="";c||T||(k+="{\n"),f.each($,function(e,t){var a=l(R[e],n,r);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),c||"style"!==e||(a="p1.styleProps("+a+")");var i=e,s="'"+i+"'"===a;c||(i=f.fixPropName(e)),k+=T?c?"_params"+A+" += ' "+i+(s?" '":"=\"' + "+a+" + '\"'")+";\n":"_params"+A+"['"+i+"'] = "+(s?"true":a)+";\n":c?(t>0?"  + ":"")+"' "+i+(s?" '":"=\"' + "+a+" + '\"'")+(t==L-1?";":"")+"\n":"  '"+i+"': "+(s?"true":a)+(L-1>t?",\n":"")},!1,!1),c||T||(k+="\n};\n"),""!==v&&(k=v+k)}u+=k}var K,q;c?(q=n._children++,u+="var _children"+q+" = '';\n"):(K=n._compParam++,u+="var _compParam"+K+" = [_type"+P+", "+(""!==k?"_params"+A:"null")+"];\n"),u+=p(e.content,r,n,c?{_children:"_children"+q}:{_compParam:"_compParam"+K},null!=s?s+1:s),u+=o(3,t,c?{_type:P,_params:""!==k?A:null,_children:q,_selfClose:e.selfCloseTag}:{_compParam:K},r,s)}return u}function p(e,r,n,t,a){var i="";return e?(f.each(e,function(e){i+=u(e,r,n,t,a)},!1,!0),i):i}function o(e,r,n,t,a){var i,s=t.useString;switch(e){case 1:i=c(a,s)+n.text+(s&&null!=a?" + '\\n'":"");break;case 2:i="_expr"+n._expr+".apply(p2, _dataRefer"+n._dataRefer+")";break;case 3:if(s){var l=c(a,s);i=l+"'<' + _type"+n._type+" + "+(null!=n._params?"_params"+n._params+" + ":""),n._selfClose?i+="' />\\n'":(i+="'>\\n'",i+=" + _children"+n._children+" + ",i+=l+"'</' + _type"+n._type+" + '>\\n'")}else i="p1.h.apply(null, _compParam"+n._compParam+")"}return"1"===r?"\nreturn "+i+";":"2"===r?s?"\nret += "+i+";\n":"\nret.push("+i+");\n":r._paramsE?"\n"+i+";\n":s?"\n"+r._children+" += "+i+";\n":"\n"+r._compParam+".push("+i+");\n"}function c(e,r){var n="";if(r&&null!=e&&e>0){n+="'";for(var t=0;e>t;t++)n+="  ";n+="' + "}return n}var f=(n(1),n(2)),m=f.exprConfig,v=f.filterConfig,g=n(16);e.exports=function(e,r){var n={useString:r,_no:0,_noT:0};return t(e,n,n._no,null,0),n}},function(e,r){"use strict";function n(e){return e.replace(a,function(e,r){return t[r]})}var t={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(t).join("|")+");","g");e.exports=n},function(e,r,n){"use strict";function t(e){var r,n;if(this&&(r=this.tmplKey),r&&(n=v.strTmpls[r]))return n;var t,s=g.isString(e),u=e,p=arguments,o=0,c=[],f="";if(s){u=e.split(h.externalSplit);var d,_=h.external();for(t=[];d=_.exec(e);)t.push(d[1])}var y=u.length;return g.each(u,function(e,r){var n="";if(y-1>r){var a,i,l=e.length-1,u="@"===e[l];if(s){var m=t[r],v=m.match(/#(\d+)/);v&&null!=v[1]?a=p[parseInt(v[1],10)+1]:(a=m,u=i=!0)}else a=p[r+1];!g.isString(a)||u?(n="_nj-split"+o+"_",u&&(i?a=x({_njEx:a}):(e=e.substr(0,l),a=x(a))),c.push(a),o++):n=a}f+=e+n},!1,!0),f=i(f),null==r&&(r=g.uniqueKey(f+l(c)),n=v.strTmpls[r])?n:(n=a(f,c),m(n,r),v.strTmpls[r]=n,n)}function a(e,r){for(var n,t=[],a={elem:t,elemName:"root",parent:null},i=null,l=h.checkElem();n=l.exec(e);){var u=n[1],o=n[2],m=n[3],v=n[4],g=n[5];u&&"\n"!==u&&(u=s(u),f(u,a.elem,r)),o&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===o[o.length-2]?c(o,m,v,a.elem,r):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),p(o,m,v,a.elem,r))),g&&"\n"!==g&&(g=s(g),f(g,a.elem,r))}return t}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function l(e){var r="";return g.each(e,function(e){r+=g.isArray(e)?"|"+u(e,!0):"|"+JSON.stringify(e)},!1,!0),r}function u(e,r){var n;if(r||g.isArray(e))if(null!=e.njKey)n="+"+e.njKey;else{n="";for(var t=0,a=e.length;a>t;t++)n+=u(e[t])}else n="+"+e;return n}function p(e,r,n,t,a,i){var s,l;if(r[0]===h.exprRule)s=e.substring(1,e.length-1);else if(0===r.indexOf(h.propRule))s=h.exprRule+"prop {'"+r.substr(h.propRule.length)+"'}"+n;else{var u=o(e,a);s=u.elem,l=u.params}if(i){var p=[s];l&&p.push(l),t.push(p)}else t.push(s),l&&t.push(l)}function o(e,r){var n,t=h.exprRule,a=h.startRule,i=h.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,l){return n||(n=[t+"params"]),n.push([t+"param "+a+"'"+s+"'"+i,r[l]]),""}),e=e.replace(h.replaceBraceParam(),function(e,r,s){s=s.trim();var l=s.replace(/\.\.\//g,"");return 0===l.indexOf("...")?(n||(n=[t+"params"]),n.push([t+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+l+"="+e.trim()}),{elem:e,params:n}}function c(e,r,n,t,a){r===h.exprRule+"else"?t.push(e.substr(1,5)):p(e,r,n,t,a,!0)}function f(e,r,n){for(var t,a=/_nj-split(\d+)_/g,i=[];t=a.exec(e);)i.push(t[1]);i.length?g.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&r.push(e);var t=i.shift();null!=t&&r.push(n[t])},!1,!0):r.push(e)}function m(e,r){e.njKey=r,e.render=function(){return v.compile(this,this.njKey).apply(null,arguments)},e.renderH=function(){return v.compileH(this,this.njKey).apply(null,arguments)}}var v=n(1),g=n(3),h=(n(5),v.tmplRule),x=n(18);v.strTmpls={},e.exports=t},function(e,r){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,r,n){"use strict";var t=n(17);e.exports=function(e){return function(){return t.apply({tmplKey:e},arguments)}}},function(e,r,n){"use strict";var t=n(1),a=n(13);e.exports=function(e){var r=e.delimiters,n=e.includeParser,i=e.createElement;r&&a(r),n&&(t.includeParser=n),i&&(t.createElement=i)}}])});
//# sourceMappingURL=nornj.min.js.map