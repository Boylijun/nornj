!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.NornJ=r():e.NornJ=r()}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){(function(r){"use strict";var t=n(1),a=n(2),i=n(13),s=n(16),o=n(17),p=n(18);t.compileStringTmpl=s,t.config=p,a.assign(t,i,o,a);var u="undefined"!=typeof self?self:r;e.exports=u.NornJ=u.nj=t}).call(r,function(){return this}())},function(e,r){"use strict";function n(){return n["tmplTag"+(n.outputH?"H":"")].apply(null,arguments)}n.createElement=null,n.components={},n.asts={},n.templates={},n.tmplStrs={},n.errorTitle="[NornJ]",n.tmplRule={},n.outputH=!1,e.exports=n},function(e,r,n){"use strict";var t=n(3),a=n(4),i=n(5),s=n(7),o=n(8),p=n(9),u=n(10),l=n(11),c=n(6),f=n(12);f(),e.exports=t.assign({escape:o,setTmplRule:f},p,u,l,c,t,a,i,s)},function(e,r,n){"use strict";function t(e,r){return _.apply(e,r),e}function a(e,r){return y.call(e,r)}function i(e){return Array.isArray(e)}function s(e){var r=void 0===e?"undefined":d(e);return!i(e)&&("function"===r||"object"===r&&!!e)}function o(e){return"[object String]"===Object.prototype.toString.call(e)}function p(e){return function(r){return null==r?void 0:r[e]}}function u(e){var r=b(e);return"number"==typeof r&&r>=0}function l(e,r,n,t){if(e)if(null==t&&(t=u(e)),n=n?n:e,t)for(var a=0,i=e.length;i>a;a++){var s=r.call(n,e[a],a,i);if(s===!1)break}else for(var o=Object.keys(e),i=o.length,a=0;i>a;a++){var p=o[a],s=r.call(n,e[p],p,a,i);if(s===!1)break}}function c(){}function f(e,r,n){if(!e)switch(n){case"expr":throw Error(P+'Expression "'+r+'" is undefined, please check it has been registered.');default:throw Error(P+(r||e))}}function m(e,r){var n=P;switch(r){case"filter":n+='A filter called "'+e+'" is undefined.';break;default:n+=e}console.warn(n)}function v(){return Object.create(null)}function g(e,r){if(null!=e){var n;if(null==r){var t=e[0];"'"===t?n=C:'"'===t&&(n=S)}else n=r?S:C;return n&&(e=e.replace(n,"")),e}}function x(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=n(1),_=Array.prototype.push,y=Array.prototype.slice,j=Object.prototype.hasOwnProperty,P=h.errorTitle,b=p("length"),S=/["]+/g,C=/[']+/g,w=Object.assign||function(e){for(var r=1,n=arguments;n.length>r;r++){var t=n[r];for(var a in t)j.call(t,a)&&(e[a]=t[a])}return e},R={isArray:i,isArrayLike:u,isObject:s,isString:o,each:l,throwIf:f,assign:w,obj:v,arrayPush:t,arraySlice:a,clearQuot:g,toCamelCase:x,warn:m,noop:c};e.exports=R},function(e,r,n){"use strict";function t(e){return _.xmlOpenTag.exec(e)}function a(e){return y.test(e)}function i(e){return j[e.toLowerCase()]}function s(e){for(var r,n,t=_.openTagParams;r=t.exec(e);){var a=r[1];if("/"!==a){n||(n=[]);var i=r[7],s=r[4];i=null!=i?x.clearQuot(i):a,/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)),n.push({key:a,value:i,onlyBrace:s})}}return n}function o(e,r){return x.isString(e)&&e.toLowerCase()==="</"+r+">"}function p(e){return _.insideBraceParam.exec(e)}function u(e){var r,n=_.expr.exec(e);if(n){r=[n[1]];var t=s(e);t&&r.push(t)}return r}function l(e){return"tmpl"===e}function c(e,r,n){var t=r.params;t||(t=r.params=x.obj());var a=t.tmpls;if(a){var i=a.strs[0],s=i.length;null!=n?i[n]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=n?i[n]=e:(i[0]=e,i.length=1),t.tmpls=d.compiledParam(i)}}function f(e){return"params"===e||"props"===e}function m(e,r,n){if(r.paramsExpr)x.arrayPush(r.paramsExpr.content,n?[e]:e.content);else{var t=void 0;t=n?{type:"nj_expr",expr:"props",content:[e]}:e,r.paramsExpr=t}}function v(e){var r=h[e];return{isExprProp:!!r&&r.exprProps,isProp:P.indexOf(e)>-1}}var g=n(1),x=n(3),d=n(5),h=n(6).exprConfig,_=g.tmplRule,y=/^<[^>]+\/>$/i,j={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},P=["prop","spread"];e.exports={getXmlOpenTag:t,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:o,getInsideBraceParam:p,isExpr:u,isTmpl:l,addTmpl:c,isParamsExpr:f,addParamsExpr:m,isExprProp:v}},function(e,r,n){"use strict";function t(e){var r=u.obj();return u.each(e,function(e,n){r[n]=o(e)},!1,!1),r}function a(e){var r=u.obj();if(e.indexOf("|")>=0){var n,t=[];n=e.split("|"),e=n[0].trim(),n=n.slice(1),u.each(n,function(e){var r=i(e.trim()),n=u.obj(),s=r[1];if(s){var o=r[3];if(o){var p=[];u.each(o.split(","),function(e){p[p.length]=a(e.trim())},!1,!0),n.params=p}n.name=s,t.push(n)}},!1,!0),r.filters=t}if(0===e.indexOf("../")){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),r.parentNum=s}e=c.exec(e);var o=e[7];return r.name=o?e[8]:e[1],r.jsProp=e[9],e[8]||(r.isBasicType=!0),o&&(r.isComputed=!0),r}function i(e){return f.exec(e)}function s(e,r){for(var n,t,a=l.replaceParam,i=0;n=a.exec(e);){t||(t=[]);var s=n[3],o=[n[0],n[1],null,!0];i>0&&(o[3]=!1),s=s.trim(),o[2]=s,t.push(o),i++}return t}function o(e){var r=u.obj(),n=u.isString(e)?e.split(l.replaceSplit):[e],t=null,i=!1;if(n.length>1){var o=s(e,n);t=[],u.each(o,function(r){var n=u.obj();i=!!r[3]&&r[0]===e,n.prop=a(r[2]),n.escape=r[1]!==l.firstChar+l.startRule,t.push(n)},!1,!0)}return r.props=t,r.strs=n,r.isAll=i,r}var p=n(1),u=n(3),l=p.tmplRule,c=/(('[^']+')|("[^"]+")|(-?([0-9][0-9]*)(\.\d+)?)|true|false|null|undefined|([#]*)([^.[\]()]+))([^\s()]*)/,f=/([\w$@=+-\\*\/&%?]+)(\(([^()]+)\))*/;e.exports={compiledParam:o,compiledParams:t,compiledProp:a}},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e){var r={useString:!0,exprProps:!1,newContext:!0};return e&&(r=s.assign(r,e)),r}function i(e,r,n){var t=e;s.isObject(e)||(t={},t[e]={expr:r,options:n}),s.each(t,function(e,r){if(e){var n=e.expr,t=e.options;n||t?(n&&(o[r]=n),t&&(p[r]=a(t))):o[r]=e}},!1,!1)}var s=n(3),o={if:function(e,r){"false"===e&&(e=!1);var n,t;if(n=r.useUnless?!e:!!e)t=r.result();else{var a=r.props;a&&!function(){var e=a.else;a.elseifs?!function(){var r=a.elseifs.length;s.each(a.elseifs,function(n,a){return n.value?(t=n.fn(),!1):void(a===r-1&&e&&(t=e()))},!1,!0)}():e&&(t=e())}()}return r.useString&&null==t?"":t},else:function(e){return e.exprProps.else=e.result},elseif:function(e,r){var n=r.exprProps;n.elseifs||(n.elseifs=[]),n.elseifs.push({value:e,fn:r.result})},switch:function(e,r){var n,t=r.props,a=t.elseifs.length;return s.each(t.elseifs,function(r,i){return e===r.value?(n=r.fn(),!1):void(i===a-1&&t.else&&(n=t.else()))},!1,!0),n},unless:function(e,r){return r.useUnless=!0,o.if.call(this,e,r)},each:function(e,r){var n,a=r.useString;if(e)!function(){n=a?"":[];var i=r.props;s.each(e,function(e,s,o){var p={data:e,index:s,fallback:!0};if(i&&i.moreValues){var u;p.extra=(u={},t(u,"@first",0===s),t(u,"@last",s===o-1),t(u,"@length",o),u)}var l=r.result(p);a?n+=l:n.push(l)},!1,s.isArrayLike(e)),a||n.length||(n=null)}();else{var i=r.props;i&&i.else&&(n=i.else()),a&&null==n&&(n="")}return n},prop:function(e,r){var n,t=r.result();n=void 0!==t?t:!r.useString||e,r.exprProps[e]=n},spread:function(e,r){s.each(e,function(e,n){r.exprProps[n]=e},!1,!1)},for:function(e,r,n){r._njOpts&&(n=r,r=e,e=0);var t,a=n.useString;for(t=a?"":[];r>=e;e++){var i=n.result({index:e});a?t+=i:t.push(i)}return t},obj:function(e){return e.props},blank:function(e){return e.result()}},p={if:a({newContext:!1}),else:a({newContext:!1,useString:!1,exprProps:!0}),elseif:a({newContext:!1,useString:!1,exprProps:!0}),switch:a({newContext:!1}),unless:a({newContext:!1}),each:a(),prop:a({newContext:!1,exprProps:!0}),spread:a({newContext:!1,useString:!1,exprProps:!0}),for:a(),obj:a({newContext:!1,useString:!1}),blank:a({newContext:!1,useString:!1})};o.case=o.elseif,p.case=p.elseif,o.default=o.else,p.default=p.else,e.exports={exprs:o,exprConfig:p,registerExpr:i}},function(e,r,n){"use strict";function t(e){if(m.isObject(e))return e;for(var r=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g,n=void 0,t=void 0;n=r.exec(e);){var a=n[1],i=n[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=m.toCamelCase(a),t[a]=i}return t}function a(e,r){var n,t;void 0===r&&(r=this.data);for(var a=0,i=r.length;i>a;a++)if(t=r[a],t&&(n=t[e],void 0!==n))return n}function i(e,r){return null==e?e:e._njTmpl?e.call({_njData:r.data,_njParent:r.parent,_njIndex:r.index}):e(r)}function s(e,r){var n=[];return r&&"data"in r&&n.push(r.data),r&&"extra"in r&&n.push(r.extra),{data:n.length?m.arrayPush(n,e.data):e.data,parent:r&&r.fallback?e:e.parent,index:r&&"index"in r?r.index:e.index,getData:a}}function o(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function p(e,r){var n="";for(var t in e)if(!r||!r[t]){var a=e[t];n+=" "+t+(t!==a?'="'+a+'"':" ")}return n}function u(e,r,n,t){return function(a){return n(e,r,a,t)}}function l(e,r){return function(){var n=this,t=m.arraySlice(arguments);return r(e,{data:n&&n._njData?m.arrayPush(t,n._njData):t,parent:n&&n._njParent?n._njParent:null,index:n&&n._njIndex?n._njIndex:null,getData:a})}}function c(e){var r={useString:e.useString,exprs:f.exprs,filters:f.filters,noop:m.noop,obj:m.obj,throwIf:m.throwIf,warn:m.warn,newContext:s,getComputedData:i,styleProps:t,exprRet:u};return r.useString?(r.assignStringProp=p,r.escape=f.escape):(r.h=f.createElement,r.components=f.components),m.each(e,function(e,n){0===n.indexOf("main")?(r[n]=l(r,e),r[n]._njTmpl=!0,r["_"+n]=e):0===n.indexOf("fn")&&(r[n]=e)},!1,!1),r}var f=n(1),m=n(3);e.exports={newContext:s,getData:a,getComputedData:i,fixPropName:o,styleProps:t,assignStringProp:p,exprRet:u,tmplWrap:l,template:c}},function(e,r){"use strict";function n(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return t[e]}):e}var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=n},function(e,r,n){"use strict";function t(e,r,n){var t={};t.type="nj_plaintext",t.content=[p.compiledParam(e)],r[n].push(t)}function a(e,r,n){var a="content";if(o.isArray(e)){var s={},f=e[0];if(o.isString(f)){var m,v,g,x,d,h,_,y,f=f,j=e.length,P=e[j-1],b=!1,S=!1;if(m=u.isExpr(f)){var C=m[0];if(v=m[1],x=u.isTmpl(C),d=u.isParamsExpr(C),!d){var w=u.isExprProp(C);h=w.isProp,_=w.isExprProp,y=h?!n:_}s.type="nj_expr",s.expr=C,null==v||x||d||(s.args||(s.args=[]),o.each(v,function(e){if("useString"===e.value)return void(s.useString=!0);var r=p.compiledParam(e.value);e.onlyBrace?s.args.push(r):(s.params||(s.params=o.obj()),s.params[e.key]=r)},!1,!0)),b=!0}else{var R=u.getXmlOpenTag(f);R&&(g=R[1],u.isXmlSelfCloseTag(f)?s.selfCloseTag=!0:S=u.isXmlCloseTag(P,g),b=!0)}if(b){var T=!0;if(m)x?(T=!1,u.addTmpl(s,r,v?v[0].value:null)):d?T=!1:y&&(T=!1);else{s.type=g;var E=u.getInsideBraceParam(g);E&&(s.typeRefer=p.compiledParam(E[0]));var O=u.getOpenTagParams(f);O&&(s.params||(s.params=o.obj()),o.each(O,function(e){s.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=p.compiledParam(e.value)},!1,!0)),s.selfCloseTag||(s.selfCloseTag=u.verifySelfCloseTag(g))}T&&r[a].push(s);var k=j-(S?1:0),N=e.slice(1,k);N&&N.length&&i(N,s,d||n&&!h),(d||y)&&u.addParamsExpr(s,r,_)}else i(e,r,n)}else o.isArray(f)&&i(e,r,n)}else if(c.indexOf(r.type.toLowerCase())<0){var A=e.split(l.newlineSplit);A.forEach(function(e,n){e=e.trim(),""!==e&&t(e,r,a)})}else t(e,r,a)}function i(e,r,n){r.content||(r.content=[]),o.each(e,function(e){a(e,r,n)},!1,!0)}var s=n(1),o=n(3),p=n(5),u=n(4),l=s.tmplRule,c=["style","script"];e.exports={checkElem:a}},function(e,r,n){"use strict";function t(e,r){var n=e;return i.isObject(e)||(n={},n[e]=r),i.each(n,function(e,r){a.components[r.toLowerCase()]=e},!1,!1),r}var a=n(1),i=n(3);e.exports={registerComponent:t}},function(e,r,n){"use strict";function t(e){var r={useString:!1};return e&&(r=i.assign(r,e)),r}function a(e,r,n){var a=e;i.isObject(e)||(a={},a[e]={filter:r,options:n}),i.each(a,function(e,r){if(e){var n=e.filter,a=e.options;n||a?(n&&(s[r]=n),a&&(o[r]=t(a))):s[r]=e}},!1,!1)}var i=n(3),s={prop:function(e,r){var n=e;return n&&r.split(".").forEach(function(e){n=n[e]}),n},"==":function(e,r){return e==r},"===":function(e,r){return e===r},lt:function(e,r){return r>e},lte:function(e,r){return r>=e},gt:function(e,r){return e>r},gte:function(e,r){return e>=r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},"?":function(e,r,n){return e?r:n},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},o={prop:t(),"==":t(),"===":t(),lt:t(),lte:t(),gt:t(),gte:t(),"+":t(),"-":t(),int:t(),float:t(),bool:t()};e.exports={filters:s,filterConfig:o,registerFilter:a}},function(e,r,n){"use strict";function t(e,r){return RegExp(e,r)}function a(e){for(var r,n="",t=0,a=e.length;a>t;t++)r=e[t],n.indexOf(r)<0&&(n+=r);return n}var i=n(1),s=n(3);e.exports=function(e,r,n,o,p){if(s.isObject(e)){var u=e;e=u.start,r=u.end,n=u.expr,o=u.prop,p=u.template}e||(e="{{"),r||(r="}}"),n||(n="#"),o||(o="@"),p||(p="template");var l=a(e+r),c=e[0],f=r[r.length-1],m=l.substr(1),v="#$@",g=a(n+v),x=n.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:r,firstChar:c,lastChar:f,exprRule:n,propRule:o,xmlOpenTag:t("^<([a-z"+c+g+"][-a-z0-9_|./"+c+m+"]*)[^>]*>$","i"),openTagParams:t("[\\s]+(((["+c+"]?"+e+")([^"+l+"]+)("+r+"["+f+"]?))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),insideBraceParam:t("(["+c+"]?"+e+")([^"+l+"]+)("+r+"["+f+"]?)","i"),spreadProp:t("[\\s]+(["+c+"]?"+e+")[\\s]*(\\.\\.\\.[^"+l+"]+)("+r+"["+f+"]?)","g"),replaceSplit:t("(?:["+c+"]?"+e+")[^"+l+"]+(?:"+r+"["+f+"]?)"),replaceParam:t("((["+c+"]?"+e+"))([^"+l+"]+)("+r+"["+f+"]?)","g"),checkElem:t("([^>]*)(<([a-z"+c+"/"+g+"!][-a-z0-9_|."+l+g+"]*)([^>]*)>)([^<]*)","ig"),expr:t("^"+x+"([^\\s]+)","i"),include:t("<"+x+"include([^>]*)>","ig"),template:p,newlineSplit:t("\\\\n(?![^"+c+f+"]*"+f+")","g")})}},function(e,r,n){"use strict";function t(e){return function(r,n,t){if(r){if(p.isObject(n)){var i=n;n=i.tmplKey,t=i.fileName}var s;if(n&&(s=o.templates[n]),!s){var c,f=p.isObject(r);if(f&&r.main)c=r;else{var m;if(n&&(m=o.asts[n]),!m){if(f&&"nj_root"===r.type)m=r;else{if(m=a(),p.isString(r)){var v=o.includeParser;v&&(r=v(r,t)),r=l(r)}p.checkElem(r._njTmpl,m)}n&&(o.asts[n]=m)}c=u(m.content,!e)}s=p.template(c),n&&(o.templates[n]=s)}if(r._njParams){var g=function(){return s.main.apply(this,p.arrayPush([r._njParams],arguments))};return g._njTmpl=!0,g}return s.main}}}function a(){var e=p.obj();return e.type="nj_root",e.content=[],e}function i(e,r){var n=a();return p.isString(e)&&(e=l(e)),p.checkElem(e._njTmpl,n),u(n.content,!r)}function s(e){return function(r,n){return(e?f:c)(r,n?{tmplKey:n.tmplKey?n.tmplKey:r._njTmplKey,fileName:n.fileName}:r._njTmplKey).apply(null,p.arraySlice(arguments,1))}}var o=n(1),p=n(2),u=n(14),l=n(16),c=t(),f=t(!0);e.exports={compile:c,compileH:f,precompile:i,render:s(),renderH:s(!0)}},function(e,r,n){"use strict";function t(e,r,n,t,a,i){var s="",o=null!=i?i:r.useString,p=v.isString(n),u=p||0===n,l=1===e.length?"1":"2",f={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_value:0,_filter:0,newContext:t};return o?f._children=0:f._compParam=0,!u&&t&&(s+="p2 = p1.newContext(p2, p3);\n"),"2"===l&&(s+=o?"var ret = '';\n":"var ret = [];\n"),s+=c(e,r,f,l,a,i),"2"===l&&(s+="return ret;"),r[u?"main"+(p?n:""):"fn"+n]=Function("p1","p2","p3","p4",s),n}function a(e,r,n,a,i,s,o){var p="",u=!e;if((u||e.useString)&&(p+=", useString: "+(null==r?"p1.useString":r?"true":"false")),n){var l=!e||e.newContext;(u||e.exprProps)&&(p+=", exprProps: "+i),p+=", result: "+(n.content?"p1.exprRet(p1, p2, p1.fn"+t(n.content,a,++a._no,l,s,r)+", "+i+")":"p1.noop"),null!=o&&(p+=", props: "+o)}return"{ _njOpts: true, ctx: p2"+p+" }"}function i(e,r,n,t){var o=void 0,p=e.escape,u=e.prop,l=u.jsProp,c=u.isComputed;if(e.prop.isBasicType)o=e.prop.name+l;else{var f=e.prop,m=f.name,g=f.parentNum,d="",h=!1,_=!1;if("@index"===m?(d="index",h=!0):"this"===m&&(d="data[0]",h=!0),g){d||(d="data");for(var y=0;g>y;y++)d="parent."+d;h||(_=!0)}if(h||_){var j="p2."+d;o=(h?j:(c?"p1.getComputedData(":"")+"p2.getData('"+m+"', "+j+")"+(c?", p2)":""))+l}else o=(c?"p1.getComputedData(":"")+"p2.getData('"+m+"')"+(c?", p2)":"")+l}var P=e.prop.filters;if(P){var b="_value"+r._value++,S="var "+b+" = "+o+";\n";return v.each(P,function(e){var s=r._filter++,o=x[e.name],u="_filter"+s,l="p1.filters['"+e.name+"']";o?S+="\nvar "+u+" = "+l+";\n":(S+="\nvar "+u+" = p2.getData('"+e.name+"');\n",S+="if(!"+u+") "+u+" = "+l+";\n"),S+="if (!"+u+") {\n",S+="  p1.warn('"+e.name+"', 'filter');\n",S+="}\n",S+="else {\n",S+="  "+b+" = "+u+".apply(p2, ["+b+(e.params?e.params.reduce(function(e,a){return e+", "+i({prop:a,escape:p},r,n,t)},""):"")+", "+a(o,t)+"]);\n",S+="}\n"},!1,!0),{valueStr:s(b,n,!c&&p),filterStr:S}}return s(o,n,!c&&p)}function s(e,r,n){return r.useString?n?"p1.escape("+e+")":e:d(e)}function o(e){return e.replace(/'/g,"\\'")}function p(e,r,n,a){var s=e.strs[0],p="",u="";return v.isString(s)?(p=e.isAll||""===s?"":"'"+o(s)+"'",u="",v.each(e.props,function(t,l){var c,f=i(t,r,n,a);if(v.isString(f)?c=f:(c=f.valueStr,u+=f.filterStr),!e.isAll){var m=e.strs[l+1],g=""===s&&0==l?"":" + ";if("\\n"===m.trim())return void(p+=g+c);c=g+"("+c+")"+(""!==m?" + '"+o(m)+"'":"")}if(p+=c,e.isAll)return!1},!1,!0)):v.isObject(s)&&null!=s.length&&(p+="{\n",v.each(s,function(e,r,a,i){p+="length"!==r?'  "'+r+'": p1.main'+t(e.content,n,"T"+ ++n._noT):"  length: "+e,p+=",\n",a===i-1&&(p+="  _njData: p2.data,\n  _njParent: p2.parent,\n  _njIndex: p2.index\n")},!1,!1),p+="}"),""===u?p:{valueStr:p,filterStr:u}}function u(e,r,n,t){var a,i=e.params,s=e.paramsExpr,o="",u=r.useString;if(i||s){if(a=n._params++,o="var _params"+a+" = ",s){var l=n._paramsE++;if(o+=(t?"''":"null")+";\n",o+="var _paramsE"+l+" = {};\n",o+=c(s.content,r,n,{_paramsE:"_paramsE"+l},null,t),t){var f="";v.each(i,function(e,r,n,t){0==n&&(f+="{ "),f+=r+": 1",f+=t-1>n?", ":" }"},!1,!1),o+="_params"+a+" += p1.assignStringProp(_paramsE"+l+", "+(""===f?"null":f)+");\n"}else o+="\n_params"+a+" = _paramsE"+l+";\n"}if(i){var m=Object.keys(i),g=m.length,x="";t||s||(o+="{\n"),v.each(m,function(e,l){var c=p(i[e],n,r,t);v.isObject(c)&&(x+=c.filterStr,c=c.valueStr),u||"style"!==e||(c="p1.styleProps("+c+")");var f=e,m="'"+f+"'"===c;u||(f=v.fixPropName(e)),o+=s?t?"_params"+a+" += ' "+f+(m?" '":"=\"' + "+c+" + '\"'")+";\n":"_params"+a+"['"+f+"'] = "+(m?"true":c)+";\n":t?(l>0?"  + ":"")+"' "+f+(m?" '":"=\"' + "+c+" + '\"'")+(l==g-1?";":"")+"\n":"  '"+f+"': "+(m?"true":c)+(g-1>l?",\n":"")},!1,!1),t||s||(o+="\n};\n"),""!==x&&(o=x+o)}}return[o,a]}function l(e,r,n,t,i,s){var o="",l=r.useString;if("nj_plaintext"===e.type){var m,x=p(e.content[0],n,r,s);v.isObject(x)&&(m=x.filterStr,x=x.valueStr);var h=f(1,t,{text:x},r,i,s);m&&(h=m+h),o+=l?h:d(h)}else if("nj_expr"===e.type){var _=n._expr++,y=n._dataRefer++,j="",m="",P=g[e.expr],b="_expr"+_,S="p1.exprs['"+e.expr+"']";P?o+="\nvar "+b+" = "+S+";\n":(o+="\nvar "+b+" = p2.getData('"+e.expr+"');\n",o+="if(!"+b+") "+b+" = "+S+";\n"),j+="var _dataRefer"+y+" = [\n",e.args&&v.each(e.args,function(e,t){var a=p(e,n,r,s);v.isObject(a)&&(m+=a.filterStr,a=a.valueStr),j+="  "+a+","},!1,!0);var C="p4";t&&t._paramsE&&(C=t._paramsE);var w=u(e,r,n,!1),R=w[0],T=w[1];j+=a(P,s,e,r,C,i,""!==R?"_params"+T:null),j+="\n];\n",""!==m&&(j=m+j),o+=R+j,o+="p1.throwIf(_expr"+_+", '"+e.expr+"', 'expr');\n",o+=f(2,t,{_expr:_,_dataRefer:y},r,i,s)}else{var E,O=n._type++;E=e.typeRefer?e.typeRefer.props[0].prop.name:e.type;var k;if(k=l?"'"+E+"'":"p1.components['"+E.toLowerCase()+"'] ? p1.components['"+E.toLowerCase()+"'] : '"+E+"'",e.typeRefer){var N=n._typeRefer++,A=p(e.typeRefer,n,r);v.isObject(A)&&(o+=A.filterStr,A=A.valueStr),o+="\nvar _typeRefer"+N+" = "+A+";\n",o+="var _type"+O+" = _typeRefer"+N+" ? _typeRefer"+N+" : ("+k+");\n"}else o+="\nvar _type"+O+" = "+k+";\n";var w=u(e,r,n,l),R=w[0],T=w[1];o+=R;var D,H;l?(H=n._children++,o+="var _children"+H+" = '';\n"):(D=n._compParam++,o+="var _compParam"+D+" = [_type"+O+", "+(""!==R?"_params"+T:"null")+"];\n"),o+=c(e.content,r,n,l?{_children:"_children"+H}:{_compParam:"_compParam"+D},null!=i?i+1:i,s),o+=f(3,t,l?{_type:O,_params:""!==R?T:null,_children:H,_selfClose:e.selfCloseTag}:{_compParam:D},r,i,s)}return o}function c(e,r,n,t,a,i){var s="";return e?(v.each(e,function(e){s+=l(e,r,n,t,a,!!e.useString||i)},!1,!0),s):s}function f(e,r,n,t,a,i){var s,o=t.useString,p=null!=i?i:o;switch(e){case 1:s=m(a,t)+n.text+(o&&null!=a?" + '\\n'":"");break;case 2:s="_expr"+n._expr+".apply(p2, _dataRefer"+n._dataRefer+")";break;case 3:if(o){var u=m(a,t);s=u+"'<' + _type"+n._type+" + "+(null!=n._params?"_params"+n._params+" + ":""),n._selfClose?s+="' />\\n'":(s+="'>\\n'",s+=" + _children"+n._children+" + ",s+=u+"'</' + _type"+n._type+" + '>\\n'")}else s="p1.h.apply(null, _compParam"+n._compParam+")"}return"1"===r?"\nreturn "+s+";":"2"===r?p?"\nret += "+s+";\n":"\nret.push("+s+");\n":r._paramsE?"\n"+s+";\n":o?"\n"+r._children+" += "+s+";\n":"\n"+r._compParam+".push("+s+");\n"}function m(e,r){var n="";if(r.useString&&null!=e&&e>0){n+="'";for(var t=0;e>t;t++)n+="  ";n+="' + "}return n}var v=(n(1),n(2)),g=v.exprConfig,x=v.filterConfig,d=n(15);e.exports=function(e,r){var n={useString:r,_no:0,_noT:0};return t(e,n,n._no,null,0),n}},function(e,r){"use strict";function n(e){return e.replace(a,function(e,r){return t[r]})}var t={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(t).join("|")+");","g");e.exports=n},function(e,r,n){"use strict";function t(e){var r=""+e,n=v[r],t=!!this&&this.outputH;if(!n){var s=f.isString(e),o=s?[e]:e,p=o.length,u=[],l="";f.each(o,function(e,r){var n="";if(p-1>r){var t=e.length-1,a=e[t],i="#"===a,s="@"===a;(i||s)&&(i&&u.push(r),e=e.substr(0,t)),n=(s?m.firstChar:"")+m.startRule+(i?"#":"")+g+r+m.endRule+(s?m.lastChar:"")}l+=e+n},!1,!0),l=i(l),n=a(l),n._njParamCount=p-1,n._njComputedNos=u,v[r]=n}var x,d=arguments,h=n._njParamCount;if(h>0){x={};for(var _=0;h>_;_++)x[g+_]=d[_+1]}var y=function e(){return c["compile"+(t?"H":"")](e,r).apply(this,x?f.arrayPush([x],arguments):arguments)};return y._njTmpl=n,y._njTmplKey=r,y._njParams=x,y}function a(e){for(var r,n=[],t={elem:n,elemName:"root",parent:null},a=null,i=m.checkElem;r=i.exec(e);){var p=r[1],c=r[2],f=r[3],v=r[4],g=r[5];p&&"\n"!==p&&(p=s(p),l(p,t.elem)),c&&("/"===f[0]?f==="/"+t.elemName&&(t=t.parent):"/"===c[c.length-2]?u(c,f,v,t.elem):(a=t,t={elem:[],elemName:f,parent:a},a.elem.push(t.elem),o(c,f,v,t.elem))),g&&"\n"!==g&&(g=s(g),l(g,t.elem))}return n}function i(e){return e.replace(/<#!--[\s\S]*?--#>/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim().replace(/(>|<|>=|<=)\(/g,function(e){return x[e]})}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function o(e,r,n,t,a){var i,o;if(e=s(e),r[0]===m.exprRule)i=e.substring(1,e.length-1);else if(0===r.indexOf(m.propRule))i=m.exprRule+"prop "+m.startRule+"'"+r.substr(m.propRule.length)+"'"+m.endRule+n;else{var u=p(e);i=u.elem,o=u.params}if(a){var l=[i];o&&l.push(o),t.push(l)}else t.push(i),o&&t.push(o)}function p(e){var r,n=m.exprRule,t=m.startRule,a=m.endRule;return e=e.replace(m.spreadProp,function(e,i,s){return s=s.trim(),r||(r=[n+"props"]),r.push([n+"spread "+t+s.replace(/\.\.\./g,"")+a+"/"])," "}),{elem:e,params:r}}function u(e,r,n,t){o(e,r,n,t,!0)}function l(e,r){r.push(e)}var c=n(1),f=n(3),m=(n(4),c.tmplRule),v=c.tmplStrs,g="_nj_split",x={">(":"gt(","<(":"lt(",">=(":"gte(","<=(":"lte("};e.exports=t},function(e,r,n){"use strict";var t=n(16);e.exports={tmplTag:function(){return t.apply({outputH:!1},arguments)},tmplTagH:function(){return t.apply({outputH:!0},arguments)}}},function(e,r,n){"use strict";var t=n(1),a=n(12);e.exports=function(e){var r=e.delimiters,n=e.includeParser,i=e.createElement,s=e.outputH;r&&a(r),n&&(t.includeParser=n),i&&(t.createElement=i),null!=s&&(t.outputH=s)}}])});
//# sourceMappingURL=nornj.min.js.map