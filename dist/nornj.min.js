!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.NornJ=e()}}(function(){return function e(t,n,r){function o(s,i){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!i&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var n,s,i=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(i[l]=n[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(n);for(var u=0;u<s.length;u++)a.call(n,s[u])&&(i[s[u]]=n[s[u]])}}return i}},{}],2:[function(e,t,n){"use strict";var r=e("./core"),o=e("./utils/utils"),a=o.setComponentEngine,s=e("./compiler/compile");r.setComponentEngine=a,r.compile=s.compile,r.compileComponent=s.compileComponent,r.compileTagComponent=s.compileTagComponent,r.renderTagComponent=s.renderTagComponent,r.registerComponent=o.registerComponent,r.registerFilter=o.registerFilter,o.createTagNamespace(),"undefined"!=typeof React&&a("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var i="undefined"!=typeof self?self:this;t.exports=i.NornJ=i.nj=r},{"./compiler/compile":5,"./core":8,"./utils/utils":14}],3:[function(e,t,n){"use strict";function r(e,t){var n={},r=t.hasElse?"contentElse":"content";if(!a.isArray(e))return void(a.isString(e)&&(n.type="nj_plaintext",n.content=[e],t[r].push(n)));var s=e[0];if(a.isString(s)){var i,c,l,s=s,u=e.length,f=e[u-1],p=!1,m=a.getXmlOpenTag(s),g=!1;if(m)c=m[1],a.isXmlSelfCloseTag(s)?n.selfCloseTag=!0:g=a.isXmlCloseTag(f,c),p=!0;else if(i=a.isControl(s)){var v=i[0].toLowerCase(),d=i[1];l=a.isTmpl(v),n.type="nj_"+v,null!=d&&(n.refer=d),a.isControlCloseTag(f,v)&&(g=!0),p=!0}else{var h=a.getOpenTag(s);h&&(c=h[0],a.isSelfCloseTag(s)?(n.selfCloseTag=!0,p=!0):(g=a.isCloseTag(f,c),g&&(p=!0)))}if(p){var y=!1,C=-1,T=!0,b=e[1];if(a.isObject(b)){if(i){var j=a.getInsideBraceParam(b.refer);n.refer=j?j[1]:b.refer}else n.params=b;y=!0}if(i)l?(T=!1,a.addTmpl(n,t)):C=a.inArray(e,"$else");else{n.type=c;var x=a.getInsideBraceParam(c);x&&(n.typeRefer=x[1]);var E=a.getOpenTagParams(s,!m);E&&(n.params||(n.params={}),a.each(E,function(e){n.params[e.key]=e.value}))}T&&t[r].push(n);var O=u-(g?1:0),w=e.slice(y?2:1,0>C?O:C);if(w&&w.length&&o(w,n),C>=0){var N=e.slice(C+1,O);n.hasElse=!0,N&&N.length&&o(N,n)}}else o(e,t)}else a.isArray(s)&&o(e,t)}function o(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),a.each(e,function(e){r(e,t)})}var a=(e("../core"),e("../utils/tools")),s=e("./checkTagElem");t.exports={checkElem:r,checkTagElem:s}},{"../core":8,"../utils/tools":13,"./checkTagElem":4}],4:[function(e,t,n){"use strict";function r(e,t){var n={},r=e.nodeType,s=a.trim(e.nodeValue),i=t.hasElse?"contentElse":"content";if(3===r){if(""===s)return;return n.type="nj_plaintext",n.content=[s],void t[i].push(n)}if(1===r){var c,l=a.getTagComponentName(e),u=a.getTagComponentAttrs(e),f=a.isTagControl(l),p=!0;if(f)if("else"!==l)if(n.type="nj_"+l,c=a.isTmpl(l))p=!1,a.addTmpl(n,t);else{var m=a.getInsideBraceParam(u.refer);n.refer=m?m[1]:u.refer}else p=!1,n=t,n.hasElse=!0;else n.type=l,u&&(n.params=u);p&&t[i].push(n);var g=e.childNodes;g&&g.length&&o(g,n)}}function o(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),a.each(e,function(e){r(e,t)})}var a=(e("../core"),e("../utils/tools"));t.exports=r},{"../core":8,"../utils/tools":13}],5:[function(e,t,n){"use strict";function r(e,t,n,r){if(e){var o;return t&&(o=i.templates[t]),o||(c.isObject(e)&&"nj_root"===e.type?o=e:(o={type:"nj_root",content:[]},r?c.checkTagElem(e,o):c.checkElem(e,o)),t&&(i.templates[t]=o)),function(e){return e||(e={}),n?u.transformToComponent(o.content[0],e):l.transformContentToString(o.content,e)}}}function o(e,t){return r(e,t,!0)}function a(e,t){return r(e,t,!0,!0)}function s(e,t){var n=c.getTagComponents(t),r=[];return c.each(n,function(t){var n=a(t,t.getAttribute(i.tagId));r.push(i.componentLibDom[i.componentRender](n(e),t.parentNode))}),r}var i=e("../core"),c=e("../utils/utils"),l=e("./transformToString"),u=e("./transformToComponent");t.exports={compile:r,compileComponent:o,compileTagComponent:a,renderTagComponent:s}},{"../core":8,"../utils/utils":14,"./transformToComponent":6,"./transformToString":7}],6:[function(e,t,n){"use strict";function r(e,t,n){var r=null,i=e.refer;if("nj_plaintext"===e.type)r=s.replaceParams(e.content[0],t,!0,null,n),s.isObject(r)&&"nj_tmpl"===r.type&&(r=o(r.content,t,n));else if(null!=i){var c=s.getDataValue(t,i,n);switch(e.type){case"nj_if":r=o(c?e.content:e.contentElse,t,n);break;case"nj_each":c&&c.length?(r=[],s.each(c,function(a,i){var c={data:a,parent:n,index:i};r.push(o(e.content,s.getItemParam(a,t),c))})):e.hasElse&&(r=o(e.contentElse,t,n))}}else{var l=a.componentClasses[e.type.toLowerCase()],u=l?l:e.type;if(e.typeRefer){var f=s.getDataValue(t,e.typeRefer,n);f&&(u=f)}r=a.componentLibObj[a.componentPort].apply(a.componentLibObj,[u,s.transformParamsToObj(e.params,t,n)].concat(o(e.content,t,n)))}return r}function o(e,t,n){if(!e)return null;!n&&t&&(n={data:s.isArray(t)?t[0]:t});var o=[];return s.each(e,function(e){o.push(r(e,t,n))}),1===o.length?o[0]:o}var a=e("../core"),s=e("../utils/utils");t.exports={transformToComponent:r,transformContentToComponent:o}},{"../core":8,"../utils/utils":14}],7:[function(e,t,n){"use strict";function r(e,t,n){var r="",s=e.refer;if("nj_plaintext"===e.type)r=a.replaceParams(e.content[0],t,null,null,n);else if(null!=s){var i=a.getDataValue(t,s,n);switch(e.type){case"nj_if":r=o(i?e.content:e.contentElse,t,n);break;case"nj_each":i&&i.length?a.each(i,function(s,i){var c={data:s,parent:n,index:i};r+=o(e.content,a.getItemParam(s,t),c)}):e.hasElse&&(r=o(e.contentElse,t,n))}}else{var c=e.type;if(e.typeRefer){var l=a.escape(a.getDataValue(t,e.typeRefer,n));l&&(c=l)}var u="<"+c+a.transformParams(e.params,t,n);r=e.selfCloseTag?u+"/>":u+">"+o(e.content,t,n)+"</"+c+">"}return r}function o(e,t,n){var o="";return e?(!n&&t&&(n={data:a.isArray(t)?t[0]:t}),a.each(e,function(e){o+=r(e,t,n)}),o):o}var a=e("../utils/utils");t.exports={transformToString:r,transformContentToString:o}},{"../utils/utils":14}],8:[function(e,t,n){"use strict";var r={componentLib:null,componentLibObj:null,componentLibDom:null,componentPort:null,componentRender:null,componentClasses:{},tagNamespace:"nj",tagId:"nj-id",tagStyle:"nj-style",tagClassName:"nj-component",templates:{}};t.exports=r},{}],9:[function(e,t,n){"use strict";function r(e){return null!=e?(""+e).replace(a,function(e){return o[e]}):void 0}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g;t.exports=r},{}],10:[function(e,t,n){"use strict";function r(e,t){var n=e;a.isArray(e)||(n=[{name:e,filter:t}]),a.each(n,function(e){o.filters[e.name.toLowerCase()]=e.filter})}var o=e("../core"),a=e("./tools");o.filters={};var s={registerFilter:r};t.exports=s},{"../core":8,"./tools":13}],11:[function(e,t,n){"use strict";function r(e,t){var n=e;i.isArray(e)||(n=[{name:e,obj:t}]),i.each(n,function(e){s.componentClasses[e.name.toLowerCase()]=e.obj})}function o(e){s.tagNamespace=e,a(),s.tagId=e+"-id",s.tagStyle=e+"-style",s.tagClassName=e+"-component"}function a(){if("undefined"!=typeof document){var e=document;e&&e.namespaces&&e.namespaces.add(s.tagNamespace,"urn:schemas-microsoft-com:vml","#default#VML")}}var s=e("../core"),i=e("./tools");t.exports={registerComponent:r,registerTagNamespace:o,createTagNamespace:a}},{"../core":8,"./tools":13}],12:[function(e,t,n){"use strict";function r(e,t,n,r,a){o.componentLib=e,o.componentLibObj=t,o.componentLibDom=n||t,"react"===e&&(r="createElement",a="render"),o.componentPort=r,o.componentRender=a}var o=e("../core");t.exports=r},{"../core":8}],13:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)}function o(e){var t=typeof e;return!r(e)&&("function"===t||"object"===t&&!!e)}function a(e){return"[object String]"===Object.prototype.toString.call(e)}function s(e){return function(t){return null==t?void 0:t[e]}}function i(e){var t=X(e);return"number"==typeof t&&t>=0}function c(e,t,n){if(e)if(n=n?n:e,i(e))q.call(e,function(e,r,o){var a=t.call(n,e,r,o);return a===!1?a:!0});else{var r=Object.keys(e);q.call(r,function(o,a){var s=r[a],i=t.call(n,e[s],s,e);return i===!1?i:!0})}}function l(e,t){return e.indexOf(t)}function u(e){return e?e.trim():""}function f(e,t){if(!e)throw Error(t||e)}function p(e,t,n){var r="";return c(e,function(e,o){r+=" "+o+"='"+y(e,t,null,null,n)+"'"}),r}function m(e,t,n){var r=e?{}:null;return c(e,function(e,o){y(e,t,r,o,n)}),r}function g(e,t,n,r){var o;if(!r&&"react"===V.componentLib)switch(t){case"class":t="className";break;case"for":t="htmlFor";break;case"style":case V.tagStyle:t="style",o=_(n)}e[t]=null!=o?o:n}function v(e,t,n){if(e){var r=V.filters;c(e,function(e){var o=r[e.toLowerCase()];o&&(t=o.call({data:n},t))})}return t}function d(e,t,n){if(null!=e){var o,a,s,i=r(e);return t.indexOf(":")>=0&&(o=t.split(":"),t=o[0],o=o.slice(1)),n&&t.indexOf("../")>-1?t=t.replace(/\.\.\//g,function(){var e=n.parent;return f(e,"Parent data is undefined, please check the param path declare."),n=e,a=[n.data],""}):a=i?e:[e],"."===t?v(o,i?e[0]:e,a):".."===t?v(o,n.index,a):(c(a,function(e){return e&&(s=e[t],s=v(o,s,a),null!=s)?!1:void 0}),s)}}function h(e,t){var n=e;return r(t)&&(n=[e].concat(t.slice(1))),n}function y(e,t,n,r,a){var s,i=C(e),l=o(n);return i&&c(i,function(o){var s=o[0],i=o[2],c=d(t,i,a),u=s===e;c&&!n&&o[1].length<2&&(c=F(c)),u?(l&&g(n,r,c),e=c):e=e.replace(new RegExp(s,"ig"),c)}),l&&!s&&g(n,r,e),e}function C(e){for(var t,n,r=/({{1,2})([^"'\s{}]+)}{1,2}/g;t=r.exec(e);)n||(n=[]),n.push(t);return n}function T(e){return/^<([a-z{][-a-z0-9_:.}]*)[^>]*>$/i.exec(e)}function b(e){return/^<[^>]+\/>$/i.test(e)}function j(e,t){for(var n,r,o=/([^\s=]+)=((['"][^"']+['"])|(['"]?[^"'\s]+['"]?))/g;n=o.exec(e);){r||(r=[]);var a=n[1],s=n[2].replace(/['"]+/g,""),i=s.length;t||(s.lastIndexOf("/>")===i-2?s=s.replace(/\/>/,""):s.lastIndexOf(">")===i-1&&(s=s.replace(/>/,""))),r.push({key:a,value:s})}return r}function x(e,t){return a(e)&&e.toLowerCase()==="</"+t+">"}function E(e){return/^[a-z{][-a-z0-9_:.}]*/i.exec(e)}function O(e){return/\/$/i.test(e)}function w(e,t){return a(e)&&e.toLowerCase()==="/"+t.toLowerCase()}function N(e){return/{([^"'\s{}]+)}/i.exec(e)}function k(e){var t,n=/^\$(if|each|tmpl)/i.exec(e);if(n){t=[n[1]];var r=N(e);r&&t.push(r[1])}return t}function L(e,t){return a(e)&&e==="/$"+t}function P(e){return"tmpl"===e}function S(e,t){var n=t.params;n||(n=t.params={});var r=n.tmpls;n.tmpls||(r=n.tmpls=[]),r.push(e)}function A(e){var t=V.tagNamespace,n=e.tagName.toLowerCase();return 0===n.indexOf(t+":")&&(n=n.split(":")[1]),n}function _(e){for(var t,n,r=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;t=r.exec(e);){var o=t[1].toLowerCase(),a=t[2];n||(n={}),o.indexOf("-")>-1&&(o=o.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),n[o]=a}return n}function I(e){var t,n=e.attributes;return c(n,function(n){var r=n.nodeName;if(r!==V.tagId&&n.specified){var o=n.nodeValue;t||(t={}),"style"===r?o=e.style.cssText:0===r.indexOf("on")&&(r=r.replace(/on\w/,function(e){return"on"+e.substr(2).toUpperCase()})),g(t,r,o,!0)}}),t}function R(e){return/^(if|each|else|tmpl)$/i.test(e)}function D(e){return e||(e=document),e.querySelectorAll("."+V.tagClassName)}var V=e("../core"),F=e("./escape"),$=e("object-assign"),q=Array.prototype.every,X=s("length"),z={isArray:r,isArrayLike:i,isObject:o,isString:a,each:c,inArray:l,trim:u,throwIf:f,replaceParams:y,transformParams:p,transformParamsToObj:m,getXmlOpenTag:T,isXmlCloseTag:x,getOpenTag:E,isCloseTag:w,getOpenTagParams:j,isXmlSelfCloseTag:b,isSelfCloseTag:O,getInsideBraceParam:N,isControl:k,isControlCloseTag:L,getTagComponentName:A,getTagComponentAttrs:I,isTagControl:R,getTagComponents:D,getDataValue:d,getItemParam:h,isTmpl:P,addTmpl:S,escape:F,assign:$};V.isArray=r,V.isArrayLike=i,V.isObject=o,V.isString=a,V.each=c,V.inArray=l,V.trim=u,V.assign=$,t.exports=z},{"../core":8,"./escape":9,"object-assign":1}],14:[function(e,t,n){"use strict";var r=e("../checkElem/checkElem"),o=e("./tools"),a=e("./registerComponent"),s=e("./filter"),i={checkElem:r.checkElem,checkTagElem:r.checkTagElem,setComponentEngine:e("./setComponentEngine"),registerComponent:a.registerComponent,registerTagNamespace:a.registerTagNamespace,createTagNamespace:a.createTagNamespace,registerFilter:s.registerFilter};o.assign(i,o),t.exports=i},{"../checkElem/checkElem":3,"./filter":10,"./registerComponent":11,"./setComponentEngine":12,"./tools":13}]},{},[2])(2)});