!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NornJ=t():e.NornJ=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),a=n(2),i=a.setComponentEngine,s=n(16),o=n(12),l=n(20),u=n(22);r.setComponentEngine=i,r.setTmplRule=a.setTmplRule,r.registerFilter=a.registerFilter,r.registerExpr=a.registerExpr,r.compileStringTmpl=l,r.docReady=u,a.assign(r,s,o),a.registerTagNamespace(),"undefined"!=typeof React&&i("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var c;"undefined"!=typeof self?(c=self,u(function(){r.componentLib&&r.autoRenderTag&&r.renderTagComponent(r.initTagData)})):c=this,e.exports=c.NornJ=c.nj=r},function(e,t){"use strict";function n(){return n.compileStringTmpl.apply(null,arguments)}n.componentLib=null,n.componentLibObj=null,n.componentLibDom=null,n.componentPort=null,n.componentRender=null,n.componentClasses={},n.namespace="nj",n.tagNamespaces={nj:"nj"},n.tagId="nj-id",n.tagStyle="nj-style",n.tagClassName="nj-component",n.templates={},n.errorTitle="NornJ:",n.tmplRule={},n.autoRenderTag=!0,e.exports=n},function(e,t,n){"use strict";var r=n(3),a=n(5),i=n(8),s=n(6),o=n(7),l=n(9),u=n(11),c=n(12),p=n(13),f=n(14),m=n(15);m(),e.exports=r.assign({escape:o,setTmplRule:m},l,u,c,p,f,r,a,i,s)},function(e,t,n){"use strict";function r(e,t,n,r){return n&&!a(t)?(r&&null==t||(e[e.length]=t),e):(T.apply(e,t),e)}function a(e){return Array.isArray(e)}function i(e){var t=typeof e;return!a(e)&&("function"===t||"object"===t&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return function(t){return null==t?void 0:t[e]}}function l(e){var t=C(e);return"number"==typeof t&&t>=0}function u(e,t,n,r,a){if(e){var i;if(i=a?b:j,null==r&&(r=l(e)),n=n?n:e,r)i.call(e,function(e,r){var i=t.call(n,e,r);if(a)return i!==!1||i});else{var s=Object.keys(e);i.call(s,function(r){var i=t.call(n,e[r],r);if(a)return i!==!1||i})}}}function c(e,t){return e.indexOf(t)}function p(e){return e?e.trim():""}function f(e,t){if(!e)throw Error(t||e)}function m(e,t){var n=e.length;if(0==n)return e;null==t&&(t=0);var r,a;for(r=0,n=e.length;n>r;r++)a=e.charCodeAt(r),t=(t<<5)-t+a,t|=0;return t}function g(){return Object.create(null)}function h(e){var t,n=e[0];return"'"===n?t=/[']+/g:'"'===n&&(t=/["]+/g),t&&(e=e.replace(t,"")),e}function v(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var d=n(1),x=n(4),y=Array.prototype,b=y.every,j=y.forEach,T=y.push,C=o("length"),O={isArray:a,isArrayLike:l,isObject:i,isString:s,each:u,inArray:c,trim:p,throwIf:f,assign:x,uniqueKey:m,lightObj:g,listPush:r,clearQuot:h,toCamelCase:v};x(d,O),e.exports=O},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(e,t){for(var i,s,o=n(e),l=1;arguments.length>l;l++){i=Object(arguments[l]);for(var u in i)r.call(i,u)&&(o[u]=i[u]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(i);for(var c=0;s.length>c;c++)a.call(i,s[c])&&(o[s[c]]=i[s[c]])}}return o}},function(e,t,n){"use strict";function r(e){return S.xmlOpenTag.exec(e)}function a(e){return R.test(e)}function i(e){return A[e.toLowerCase()]}function s(e,t){for(var n,r,a=/[\s]+([^\s={}>]+)(=(('[^']+')|("[^"]+")|([^"'\s]+)))?/g;n=a.exec(e);){var i=n[1];if("/"!==i&&"/>"!==i){r||(r=[]);var s,o=n[3];o=null!=o?O.clearQuot(o):i,s=o.length,t||(o.lastIndexOf("/>")===s-2?o=o.replace(/\/>/,""):o.lastIndexOf(">")===s-1&&(o=o.replace(/>/,""))),r.push({key:i,value:o})}}return r}function o(e,t){return O.isString(e)&&e.toLowerCase()==="</"+t+">"}function l(e){return S.openTag.exec(e)}function u(e){return N.test(e)}function c(e,t){return O.isString(e)&&e.toLowerCase()==="/"+t.toLowerCase()}function p(e){return S.insideBraceParam.exec(e)}function f(e){var t,n=S.expr.exec(e);if(n){t=[n[1]];var r=p(e);r&&t.push(r[0])}return t}function m(e,t){return O.isString(e)&&e==="/"+S.exprRule+t}function g(e){return"tmpl"===e}function h(e,t,n){var r=t.params;r||(r=t.params=O.lightObj());var a=r.tmpls;if(a){var i=a.strs[0],s=i.length;null!=n?i[n]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=n?i[n]=e:(i[0]=e,i.length=1),r.tmpls=E.compiledParam(i)}}function v(e){return"params"===e}function d(e,t){t.paramsExpr?O.listPush(t.paramsExpr.content,e.content):t.paramsExpr=e}function x(e){var t=e.tagName.toLowerCase();return O.each(C.tagNamespaces,function(e){return 0===t.indexOf(e+":")?(t=t.split(":")[1],!1):0===t.indexOf(e+"-")?(t=t.split("-")[1],!1):void 0},!1,!1,!0),t}function y(e){var t,n=e.attributes;return O.each(n,function(n){var r=n.nodeName;if(r!==C.tagId&&n.specified){var a=n.nodeValue;t||(t=O.lightObj()),""===a&&(a=r),"style"===r?a=e.style.cssText:0!==r.indexOf("data-")&&0!==r.indexOf(C.namespace+"-")&&(0===r.indexOf("!")&&(r=r.substr(1)),r=O.toCamelCase(r)),P.setObjParam(t,r,a,!0)}}),t}function b(e){return S.expr.test(e)}function j(e){return e||(e="."+C.tagClassName),document.querySelectorAll(e)}function T(e){for(var t=e.childNodes,n=t.length,r=0;n>r;r++)e.removeChild(e.firstChild)}var C=n(1),O=n(3),P=n(6),E=n(8),S=C.tmplRule,R=/^<[^>]+\/>$/i,A={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},N=/\/$/i;e.exports={getXmlOpenTag:r,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:o,getOpenTag:l,isSelfCloseTag:u,isCloseTag:c,getInsideBraceParam:p,isControl:f,isControlCloseTag:m,isTmpl:g,addTmpl:h,isParamsExpr:v,addParamsExpr:d,getTagComponentName:x,getTagComponentAttrs:y,isTagControl:b,getTagComponents:j,removeChildNode:T}},function(e,t,n){"use strict";function r(e,t,n,r){var a="";return r&&m.each(r,function(t,n){e&&null!=e[n]||(a+=" "+n+'="'+t+'"')},!1,!1),m.each(e,function(e,r){a+=" "+r+'="'+c(e,t,!1,!1,n,!0)+'"'},!1,!1),a}function a(e,t,n,r){var a=e||r?{}:null;return r&&m.assign(a,r),m.each(e,function(e,r){c(e,t,a,r,n,!1)},!1,!1),a}function i(e,t,n,r){var a;if(!r&&f.componentLib)switch(t){case"class":t="className";break;case"for":t="htmlFor";break;case"style":case f.tagStyle:t="style",a=s(n)}e[t]=null!=a?a:n}function s(e){if(m.isObject(e))return e;for(var t,n,r=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;t=r.exec(e);){var a=t[1],i=t[2];n||(n={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=m.toCamelCase(a),n[a]=i}return n}function o(e,t,n,r,a,i){if(e){var s=f.filters;m.each(e,function(e){var o=s[e.name];if(!o)return void console.warn(h+"A filter called "+e.name+" is undefined.");var l,u=e.params,c=m.lightObj();l=u?m.listPush([t],u):[t],c.data=n,c.parent=r,c.index=a,c.useString=i,t=o.apply(c,l)},!1,!0)}return t}function l(e,t,n,r,a){var i,s,l,u,c=m.isArray(e),p=t.name,f=t.filters,g=t.parentNum;if(n&&n.parent&&(l=n.parent,u=n.index),n&&g)for(var v=0;g>v;v++){var d=n.parent;m.throwIf(d,h+"Parent data is undefined, please check the param path declare."),n=d,u=n.index,i=[n.data]}else i=c?e:[e];return t.isStr?s=o(f,p,i,l,u,a):"."===p?s=o(f,c?e[0]:e,i,l,u,a):"#"===p?s=o(f,u,i,l,u,a):m.each(i,function(e){if(e&&(s=e[p],null!=s))return s=o(f,s,i,l,u,a),!1},!1,!0,!0),r&&null==s&&(s=""),s}function u(e,t,n){var r=e;return null==n&&(n=m.isArray(t)),n&&(r=m.listPush([e],t.slice(1))),r}function c(e,t,n,r,a,s){var o=e.props,u=e.strs,c=e.isAll,p=m.isObject(n),f=u[0];return o&&m.each(o,function(e,o){var m=l(t,e.prop,a,!n,s);m&&!n&&e.escape&&(m=g(m)),c?(p&&i(n,r,m),f=m):f+=m+u[o+1]},!1,!0),p&&!c&&i(n,r,f),f}function p(e,t,n,r){var a=[];return null!=e&&m.each(e.props,function(e,i){a.push(l(t,e.prop,n,!1,r))},!1,!0),a}var f=n(1),m=n(3),g=n(7),h=f.errorTitle;e.exports={transformParams:r,transformParamsToObj:a,replaceParams:c,getDataValue:l,getItemParam:u,setObjParam:i,getExprParam:p}},function(e,t){"use strict";function n(e){if(null!=e)return(""+e).replace(/[&><"']/g,function(e){return r[e]})}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=n},function(e,t,n){"use strict";function r(e){var t=u.lightObj();return u.each(e,function(e,n){t[n]=o(e)},!1,!1),t}function a(e,t){var n=u.lightObj();if(!t&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.:\/]+)/g,":prop($1)")),e.indexOf(":")>=0){var r,a=[];r=e.split(":"),e=r[0].trim(),r=r.slice(1),u.each(r,function(e){var t=i(e.trim()),n=u.lightObj(),r=t[1].toLowerCase();if(r){var s=t[3];if(s){var o=[];u.each(s.split(","),function(e){o[o.length]=e.trim()},!1,!0),n.params=o}n.name=r,a.push(n)}},!1,!0),n.filters=a}if(!t&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),n.parentNum=s}return n.name=e,t&&(n.isStr=!0),n}function i(e){return p.exec(e)}function s(e,t){for(var n,r,a,i,s=c.replaceParam(),o=/[^\s:]+([\s]?:[\s]?[^\s\(\)]+(\([^\(\)]+\))?(\.[^\s.]+)?){0,}/g,l=0;n=s.exec(e);){a||(a=[]);var p=0;for(i=n[3];r=o.exec(i);){var m=r[0],g=[n[0],n[1],m,!1,!0];m=m.trim(),f.indexOf(m[0])>-1&&(m=u.clearQuot(m),g[3]=!0),g[2]=m,a.push(g),p>0&&(g[4]=!1,t.splice(++l,0,"")),p++}l++}return a}function o(e){var t=u.lightObj(),n=u.isString(e)?e.split(c.replaceSplit):[e],r=null,i=!1;if(n.length>1){var o=s(e,n);r=[],u.each(o,function(t){var n=u.lightObj();i=!!t[4]&&t[0]===e,n.prop=a(t[2],t[3]),n.escape=t[1].split(c.beginRule).length<3,r.push(n)},!1,!0)}return t.props=r,t.strs=n,t.isAll=i,t}var l=n(1),u=n(3),c=l.tmplRule,p=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:o,compiledParams:r,compiledProp:a}},function(e,t,n){"use strict";function r(e,t){var n={},r=t.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),n.type="nj_plaintext",n.content=[o.compiledParam(e)],void t[r].push(n);var i=e[0];if(s.isString(i)){var u,p,f,m,g,i=i,h=e.length,v=e[h-1],d=!1,x=l.getXmlOpenTag(i),y=!1;if(x)f=x[1],l.isXmlSelfCloseTag(i)?n.selfCloseTag=!0:y=l.isXmlCloseTag(v,f),d=!0;else if(u=l.isControl(i)){var b=u[0].toLowerCase();p=u[1],m=l.isTmpl(b),g=l.isParamsExpr(b),n.type="nj_expr",n.expr=b,null==p||m||(n.refer=o.compiledParam(p)),l.isControlCloseTag(v,b)&&(y=!0),d=!0}else{var j=l.getOpenTag(i);j&&(f=j[0],l.isSelfCloseTag(i)?(n.selfCloseTag=!0,d=!0):(y=l.isCloseTag(v,f),y&&(d=!0)))}if(d){var T=-1,C=!0;if(u)if(m){C=!1;var O=l.getInsideBraceParam(p);l.addTmpl(n,t,O?s.clearQuot(O[1]):null)}else g?C=!1:T=s.inArray(e,c.exprRule+"else");else{n.type=f;var P=l.getInsideBraceParam(f);P&&(n.typeRefer=o.compiledParam(P[0]));var E=l.getOpenTagParams(i,!x);E&&(n.params||(n.params=s.lightObj()),s.each(E,function(e){n.params[e.key]=o.compiledParam(e.value)},!1,!0)),n.selfCloseTag||(n.selfCloseTag=l.verifySelfCloseTag(f))}C&&t[r].push(n);var S=h-(y?1:0),R=e.slice(1,0>T?S:T);if(R&&R.length&&a(R,n),T>=0){var A=e.slice(T+1,S);n.hasElse=!0,A&&A.length&&a(A,n)}g&&l.addParamsExpr(n,t)}else a(e,t)}else s.isArray(i)&&a(e,t)}function a(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),s.each(e,function(e){r(e,t)},!1,!0)}var i=n(1),s=n(3),o=n(8),l=n(5),u=n(10),c=i.tmplRule;e.exports={checkElem:r,checkTagElem:u}},function(e,t,n){"use strict";function r(e,t){var n={},r=e.nodeType,i=s.trim(e.nodeValue),c=t.hasElse?"contentElse":"content";if(3===r){if(""===i)return;return n.type="nj_plaintext",n.content=[o.compiledParam(i)],void t[c].push(n)}if(1===r){var p,f=l.getTagComponentName(e),m=l.getTagComponentAttrs(e),g=l.isTagControl(f),h=!0;if(g)if(f!==u.exprRule+"else"){if(f=f.substr(1),n.type="nj_expr",n.expr=f,p=l.isParamsExpr(f),l.isTmpl(f)){h=!1;var v;m&&m.refer&&(v=l.getInsideBraceParam(m.refer)),l.addTmpl(n,t,v?s.clearQuot(v[1]):null)}else if(p)h=!1;else if(m&&m.refer){var v=l.getInsideBraceParam(m.refer);n.refer=o.compiledParam(v?v[0]:m.refer)}}else h=!1,n=t,n.hasElse=!0;else{n.type=f;var d=l.getInsideBraceParam(f);d&&(n.typeRefer=o.compiledParam(d[0])),m&&(n.params=o.compiledParams(m)),n.selfCloseTag=l.verifySelfCloseTag(f)}h&&t[c].push(n);var x=e.childNodes;x&&x.length&&a(x,n),p&&l.addParamsExpr(n,t)}}function a(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),s.each(e,function(e){r(e,t)},!1,!0)}var i=n(1),s=n(3),o=n(8),l=n(5),u=i.tmplRule;i.setInitTagData=function(e){i.initTagData=e},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,s){a.componentLib=e,a.componentLibObj=t,n=n||t,a.componentLibDom=n,"react"===e&&(r="createElement",s="render"),a.componentPort=i.isString(r)?t[r]:r,a.componentRender=i.isString(s)?n[s]:s}var a=n(1),i=n(3);e.exports={setComponentEngine:r}},function(e,t,n){"use strict";function r(e,t){var n=e;return o.isObject(e)||(n={},n[e]=t),o.each(n,function(e,t){s.componentClasses[t.toLowerCase()]=e},!1,!1),t}function a(e){s.namespace=e,s.tagId=e+"-id",s.tagStyle=e+"-style",s.tagClassName=e+"-component"}function i(e){if(e||(e="nj"),s.tagNamespaces[e]=e,"undefined"!=typeof document){var t=document;t&&t.namespaces&&t.namespaces.add(e,"urn:schemas-microsoft-com:vml","#default#VML")}}var s=n(1),o=n(3);e.exports={registerComponent:r,setNamespace:a,registerTagNamespace:i}},function(e,t,n){"use strict";function r(e,t){var n=e;i.isObject(e)||(n={},n[e]=t),i.each(n,function(e,t){a.filters[t.toLowerCase()]=e},!1,!1)}var a=n(1),i=n(3);a.filters={prop:function(e,t){var n=e;return n&&i.each(t.split("."),function(e){n=n[e]},!1,!0),n},count:function(e){return e?e.length:0},item:function(e,t){return e?e[t]:null},equal:function(e,t){return e==t},lt:function(e,t,n){var r;return e=parseFloat(e),t=parseFloat(t),r=n?t>e:t>=e},gt:function(e,t,n){var r;return e=parseFloat(e),t=parseFloat(t),r=n?e>t:e>=t},add:function(e,t,n){return e+(n?parseFloat(t):parseInt(t,10))},"int":function(e){return parseInt(e,10)},"float":function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},e.exports={registerFilter:r}},function(e,t,n){"use strict";function r(e,t){var n=e;i.isObject(e)||(n={},n[e]=t),i.each(n,function(e,t){a.exprs[t.toLowerCase()]=e},!1,!1)}var a=n(1),i=n(3);a.exprs={"if":function(e,t){"false"===e&&(e=!1);var n,r;return n=t?!e:!!e,r=n?this.result():this.inverse(),this.useString&&null==r?"":r},unless:function(e){return a.exprs.if.call(this,e,!0)},each:function(e){var t,n=this,r=n.useString;return e?(t=r?"":[],i.each(e,function(e,a){var s=n.result({loop:!0,item:e,index:a});r?t+=s:i.listPush(t,s,!0)},!1,i.isArray(e)),r||t.length||(t=null)):(t=n.inverse(),r&&null==t&&(t="")),t},param:function(){var e,t=this.result(),n="";i.each(arguments,function(e,t){n+=e},!1,!0),null!=t?t.length>1?(e="",i.each(t,function(t){e+=t},!1,!0)):(e=t[0],e&&e._njShim&&(e=e._njShim)):e=n,this.paramsExpr[n]=e},spreadparam:function(e){if(e){var t=this;i.each(e,function(e,n){t.paramsExpr[n]=e},!1,!1)}},equal:function(e,t){var n;return n=e==t?this.result():this.inverse()},"for":function(e,t){var n,r=this.useString;for(n=r?"":[],null==t&&(t=e,e=0),e=parseInt(e,10),t=parseInt(t,10);t>=e;e++){var a=this.result({loop:!0,item:this.data[0],index:e});r?n+=a:i.listPush(n,a,!0)}return n}},a.exprs.p=a.exprs.param,e.exports={registerExpr:r}},function(e,t,n){"use strict";function r(e,t){return RegExp(e,t)}function a(e){for(var t,n="",r=0,a=e.length;a>r;r++)t=e[r],n.indexOf(t)<0&&(n+=t);return n}var i=n(1),s=n(3);e.exports=function(e,t,n){e||(e="{"),t||(t="}"),n||(n="#");var o=a(e+t),l=e[0],u=o.substr(1),c=a(n),p=n.replace(/\$/g,"\\$");s.assign(i.tmplRule,{beginRule:e,endRule:t,exprRule:n,xmlOpenTag:r("^<([a-z"+l+"][-a-z0-9_:./"+u+"]*)[^>]*>$","i"),openTag:r("^[a-z"+l+"][-a-z0-9_:./"+u+"]*","i"),insideBraceParam:r(e+"([^"+o+"]+)"+t,"i"),replaceBraceParam:function(){return r("[\\s]+("+e+"){1,2}([^"+o+"]+)("+t+"){1,2}","g")},replaceSplit:r("(?:"+e+"){1,2}[^"+o+"]+(?:"+t+"){1,2}"),replaceParam:function(){return r("(("+e+"){1,2})([^"+o+"]+)("+t+"){1,2}","g")},checkElem:function(){return r("([^>]*)(<([a-z"+l+"/"+c+"!][-a-z0-9_:."+o+c+"]*)[^>]*>)([^<]*)","ig")},expr:r("^"+p+"([^\\s]+)","i")})}},function(e,t,n){"use strict";function r(e,t,n,r){if(e){var i;return t&&(i=c.templates[t]),i||(p.isObject(e)&&"nj_root"===e.type?i=e:(i=a(),p.isString(e)&&(e=g(e)),r?p.checkTagElem(e,i):p.checkElem(e,i)),t&&(c.templates[t]=i)),function(){var e,t=arguments,r=t.length;r>0?1===r?e=t[0]:(e=[],p.each(t,function(t){e[e.length]=t},!1,!0)):e={};var a;return n?(a=m.transformToComponent(i.content[0],e),p.isArray(a)&&(a=a[0])):a=f.transformContentToString(i.content,e),a}}}function a(){var e=p.lightObj();return e.type="nj_root",e.content=[],e}function i(e,t){return r(e,t,!0)}function s(e,t){return r(e,t,!0,!0)}function o(e,t){var n=p.getTagComponents(t),r=[];return p.each(n,function(t){var n=s(t,t.getAttribute(c.tagId)),a=t.parentNode;"inferno"===c.componentLib&&p.removeChildNode(a),r.push(c.componentRender(n(e),a))},!1,!0),r}function l(e){var t=a();return p.checkElem(e,t),t}function u(e,t,n){n||(n="div");var r,a={tmpl:e,container:n};return p.isArray(t)?(r=t,r[r.length]=a):r=[t,a],h(r)}var c=n(1),p=n(2),f=n(17),m=n(19),g=n(20),h=i(["<{container}>","{tmpl}"],"tmplExpr");e.exports={compile:r,compileComponent:i,compileTagComponent:s,renderTagComponent:o,precompile:l,renderTmplExpr:u}},function(e,t,n){"use strict";function r(e,t,n,r){var s="";if("nj_plaintext"===e.type)s=i.replaceParams(e.content[0],t,!1,!1,n,!0);else if("nj_expr"===e.type){var c,p=i.getExprParam(e.refer,t,n,!0),f=e.hasElse,m=a.exprs[e.expr];i.throwIf(m,u+'Expression "'+e.expr+'" is undefined, please check it has been registered.');var g=i.lightObj();g.data=t,n&&(g.parent=n.parent,g.index=n.index),g.useString=!0,g.paramsExpr=r,g.result=function(a){if(a&&a.loop){null==c&&(c=i.isArray(t));var s=i.lightObj();return s.data=a.item,s.parent=n,s.index=a.index,o(e.content,i.getItemParam(a.item,t,c),s,r)}return o(e.content,t,n,r)},g.inverse=function(){return f?o(e.contentElse,t,n,r):null},s=m.apply(g,p)}else{var h=e.type;if(e.typeRefer){var v=i.replaceParams(e.typeRefer,t,!1,!1,n,!0);v&&(h=v)}var d,x=e.paramsExpr;x&&(d=i.lightObj(),l(x.content,t,n,d));var y="<"+h+i.transformParams(e.params,t,n,d);s=e.selfCloseTag?y+"/>":y+">"+o(e.content,t,n)+"</"+h+">"}return s}var a=n(1),i=n(2),s=n(18),o=s(r,!0),l=s(r,!1),u=a.errorTitle;e.exports={transformToString:r,transformContentToString:o}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){return function(n,a,i,s){var o=null;return t&&(o=""),n?(i||(i=r.lightObj(),a&&(i.data=r.isArray(a)?a[0]:a)),t||(o=[]),r.each(n,function(n){var l=e(n,a,i,s);t?o+=l:r.listPush(o,l,!0,!0)},!1,!0),o):o}}},function(e,t,n){"use strict";function r(e,t,n,r){var l=null;if("nj_plaintext"===e.type)l=i.replaceParams(e.content[0],t,!0,!1,n,!1),i.isObject(l)&&"tmpl"===l.expr&&(l=s(l.content,t,n));else if("nj_expr"===e.type){var u,c=i.getExprParam(e.refer,t,n,!1),p=e.hasElse,f=a.exprs[e.expr];i.throwIf(f,o+'Expression "'+e.expr+'" is undefined, please check it has been registered.');var m=i.lightObj();m.data=t,n&&(m.parent=n.parent,m.index=n.index),m.useString=!1,m.paramsExpr=r,m.result=function(a){if(a&&a.loop){null==u&&(u=i.isArray(t));var o=i.lightObj();return o.data=a.item,o.parent=n,o.index=a.index,s(e.content,i.getItemParam(a.item,t,u),o,r)}return s(e.content,t,n,r)},m.inverse=function(){return p?s(e.contentElse,t,n,r):null},l=f.apply(m,c)}else{var g=a.componentClasses[e.type.toLowerCase()],h=g?g:e.type;if(e.typeRefer){var v=i.replaceParams(e.typeRefer,t,!0,!1,n,!1);v&&(h=v)}var d,x=e.paramsExpr;x&&(d=i.lightObj(),s(x.content,t,n,d));var y=[h,i.transformParamsToObj(e.params,t,n,d)],b=s(e.content,t,n);b&&i.listPush(y,b),l=a.componentPort.apply(a.componentLibObj,y)}return l}var a=n(1),i=n(2),s=n(18)(r),o=a.errorTitle;e.exports={transformToComponent:r,transformContentToComponent:s}},function(e,t,n){"use strict";function r(e){var t=h.isString(e),n=e,r=arguments,s=0,l=[],u="";t&&(n=e.split(v));var c=n.length;h.each(n,function(e,t){var n="";if(c-1>t){var a=r[t+1],i=e.length-1,o="@"===e[i];!h.isString(a)||o?(n="_nj-split"+s+"_",o&&(e=e.substr(0,i),a=x(a)),l.push(a),s++):n=a}u+=e+n},!1,!0),u=i(u);var p=h.uniqueKey(u+o(l)),f=g.strTmpls[p];return f?f:(f=a(u,l),m(f,p),g.strTmpls[p]=f,f)}function a(e,t){for(var n,r=[],a={elem:r,elemName:"root",parent:null},i=null,o=d.checkElem();n=o.exec(e);){var l=n[1],c=n[2],m=n[3],g=n[4];l&&(/\s/.test(l[l.length-1])&&(l=s(l)),f(l,a.elem,t)),c&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===c[c.length-2]?p(c,m,a.elem,t):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),u(c,m,a.elem,t))),g&&(/\s/.test(g[0])&&(g=s(g)),f(g,a.elem,t))}return r}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"").trim()}function o(e){var t="";return h.each(e,function(e){t+=h.isArray(e)?"|"+l(e,!0):"|"+JSON.stringify(e)},!1,!0),t}function l(e,t){var n;if(t||h.isArray(e))if(null!=e.njKey)n="+"+e.njKey;else{n="";for(var r=0,a=e.length;a>r;r++)n+=l(e[r])}else n="+"+e;return n}function u(e,t,n,r,a){var i,s;if(t[0]===d.exprRule)i=e.substring(1,e.length-1);else{var o=c(e,r);i=o.elem,s=o.params}if(a){var l=[i];s&&l.push(s),n.push(l)}else n.push(i),s&&n.push(s)}function c(e,t){var n,r=d.exprRule,a=d.beginRule,i=d.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,o){return n||(n=[r+"params"]),n.push([r+"param "+a+"'"+s+"'"+i,t[o]]),""}),e=e.replace(d.replaceBraceParam(),function(e,t,s){s=s.trim();var o=s.replace(/\.\.\//g,"");return 0===o.indexOf("...")?(n||(n=[r+"params"]),n.push([r+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+o+"="+e.trim()}),{elem:e,params:n}}function p(e,t,n,r){t===d.exprRule+"else"?n.push(e.substr(1,5)):u(e,t,n,r,!0)}function f(e,t,n){for(var r,a=/_nj-split(\d+)_/g,i=[];r=a.exec(e);)i.push(r[1]);i.length?h.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&t.push(e);var r=i.shift();null!=r&&t.push(n[r])},!1,!0):t.push(e)}function m(e,t){e.njKey=t,e.render=function(){return g.compile(this,this.njKey).apply(null,arguments)},e.renderComp=function(){return g.compileComponent(this,this.njKey).apply(null,arguments)}}var g=n(1),h=n(3),v=(n(5),/\$\{\d+\}/),d=g.tmplRule,x=n(21);g.strTmpls={},e.exports=r},function(e,t){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,t){"use strict";e.exports=function(e){var t=document;t.addEventListener?t.addEventListener("DOMContentLoaded",e,!1):self.attachEvent("onload",e)}}])});
//# sourceMappingURL=nornj.min.js.map