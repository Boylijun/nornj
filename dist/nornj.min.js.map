{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///nornj.min.js","webpack:///webpack/bootstrap 3fd77b8e9aee447679c9","webpack:///./src/base.js","webpack:///./src/core.js","webpack:///./src/utils/utils.js","webpack:///./src/utils/tools.js","webpack:///./src/transforms/transformElement.js","webpack:///./src/transforms/transformParam.js","webpack:///./src/transforms/transformData.js","webpack:///./src/utils/escape.js","webpack:///./src/parser/checkElem.js","webpack:///./src/utils/registerComponent.js","webpack:///./src/helpers/filter.js","webpack:///./src/helpers/expression.js","webpack:///./src/utils/setTmplRule.js","webpack:///./src/compiler/compile.js","webpack:///./src/compiler/buildRuntime.js","webpack:///./src/utils/replaceSpecialSymbol.js","webpack:///./src/parser/checkStringElem.js","webpack:///./src/utils/shim.js","webpack:///./src/utils/tmplTag.js","webpack:///./src/config.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","global","nj","utils","compiler","compileStringTmpl","tmplTag","config","assign","_global","self","NornJ","outputH","apply","arguments","createElement","components","asts","templates","tmplStrs","errorTitle","tmplRule","tools","transformElement","transformParam","transformData","escape","checkElem","registerComponent","filter","expression","setTmplRule","arrayPush","arr1","arr2","nativeArrayPush","arraySlice","arrLike","nativeArraySlice","isArray","obj","Array","isObject","type","_typeof","isString","Object","prototype","toString","_getProperty","key","isArrayLike","length","_getLength","each","func","context","isArr","i","l","ret","keys","k","flatten","output","idx","value","j","len","noop","throwIf","val","msg","Error","warn","console","uniqueKey","str","hash","chr","charCodeAt","lightObj","create","clearQuot","clearDouble","regex","charF","REGEX_QUOT_S","REGEX_QUOT_D","replace","toCamelCase","indexOf","letter","substr","toUpperCase","Symbol","iterator","constructor","push","slice","hasOwnProperty","target","args","source","getXmlOpenTag","xmlOpenTag","exec","isXmlSelfCloseTag","REGEX_XML_SELF_CLOSE_TAG","test","verifySelfCloseTag","tagName","OMITTED_CLOSE_TAGS","toLowerCase","getOpenTagParams","tag","matchArr","pattern","openTagParams","onlyBrace","isXmlCloseTag","getInsideBraceParam","insideBraceParam","isExpr","ret1","expr","params","isExprCloseTag","exprRule","isTmpl","addTmpl","node","parent","name","paramsP","tmpls","objT","strs","tranParam","compiledParam","isParamsExpr","addParamsExpr","paramsExpr","content","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","track","wbr","compiledParams","v","compiledProp","prop","filtersTmp","filters","split","trim","retF","_getFilterParam","filterObj","filterName","paramsF","n","parentNum","isStr","REGEX_FILTER_PARAM","_getReplaceParam","replaceParam","item","_quots","replaceSplit","props","isAll","retP","startRule","isTmplPlace","styleProps","getData","data","newContext","p2","p3","newData","extra","fallback","index","fixPropName","assignStringProp","paramsE","exprRet","p1","fn","p4","tmplWrap","configs","main","initCtx","_njData","_njParent","_njIndex","template","fns","useString","exprs","h","text","match","ESCAPE_LOOKUP","&",">","<","\"","'","parentContent","hasElse","_njShim","first","exprParams","openTagName","last","isElemNode","hasCloseTag","tranElem","exprName","refer","reduce","selfCloseTag","elseIndex","pushContent","typeRefer","tagParams","end","checkContentElem","contentElse","component","_commonConfig","registerFilter","options","filterConfig","count","no","equal","lt","val1","val2","noEqual","parseFloat","gt","add","isFloat","parseInt","int","float","bool","exprProps","registerExpr","exprConfig","if","referR","useUnless","result","inverse","unless","retI","spread","value1","value2","for","start","blank","_createRegExp","reg","mode","RegExp","_clearRepeat","char","endRule","externalRule","propRule","templateRule","external","allRules","firstChar","otherChars","spChars","exprRules","escapeExprRule","escapeExternalRule","spreadProp","externalSplit","include","compile","tmpl","tmplName","fileName","tmplFns","isObj","_createAstRoot","includeParser","_njTmpl","buildRuntime","compileH","precompile","_buildFn","level","fnStr","isTmplExpr","retType","counter","_type","_typeRefer","_params","_paramsE","_compParam","_dataRefer","_expr","_value","_filter","_children","_buildContent","Function","_buildOptions","exprPropsStr","hashStr","noConfig","_no","_buildPropData","noEscape","dataValueStr","special","specialP","dataStr","valueStr","filterStr","o","_filterC","configF","filterVarStr","globalFilterStr","_buildEscape","_buildProps","str0","propData","strI","_noT","_njEx","JSON","stringify","_buildNode","textStr","_buildRender","replaceSpecialSymbol","_exprC","_dataReferC","dataReferStr","configE","exprVarStr","globalExprStr","_typeC","typeStr","_typeReferC","valueStrT","paramsStr","_paramsC","_paramsEC","paramKeys","onlyKey","_compParamC","_childrenC","_selfClose","nodeType","retStr","_buildLevelSpace","levelSpace","ast","REGEX_SYMBOLS","all","SPACIAL_SYMBOLS","nbsp","ensp","emsp","thinsp","zwnj","zwj","amp","join","tmplKey","exArgs","xmls","splitNo","fullXml","xml","arg","isEx","useShim","exArg","shim","_clearNotesAndBlank","_checkStringElem","tmplFn","current","elem","elemName","textBefore","elemParams","textAfter","_formatText","_setText","_setSelfCloseElem","_setElem","elemArr","bySelfClose","substring","retS","_getSplitParams","retC","begin","splitNos","t","shift","tmplTagH","delimiters"],"mappings":"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","file":"nornj.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NornJ\"] = factory();\n\telse\n\t\troot[\"NornJ\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NornJ\"] = factory();\n\telse\n\t\troot[\"NornJ\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    utils = __webpack_require__(2),\n\t    compiler = __webpack_require__(13),\n\t    compileStringTmpl = __webpack_require__(16),\n\t    tmplTag = __webpack_require__(18),\n\t    config = __webpack_require__(19);\n\t\n\tnj.compileStringTmpl = compileStringTmpl;\n\tnj.config = config;\n\tutils.assign(nj, compiler, tmplTag, utils);\n\t\n\tvar _global = typeof self !== 'undefined' ? self : global;\n\t\n\tmodule.exports = _global.NornJ = _global.nj = nj;\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction nj() {\n\t  return nj['tmplTag' + (nj.outputH ? 'H' : '')].apply(null, arguments);\n\t}\n\t\n\tnj.createElement = null;\n\tnj.components = {};\n\tnj.asts = {};\n\tnj.templates = {};\n\tnj.tmplStrs = {};\n\tnj.errorTitle = '[NornJ error]';\n\tnj.tmplRule = {};\n\tnj.outputH = false;\n\t\n\tmodule.exports = nj;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar tools = __webpack_require__(3),\n\t    transformElement = __webpack_require__(4),\n\t    transformParam = __webpack_require__(5),\n\t    transformData = __webpack_require__(6),\n\t    escape = __webpack_require__(7),\n\t    checkElem = __webpack_require__(8),\n\t    registerComponent = __webpack_require__(9),\n\t    filter = __webpack_require__(10),\n\t    expression = __webpack_require__(11),\n\t    setTmplRule = __webpack_require__(12);\n\t\n\t//Set default param rule\n\tsetTmplRule();\n\t\n\tmodule.exports = tools.assign({\n\t  escape: escape,\n\t  setTmplRule: setTmplRule\n\t}, checkElem, registerComponent, filter, expression, tools, transformElement, transformParam, transformData);\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar nj = __webpack_require__(1),\n\t    nativeArrayPush = Array.prototype.push,\n\t    nativeArraySlice = Array.prototype.slice,\n\t    hasOwnProperty = Object.prototype.hasOwnProperty,\n\t    errorTitle = nj.errorTitle;\n\t\n\t//Push one by one to array\n\tfunction arrayPush(arr1, arr2) {\n\t  nativeArrayPush.apply(arr1, arr2);\n\t  return arr1;\n\t}\n\t\n\tfunction arraySlice(arrLike) {\n\t  return nativeArraySlice.call(arrLike);\n\t}\n\t\n\t//判断是否为数组\n\tfunction isArray(obj) {\n\t  return Array.isArray(obj);\n\t}\n\t\n\t//判断是否为对象\n\tfunction isObject(obj) {\n\t  var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n\t  return !isArray(obj) && (type === 'function' || type === 'object' && !!obj);\n\t}\n\t\n\t//判断是否为字符串\n\tfunction isString(obj) {\n\t  return Object.prototype.toString.call(obj) === '[object String]';\n\t}\n\t\n\t//获取属性值\n\tfunction _getProperty(key) {\n\t  return function (obj) {\n\t    return obj == null ? void 0 : obj[key];\n\t  };\n\t}\n\t\n\t//是否为类数组\n\tvar _getLength = _getProperty('length');\n\t\n\tfunction isArrayLike(obj) {\n\t  var length = _getLength(obj);\n\t  return typeof length == 'number' && length >= 0;\n\t}\n\t\n\t//遍历数组或对象\n\tfunction each(obj, func, context, isArr) {\n\t  if (!obj) {\n\t    return;\n\t  }\n\t\n\t  if (isArr == null) {\n\t    isArr = isArrayLike(obj);\n\t  }\n\t\n\t  //设置回调函数上下文\n\t  context = context ? context : obj;\n\t\n\t  if (isArr) {\n\t    for (var i = 0, l = obj.length; i < l; i++) {\n\t      var ret = func.call(context, obj[i], i);\n\t\n\t      if (ret === false) {\n\t        break;\n\t      }\n\t    }\n\t  } else {\n\t    var keys = Object.keys(obj),\n\t        l = keys.length;\n\t    for (var i = 0; i < l; i++) {\n\t      var k = keys[i],\n\t          ret = func.call(context, obj[k], k, i, l);\n\t\n\t      if (ret === false) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\t//Transform multidimensional array to one-dimensional array\n\tfunction flatten(obj) {\n\t  var output = [],\n\t      idx = 0;\n\t\n\t  if (isArray(obj)) {\n\t    for (var i = 0, l = _getLength(obj); i < l; i++) {\n\t      var value = obj[i];\n\t      //flatten current level of array or arguments object\n\t      value = flatten(value);\n\t\n\t      var j = 0,\n\t          len = value.length;\n\t      output.length += len;\n\t      while (j < len) {\n\t        output[idx++] = value[j++];\n\t      }\n\t    }\n\t  } else {\n\t    output[idx++] = obj;\n\t  }\n\t\n\t  return output;\n\t}\n\t\n\t//Noop function\n\tfunction noop() {}\n\t\n\t//抛出异常\n\tfunction throwIf(val, msg, type) {\n\t  if (!val) {\n\t    switch (type) {\n\t      case 'expr':\n\t        throw Error(errorTitle + 'Expression \"' + msg + '\" is undefined, please check it has been registered.');\n\t      default:\n\t        throw Error(errorTitle + (msg || val));\n\t    }\n\t  }\n\t}\n\t\n\t//Print warn\n\tfunction warn(msg, type) {\n\t  var ret = errorTitle;\n\t  switch (type) {\n\t    case 'filter':\n\t      ret += 'A filter called \"' + msg + '\" is undefined.';\n\t      break;\n\t    default:\n\t      ret += msg;\n\t  }\n\t\n\t  console.warn(ret);\n\t}\n\t\n\t//create a unique key\n\tfunction uniqueKey(str, hash) {\n\t  var len = str.length;\n\t  if (len == 0) {\n\t    return str;\n\t  }\n\t  if (hash == null) {\n\t    hash = 0;\n\t  }\n\t\n\t  var i, chr;\n\t  for (i = 0, len = str.length; i < len; i++) {\n\t    chr = str.charCodeAt(i);\n\t    hash = (hash << 5) - hash + chr;\n\t    hash |= 0;\n\t  }\n\t\n\t  return hash;\n\t}\n\t\n\t//create light weight object\n\tfunction lightObj() {\n\t  return Object.create(null);\n\t}\n\t\n\t//Clear quotation marks\n\tvar REGEX_QUOT_D = /[\"]+/g,\n\t    REGEX_QUOT_S = /[']+/g;\n\t\n\tfunction clearQuot(value, clearDouble) {\n\t  if (value == null) {\n\t    return;\n\t  }\n\t\n\t  var regex;\n\t  if (clearDouble == null) {\n\t    var charF = value[0];\n\t    if (charF === '\\'') {\n\t      regex = REGEX_QUOT_S;\n\t    } else if (charF === '\"') {\n\t      regex = REGEX_QUOT_D;\n\t    }\n\t  } else if (clearDouble) {\n\t    regex = REGEX_QUOT_D;\n\t  } else {\n\t    regex = REGEX_QUOT_S;\n\t  }\n\t\n\t  if (regex) {\n\t    value = value.replace(regex, '');\n\t  }\n\t  return value;\n\t}\n\t\n\t//Transform to camel-case\n\tfunction toCamelCase(str) {\n\t  if (str.indexOf('-') > -1) {\n\t    str = str.replace(/-\\w/g, function (letter) {\n\t      return letter.substr(1).toUpperCase();\n\t    });\n\t  }\n\t\n\t  return str;\n\t}\n\t\n\t//Reference by babel-external-helpers\n\tvar assign = Object.assign || function (target) {\n\t  for (var i = 1, args = arguments; i < args.length; i++) {\n\t    var source = args[i];\n\t\n\t    for (var key in source) {\n\t      if (hasOwnProperty.call(source, key)) {\n\t        target[key] = source[key];\n\t      }\n\t    }\n\t  }\n\t\n\t  return target;\n\t};\n\t\n\tvar tools = {\n\t  isArray: isArray,\n\t  isArrayLike: isArrayLike,\n\t  isObject: isObject,\n\t  isString: isString,\n\t  each: each,\n\t  flatten: flatten,\n\t  throwIf: throwIf,\n\t  assign: assign,\n\t  uniqueKey: uniqueKey,\n\t  lightObj: lightObj,\n\t  arrayPush: arrayPush,\n\t  arraySlice: arraySlice,\n\t  clearQuot: clearQuot,\n\t  toCamelCase: toCamelCase,\n\t  warn: warn,\n\t  noop: noop\n\t};\n\t\n\tmodule.exports = tools;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3),\n\t    tranParam = __webpack_require__(5),\n\t    tmplRule = nj.tmplRule;\n\t\n\t//提取xml open tag\n\tfunction getXmlOpenTag(obj) {\n\t  return tmplRule.xmlOpenTag.exec(obj);\n\t}\n\t\n\t//验证xml self close tag\n\tvar REGEX_XML_SELF_CLOSE_TAG = /^<[^>]+\\/>$/i;\n\tfunction isXmlSelfCloseTag(obj) {\n\t  return REGEX_XML_SELF_CLOSE_TAG.test(obj);\n\t}\n\t\n\t//Verify self close tag name\n\tvar OMITTED_CLOSE_TAGS = {\n\t  'area': true,\n\t  'base': true,\n\t  'br': true,\n\t  'col': true,\n\t  'embed': true,\n\t  'hr': true,\n\t  'img': true,\n\t  'input': true,\n\t  'keygen': true,\n\t  'link': true,\n\t  'meta': true,\n\t  'param': true,\n\t  'source': true,\n\t  'track': true,\n\t  'wbr': true\n\t};\n\tfunction verifySelfCloseTag(tagName) {\n\t  return OMITTED_CLOSE_TAGS[tagName.toLowerCase()];\n\t}\n\t\n\t//Extract parameters inside the xml open tag\n\tfunction getOpenTagParams(tag) {\n\t  var pattern = tmplRule.openTagParams,\n\t      matchArr,\n\t      ret;\n\t\n\t  while (matchArr = pattern.exec(tag)) {\n\t    var key = matchArr[1];\n\t    if (key === '/') {\n\t      //If match to the last of \"/\", then continue the loop.\n\t      continue;\n\t    }\n\t\n\t    if (!ret) {\n\t      ret = [];\n\t    }\n\t\n\t    var value = matchArr[7],\n\t        onlyBrace = matchArr[4];\n\t    if (value != null) {\n\t      value = tools.clearQuot(value); //Remove quotation marks\n\t    } else {\n\t      value = key; //Match to Similar to \"checked\" or \"disabled\" attribute.\n\t    }\n\t\n\t    //Removed at the end of \"/>\", \">\" or \"/\".\n\t    if (/\\/>$/.test(value)) {\n\t      value = value.substr(0, value.length - 2);\n\t    } else if (/>$/.test(value) || /\\/$/.test(value)) {\n\t      value = value.substr(0, value.length - 1);\n\t    }\n\t\n\t    ret.push({\n\t      key: key,\n\t      value: value,\n\t      onlyBrace: onlyBrace\n\t    });\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\t//判断xml close tag\n\tfunction isXmlCloseTag(obj, tagName) {\n\t  return tools.isString(obj) && obj.toLowerCase() === '</' + tagName + '>';\n\t}\n\t\n\t//get inside brace param\n\tfunction getInsideBraceParam(obj) {\n\t  return tmplRule.insideBraceParam.exec(obj);\n\t}\n\t\n\t//判断块表达式并返回参数\n\tfunction isExpr(obj) {\n\t  var ret,\n\t      ret1 = tmplRule.expr.exec(obj);\n\t  if (ret1) {\n\t    ret = [ret1[1]];\n\t\n\t    var params = getOpenTagParams(obj); //提取各参数\n\t    if (params) {\n\t      ret.push(params);\n\t    }\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\t//判断块表达式close tag\n\tfunction isExprCloseTag(obj, tagName) {\n\t  return tools.isString(obj) && obj === '/' + tmplRule.exprRule + tagName;\n\t}\n\t\n\t//判断是否模板元素\n\tfunction isTmpl(obj) {\n\t  return obj === 'tmpl';\n\t}\n\t\n\t//加入到模板集合中\n\tfunction addTmpl(node, parent, name) {\n\t  var paramsP = parent.params;\n\t  if (!paramsP) {\n\t    paramsP = parent.params = tools.lightObj();\n\t  }\n\t\n\t  var tmpls = paramsP.tmpls;\n\t  if (!tmpls) {\n\t    var objT = { length: 0 };\n\t    if (name != null) {\n\t      objT[name] = node;\n\t    } else {\n\t      objT['0'] = node;\n\t      objT.length = 1;\n\t    }\n\t\n\t    paramsP.tmpls = tranParam.compiledParam(objT);\n\t  } else {\n\t    //Insert the compiled template to the parameter name for \"tmpls\"'s \"strs\" array.\n\t    var objT = tmpls.strs[0],\n\t        len = objT.length;\n\t\n\t    if (name != null) {\n\t      objT[name] = node;\n\t    } else {\n\t      objT[len] = node;\n\t      objT.length = ++len;\n\t    }\n\t  }\n\t}\n\t\n\t//Test whether as parameters expression\n\tfunction isParamsExpr(obj) {\n\t  return obj === 'params' || obj === 'props';\n\t}\n\t\n\t//Add to the \"paramsExpr\" property of the parent node\n\tfunction addParamsExpr(node, parent) {\n\t  if (!parent.paramsExpr) {\n\t    parent.paramsExpr = node;\n\t  } else {\n\t    tools.arrayPush(parent.paramsExpr.content, node.content);\n\t  }\n\t}\n\t\n\tmodule.exports = {\n\t  getXmlOpenTag: getXmlOpenTag,\n\t  isXmlSelfCloseTag: isXmlSelfCloseTag,\n\t  verifySelfCloseTag: verifySelfCloseTag,\n\t  getOpenTagParams: getOpenTagParams,\n\t  isXmlCloseTag: isXmlCloseTag,\n\t  getInsideBraceParam: getInsideBraceParam,\n\t  isExpr: isExpr,\n\t  isExprCloseTag: isExprCloseTag,\n\t  isTmpl: isTmpl,\n\t  addTmpl: addTmpl,\n\t  isParamsExpr: isParamsExpr,\n\t  addParamsExpr: addParamsExpr\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3),\n\t    tmplRule = nj.tmplRule;\n\t\n\t//Get compiled parameters from a object\n\tfunction compiledParams(obj) {\n\t  var ret = tools.lightObj();\n\t  tools.each(obj, function (v, k) {\n\t    ret[k] = compiledParam(v);\n\t  }, false, false);\n\t\n\t  return ret;\n\t}\n\t\n\t//Get compiled property\n\tfunction compiledProp(prop, isString) {\n\t  var ret = tools.lightObj();\n\t\n\t  //Extract the dot data path to the 'prop' filter.\n\t  if (!isString && prop.indexOf('.') > -1) {\n\t    prop = prop.replace(/\\.([^\\s.|\\/]+)/g, '|prop($1)');\n\t  }\n\t\n\t  //If there are colons in the property,then use filter\n\t  if (prop.indexOf('|') >= 0) {\n\t    var filters = [],\n\t        filtersTmp;\n\t    filtersTmp = prop.split('|');\n\t    prop = filtersTmp[0].trim(); //Extract property\n\t\n\t    filtersTmp = filtersTmp.slice(1);\n\t    tools.each(filtersTmp, function (filter) {\n\t      var retF = _getFilterParam(filter.trim()),\n\t          filterObj = tools.lightObj(),\n\t          filterName = retF[1]; //Get filter name\n\t\n\t      if (filterName) {\n\t        var paramsF = retF[3]; //Get filter param\n\t\n\t        //Multiple params are separated by commas.\n\t        if (paramsF) {\n\t          var params = [];\n\t          tools.each(paramsF.split(','), function (p) {\n\t            params[params.length] = tools.clearQuot(p).trim();\n\t          }, false, true);\n\t\n\t          filterObj.params = params;\n\t        }\n\t\n\t        filterObj.name = filterName;\n\t        filters.push(filterObj);\n\t      }\n\t    }, false, true);\n\t\n\t    ret.filters = filters;\n\t  }\n\t\n\t  //Extract the parent data path\n\t  if (!isString && prop.indexOf('../') > -1) {\n\t    var n = 0;\n\t    prop = prop.replace(/\\.\\.\\//g, function () {\n\t      n++;\n\t      return '';\n\t    });\n\t\n\t    ret.parentNum = n;\n\t  }\n\t\n\t  ret.name = prop;\n\t  if (isString) {\n\t    //Sign the parameter is a pure string.\n\t    ret.isStr = true;\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\t//Get filter param\n\tvar REGEX_FILTER_PARAM = /([\\w$]+)(\\(([^()]+)\\))*/;\n\tfunction _getFilterParam(obj) {\n\t  return REGEX_FILTER_PARAM.exec(obj);\n\t}\n\t\n\t//Extract replace parameters\n\tvar _quots = ['\\'', '\"'];\n\tfunction _getReplaceParam(obj, strs) {\n\t  var pattern = tmplRule.replaceParam(),\n\t      matchArr,\n\t      ret,\n\t      i = 0;\n\t\n\t  while (matchArr = pattern.exec(obj)) {\n\t    if (!ret) {\n\t      ret = [];\n\t    }\n\t\n\t    var prop = matchArr[3],\n\t        item = [matchArr[0], matchArr[1], null, false, true];\n\t\n\t    if (i > 0) {\n\t      item[4] = false; //Sign not contain all of placehorder\n\t    }\n\t\n\t    //Clear parameter at both ends of the space.\n\t    prop = prop.trim();\n\t\n\t    //If parameter has quotation marks, this's a pure string parameter.\n\t    if (_quots.indexOf(prop[0]) > -1) {\n\t      prop = tools.clearQuot(prop); //TODO 此处也会去除过滤器参数的引号\n\t      item[3] = true;\n\t    }\n\t\n\t    item[2] = prop;\n\t    ret.push(item);\n\t    i++;\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\t//Get compiled parameter\n\tfunction compiledParam(value) {\n\t  var ret = tools.lightObj(),\n\t      strs = tools.isString(value) ? value.split(tmplRule.replaceSplit) : [value],\n\t      props = null,\n\t      isAll = false; //此处指替换符是否占满整个属性值;若无替换符时为false\n\t\n\t  //If have placehorder\n\t  if (strs.length > 1) {\n\t    var params = _getReplaceParam(value, strs);\n\t    props = [];\n\t\n\t    tools.each(params, function (param) {\n\t      var retP = tools.lightObj();\n\t      isAll = param[4] ? param[0] === value : false; //If there are several curly braces, \"isAll\" must be false.\n\t      retP.prop = compiledProp(param[2], param[3]);\n\t\n\t      //If parameter's open rules are several,then it need escape.\n\t      retP.escape = param[1].split(tmplRule.startRule).length < 3;\n\t      props.push(retP);\n\t    }, false, true);\n\t  }\n\t\n\t  ret.props = props;\n\t  ret.strs = strs;\n\t  ret.isAll = isAll;\n\t\n\t  //标记为模板函数替换变量\n\t  if (isAll) {\n\t    var prop = props[0].prop;\n\t    if (prop.name.indexOf('#') === 0) {\n\t      prop.name = prop.name.substr(1);\n\t      ret.isTmplPlace = true;\n\t    }\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\tmodule.exports = {\n\t  compiledParam: compiledParam,\n\t  compiledParams: compiledParams,\n\t  compiledProp: compiledProp\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3),\n\t    errorTitle = nj.errorTitle;\n\t\n\t//提取style内参数\n\tfunction styleProps(obj) {\n\t  //If the parameter is a style object,then direct return.\n\t  if (tools.isObject(obj)) {\n\t    return obj;\n\t  }\n\t\n\t  //参数为字符串\n\t  var pattern = /([^\\s:]+)[\\s]?:[\\s]?([^\\s;]+)[;]?/g,\n\t      matchArr,\n\t      ret;\n\t\n\t  while (matchArr = pattern.exec(obj)) {\n\t    var key = matchArr[1],\n\t        value = matchArr[2];\n\t\n\t    if (!ret) {\n\t      ret = {};\n\t    }\n\t\n\t    //Convert to lowercase when style name is all capital.\n\t    if (/^[A-Z-]+$/.test(key)) {\n\t      key = key.toLowerCase();\n\t    }\n\t\n\t    //将连字符转为驼峰命名\n\t    key = tools.toCamelCase(key);\n\t\n\t    ret[key] = value;\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\t//Get value from multiple datas\n\tfunction getData(data, prop) {\n\t  var ret, obj;\n\t  for (var i = 0, l = data.length; i < l; i++) {\n\t    obj = data[i];\n\t    if (obj) {\n\t      ret = obj[prop];\n\t      if (ret != null) {\n\t        return ret;\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\t//Rebuild local variables in the new context\n\tfunction newContext(p2, p3) {\n\t  var newData = [];\n\t  if ('data' in p3) {\n\t    newData.push(p3.data);\n\t  }\n\t  if ('extra' in p3) {\n\t    newData.push(p3.extra);\n\t  }\n\t\n\t  return {\n\t    data: newData.length ? tools.arrayPush(newData, p2.data) : p2.data,\n\t    parent: p3.fallback ? p2 : p2.parent,\n\t    index: 'index' in p3 ? p3.index : p2.index\n\t  };\n\t}\n\t\n\t//修正属性名\n\tfunction fixPropName(name) {\n\t  switch (name) {\n\t    case 'class':\n\t      name = 'className';\n\t      break;\n\t    case 'for':\n\t      name = 'htmlFor';\n\t      break;\n\t  }\n\t\n\t  return name;\n\t}\n\t\n\t//合并字符串属性\n\tfunction assignStringProp(paramsE, keys) {\n\t  var ret = '';\n\t  for (var k in paramsE) {\n\t    if (!keys || !keys[k]) {\n\t      var v = paramsE[k];\n\t      ret += ' ' + k + (k !== v ? '=\"' + v + '\"' : ' ');\n\t    }\n\t  }\n\t  return ret;\n\t}\n\t\n\t//创建块表达式子节点函数\n\tfunction exprRet(p1, p2, fn, p4) {\n\t  return function (param) {\n\t    return fn(p1, p2, param, p4);\n\t  };\n\t}\n\t\n\t//构建可运行的模板函数\n\tfunction tmplWrap(configs, main) {\n\t  return function () {\n\t    var args = arguments,\n\t        initCtx = this,\n\t        data = !tools.isArray(args[0]) ? tools.arraySlice(args) : args[0];\n\t\n\t    return main(configs, {\n\t      data: initCtx && initCtx._njData ? tools.arrayPush([initCtx._njData], data) : data,\n\t      parent: initCtx && initCtx._njParent ? initCtx._njParent : null,\n\t      index: initCtx && initCtx._njIndex ? initCtx._njIndex : null\n\t    });\n\t  };\n\t}\n\t\n\t//创建模板函数\n\tfunction template(fns) {\n\t  var configs = {\n\t    useString: fns.useString,\n\t    exprs: nj.exprs,\n\t    filters: nj.filters,\n\t    getData: getData,\n\t    noop: tools.noop,\n\t    lightObj: tools.lightObj,\n\t    throwIf: tools.throwIf,\n\t    warn: tools.warn,\n\t    newContext: newContext,\n\t    styleProps: styleProps,\n\t    exprRet: exprRet\n\t  };\n\t\n\t  if (!configs.useString) {\n\t    configs.h = nj.createElement;\n\t    configs.components = nj.components;\n\t    //configs.assign = tools.assign;\n\t  } else {\n\t    configs.assignStringProp = assignStringProp;\n\t    configs.escape = nj.escape;\n\t  }\n\t\n\t  tools.each(fns, function (v, k) {\n\t    if (k.indexOf('main') === 0) {\n\t      //将每个主函数构建为可运行的模板函数\n\t      configs[k] = tmplWrap(configs, v);\n\t      configs['_' + k] = v;\n\t    } else if (k.indexOf('fn') === 0) {\n\t      //块表达式函数\n\t      configs[k] = v;\n\t    }\n\t  }, false, false);\n\t\n\t  return configs;\n\t}\n\t\n\tmodule.exports = {\n\t  newContext: newContext,\n\t  getData: getData,\n\t  fixPropName: fixPropName,\n\t  styleProps: styleProps,\n\t  assignStringProp: assignStringProp,\n\t  exprRet: exprRet,\n\t  tmplWrap: tmplWrap,\n\t  template: template\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar ESCAPE_LOOKUP = {\n\t  '&': '&amp;',\n\t  '>': '&gt;',\n\t  '<': '&lt;',\n\t  '\"': '&quot;',\n\t  '\\'': '&#x27;'\n\t};\n\t\n\tfunction escape(text) {\n\t  if (text == null) {\n\t    return '';\n\t  } else if (!text.replace) {\n\t    return text;\n\t  }\n\t\n\t  return text.replace(/[&><\"']/g, function (match) {\n\t    return ESCAPE_LOOKUP[match];\n\t  });\n\t}\n\t\n\tmodule.exports = escape;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3),\n\t    tranParam = __webpack_require__(5),\n\t    tranElem = __webpack_require__(4),\n\t    tmplRule = nj.tmplRule;\n\t\n\t//检测元素节点\n\tfunction checkElem(obj, parent) {\n\t  var node = {},\n\t      parentContent = !parent.hasElse ? 'content' : 'contentElse';\n\t\n\t  if (!tools.isArray(obj)) {\n\t    //判断是否为文本节点\n\t    if (tools.isObject(obj) && '_njShim' in obj && !tools.isArray(obj._njShim)) {\n\t      //Get the shim value\n\t      obj = obj._njShim;\n\t    }\n\t\n\t    node.type = 'nj_plaintext';\n\t    node.content = [tranParam.compiledParam(obj)];\n\t    parent[parentContent].push(node);\n\t    return;\n\t  }\n\t\n\t  var first = obj[0];\n\t  if (tools.isString(first)) {\n\t    //第一个子节点为字符串\n\t    var first = first,\n\t        len = obj.length,\n\t        last = obj[len - 1],\n\t        isElemNode = false,\n\t        expr,\n\t        exprParams;\n\t\n\t    //判断是否为xml标签\n\t    var openTagName,\n\t        hasCloseTag = false,\n\t        isTmpl,\n\t        isParamsExpr;\n\t\n\t    expr = tranElem.isExpr(first);\n\t    if (!expr) {\n\t      var xmlOpenTag = tranElem.getXmlOpenTag(first);\n\t      if (xmlOpenTag) {\n\t        //tagname为xml标签时,则认为是元素节点\n\t        openTagName = xmlOpenTag[1];\n\t\n\t        if (!tranElem.isXmlSelfCloseTag(first)) {\n\t          //非自闭合标签才验证是否存在关闭标签\n\t          hasCloseTag = tranElem.isXmlCloseTag(last, openTagName);\n\t        } else {\n\t          //自闭合标签\n\t          node.selfCloseTag = true;\n\t        }\n\t        isElemNode = true;\n\t      }\n\t    } else {\n\t      //为块表达式,也可视为一个元素节点\n\t      var exprName = expr[0];\n\t      exprParams = expr[1];\n\t      isTmpl = tranElem.isTmpl(exprName);\n\t      isParamsExpr = tranElem.isParamsExpr(exprName);\n\t\n\t      node.type = 'nj_expr';\n\t      node.expr = exprName;\n\t      if (exprParams != null && !isTmpl) {\n\t        node.refer = tranParam.compiledParam(exprParams.reduce(function (p, c) {\n\t          return p + (c.onlyBrace ? ' ' + c.key : '');\n\t        }, ''));\n\t      }\n\t\n\t      if (tranElem.isExprCloseTag(last, exprName)) {\n\t        //判断是否有块表达式闭合标签\n\t        hasCloseTag = true;\n\t      }\n\t      isElemNode = true;\n\t    }\n\t\n\t    if (isElemNode) {\n\t      //判断是否为元素节点\n\t      var elseIndex = -1,\n\t          pushContent = true;\n\t\n\t      if (!expr) {\n\t        node.type = openTagName;\n\t\n\t        //If open tag has a brace,add the typeRefer param.\n\t        var typeRefer = tranElem.getInsideBraceParam(openTagName);\n\t        if (typeRefer) {\n\t          node.typeRefer = tranParam.compiledParam(typeRefer[0]);\n\t        }\n\t\n\t        //获取openTag内参数\n\t        var tagParams = tranElem.getOpenTagParams(first);\n\t        if (tagParams) {\n\t          if (!node.params) {\n\t            node.params = tools.lightObj();\n\t          }\n\t\n\t          tools.each(tagParams, function (param) {\n\t            //The parameter like \"{prop}\" needs to be replaced.\n\t            node.params[param.onlyBrace ? param.onlyBrace.replace(/\\.\\.\\//g, '') : param.key] = tranParam.compiledParam(param.value);\n\t          }, false, true);\n\t        }\n\t\n\t        //Verify if self closing tag again, because the tag may be similar to \"<br></br>\".\n\t        if (!node.selfCloseTag) {\n\t          node.selfCloseTag = tranElem.verifySelfCloseTag(openTagName);\n\t        }\n\t      } else {\n\t        //为块表达式时判断是否有#else\n\t        if (isTmpl) {\n\t          //模板元素\n\t          pushContent = false;\n\t\n\t          //将模板添加到父节点的params中\n\t          tranElem.addTmpl(node, parent, exprParams ? exprParams[0].value : null);\n\t        } else if (isParamsExpr) {\n\t          pushContent = false;\n\t        } else {\n\t          elseIndex = obj.indexOf(tmplRule.exprRule + 'else');\n\t        }\n\t      }\n\t\n\t      //放入父节点content内\n\t      if (pushContent) {\n\t        parent[parentContent].push(node);\n\t      }\n\t\n\t      //取出子节点集合\n\t      var end = len - (hasCloseTag ? 1 : 0),\n\t          content = obj.slice(1, elseIndex < 0 ? end : elseIndex);\n\t      if (content && content.length) {\n\t        checkContentElem(content, node);\n\t      }\n\t\n\t      //如果有$else,则将$else后面的部分存入content_else集合中\n\t      if (elseIndex >= 0) {\n\t        var contentElse = obj.slice(elseIndex + 1, end);\n\t        node.hasElse = true;\n\t\n\t        if (contentElse && contentElse.length) {\n\t          checkContentElem(contentElse, node);\n\t        }\n\t      }\n\t\n\t      //If this is params block, set on the \"paramsExpr\" property of the parent node.\n\t      if (isParamsExpr) {\n\t        tranElem.addParamsExpr(node, parent);\n\t      }\n\t    } else {\n\t      //如果不是元素节点,则为节点集合\n\t      checkContentElem(obj, parent);\n\t    }\n\t  } else if (tools.isArray(first)) {\n\t    //如果第一个子节点为数组,则该节点一定为节点集合(可以是多层数组嵌套的集合)\n\t    checkContentElem(obj, parent);\n\t  }\n\t}\n\t\n\t//检测子元素节点\n\tfunction checkContentElem(obj, parent) {\n\t  if (!parent.content) {\n\t    parent.content = [];\n\t  }\n\t  if (parent.hasElse && !parent.contentElse) {\n\t    parent.contentElse = [];\n\t  }\n\t\n\t  tools.each(obj, function (item) {\n\t    checkElem(item, parent);\n\t  }, false, true);\n\t}\n\t\n\tmodule.exports = {\n\t  checkElem: checkElem\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3);\n\t\n\t//注册组件\n\tfunction registerComponent(name, component) {\n\t  var params = name;\n\t  if (!tools.isObject(name)) {\n\t    params = {};\n\t    params[name] = component;\n\t  }\n\t\n\t  tools.each(params, function (v, k) {\n\t    nj.components[k.toLowerCase()] = v;\n\t  }, false, false);\n\t\n\t  return component;\n\t}\n\t\n\tmodule.exports = {\n\t  registerComponent: registerComponent\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar tools = __webpack_require__(3);\n\t\n\t//Global filter list\n\tvar filters = {\n\t  //Get param properties\n\t  prop: function prop(obj, props) {\n\t    var ret = obj;\n\t    ret && tools.each(props.split('.'), function (p) {\n\t      ret = ret[p];\n\t    }, false, true);\n\t\n\t    return ret;\n\t  },\n\t\n\t  //Get list count\n\t  count: function count(obj) {\n\t    return obj ? obj.length : 0;\n\t  },\n\t\n\t  //Get list item\n\t  item: function item(obj, no) {\n\t    return obj ? obj[no] : null;\n\t  },\n\t\n\t  //Judge equal\n\t  equal: function equal(obj, val) {\n\t    return obj == val;\n\t  },\n\t\n\t  //Less than\n\t  lt: function lt(val1, val2, noEqual) {\n\t    var ret;\n\t    val1 = parseFloat(val1);\n\t    val2 = parseFloat(val2);\n\t\n\t    if (noEqual) {\n\t      ret = val1 < val2;\n\t    } else {\n\t      ret = val1 <= val2;\n\t    }\n\t\n\t    return ret;\n\t  },\n\t\n\t  //Greater than\n\t  gt: function gt(val1, val2, noEqual) {\n\t    var ret;\n\t    val1 = parseFloat(val1);\n\t    val2 = parseFloat(val2);\n\t\n\t    if (noEqual) {\n\t      ret = val1 > val2;\n\t    } else {\n\t      ret = val1 >= val2;\n\t    }\n\t\n\t    return ret;\n\t  },\n\t\n\t  //Addition\n\t  add: function add(val1, val2, isFloat) {\n\t    return val1 + (isFloat ? parseFloat(val2) : parseInt(val2, 10));\n\t  },\n\t\n\t  //Convert to int \n\t  int: function int(val) {\n\t    return parseInt(val, 10);\n\t  },\n\t\n\t  //Convert to float \n\t  float: function float(val) {\n\t    return parseFloat(val);\n\t  },\n\t\n\t  //Convert to boolean \n\t  bool: function bool(val) {\n\t    if (val === 'false') {\n\t      return false;\n\t    }\n\t\n\t    return Boolean(val);\n\t  }\n\t};\n\t\n\tfunction _commonConfig(params) {\n\t  var ret = {\n\t    useString: true\n\t  };\n\t\n\t  if (params) {\n\t    ret = tools.assign(ret, params);\n\t  }\n\t  return ret;\n\t}\n\t\n\t//Filter default config\n\tvar filterConfig = {\n\t  prop: _commonConfig(),\n\t  count: _commonConfig(),\n\t  item: _commonConfig(),\n\t  equal: _commonConfig(),\n\t  lt: _commonConfig(),\n\t  gt: _commonConfig(),\n\t  add: _commonConfig(),\n\t  int: _commonConfig(),\n\t  float: _commonConfig(),\n\t  bool: _commonConfig()\n\t};\n\t\n\t//Register filter and also can batch add\n\tfunction registerFilter(name, filter, options) {\n\t  var params = name;\n\t  if (!tools.isObject(name)) {\n\t    params = {};\n\t    params[name] = {\n\t      filter: filter,\n\t      options: options\n\t    };\n\t  }\n\t\n\t  tools.each(params, function (v, name) {\n\t    if (v) {\n\t      var filter = v.filter,\n\t          options = v.options;\n\t\n\t      if (filter || options) {\n\t        if (filter) {\n\t          filters[name] = filter;\n\t        }\n\t        if (options) {\n\t          filterConfig[name] = _commonConfig(options);\n\t        }\n\t      } else {\n\t        filters[name] = v;\n\t      }\n\t    }\n\t  }, false, false);\n\t}\n\t\n\tmodule.exports = {\n\t  filters: filters,\n\t  filterConfig: filterConfig,\n\t  registerFilter: registerFilter\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar tools = __webpack_require__(3);\n\t\n\t//Global expression list\n\tvar exprs = {\n\t  'if': function _if(refer, options) {\n\t    if (refer === 'false') {\n\t      refer = false;\n\t    }\n\t\n\t    var referR, ret;\n\t    if (!options.useUnless) {\n\t      referR = !!refer;\n\t    } else {\n\t      referR = !!!refer;\n\t    }\n\t    if (referR) {\n\t      ret = options.result();\n\t    } else {\n\t      ret = options.inverse();\n\t    }\n\t\n\t    if (options.useString && ret == null) {\n\t      return '';\n\t    }\n\t\n\t    return ret;\n\t  },\n\t\n\t  unless: function unless(refer, options) {\n\t    options.useUnless = true;\n\t    return exprs['if'].call(this, refer, options);\n\t  },\n\t\n\t  each: function each(refer, options) {\n\t    var useString = options.useString,\n\t        ret;\n\t\n\t    if (refer) {\n\t      if (useString) {\n\t        ret = '';\n\t      } else {\n\t        ret = [];\n\t      }\n\t\n\t      tools.each(refer, function (item, index) {\n\t        var retI = options.result({\n\t          data: item,\n\t          index: index,\n\t          fallback: true\n\t        });\n\t\n\t        if (useString) {\n\t          ret += retI;\n\t        } else {\n\t          ret.push(retI);\n\t        }\n\t      }, false, tools.isArrayLike(refer));\n\t\n\t      //Return null when not use string and result is empty.\n\t      if (!useString && !ret.length) {\n\t        ret = null;\n\t      }\n\t    } else {\n\t      ret = options.inverse();\n\t      if (useString && ret == null) {\n\t        ret = '';\n\t      }\n\t    }\n\t\n\t    return ret;\n\t  },\n\t\n\t  //Parameter\n\t  param: function param(name, options) {\n\t    var ret = options.result(),\n\t        //Get parameter value\n\t    value;\n\t\n\t    //If the value length greater than 1, it need to be connected to a whole string.\n\t    if (ret != null) {\n\t      if (!tools.isArray(ret)) {\n\t        value = ret;\n\t      } else {\n\t        value = '';\n\t        tools.each(tools.flatten(ret), function (item) {\n\t          value += item != null ? item : '';\n\t        }, false, true);\n\t      }\n\t    } else {\n\t      //Match to Similar to \"checked\" or \"disabled\" attribute.\n\t      value = !options.useString ? true : name;\n\t    }\n\t\n\t    options.exprProps[name] = value;\n\t  },\n\t\n\t  //Spread parameters\n\t  spread: function spread(refer, options) {\n\t    if (!refer) {\n\t      return;\n\t    }\n\t\n\t    tools.each(refer, function (v, k) {\n\t      options.exprProps[k] = v;\n\t    }, false, false);\n\t  },\n\t\n\t  equal: function equal(value1, value2, options) {\n\t    var ret;\n\t    if (value1 == value2) {\n\t      ret = options.result();\n\t    } else {\n\t      ret = options.inverse();\n\t    }\n\t\n\t    return ret;\n\t  },\n\t\n\t  'for': function _for(start, end, options) {\n\t    var ret,\n\t        useString = options.useString;\n\t    if (useString) {\n\t      ret = '';\n\t    } else {\n\t      ret = [];\n\t    }\n\t\n\t    if (end == null) {\n\t      end = start;\n\t      start = 0;\n\t    }\n\t    start = parseInt(start, 10);\n\t    end = parseInt(end, 10);\n\t\n\t    for (; start <= end; start++) {\n\t      var retI = options.result({\n\t        index: start\n\t      });\n\t\n\t      if (useString) {\n\t        ret += retI;\n\t      } else {\n\t        ret.push(retI);\n\t      }\n\t    }\n\t\n\t    return ret;\n\t  },\n\t\n\t  blank: function blank(options) {\n\t    return options.result();\n\t  }\n\t};\n\t\n\tfunction _commonConfig(params) {\n\t  var ret = {\n\t    useString: true,\n\t    exprProps: false,\n\t    newContext: true\n\t  };\n\t\n\t  if (params) {\n\t    ret = tools.assign(ret, params);\n\t  }\n\t  return ret;\n\t}\n\t\n\t//Expression default config\n\tvar exprConfig = {\n\t  'if': _commonConfig({ newContext: false }),\n\t  unless: _commonConfig({ newContext: false }),\n\t  each: _commonConfig(),\n\t  param: _commonConfig({ newContext: false, exprProps: true }),\n\t  spread: _commonConfig({ newContext: false, useString: false, exprProps: true }),\n\t  equal: _commonConfig({ newContext: false, useString: false }),\n\t  'for': _commonConfig(),\n\t  blank: _commonConfig({ newContext: false, useString: false })\n\t};\n\t\n\t//Expression alias\n\texprs.prop = exprs.p = exprs.param;\n\texprConfig.prop = exprConfig.p = exprConfig.param;\n\t\n\t//Register expression and also can batch add\n\tfunction registerExpr(name, expr, options) {\n\t  var params = name;\n\t  if (!tools.isObject(name)) {\n\t    params = {};\n\t    params[name] = {\n\t      expr: expr,\n\t      options: options\n\t    };\n\t  }\n\t\n\t  tools.each(params, function (v, name) {\n\t    if (v) {\n\t      var expr = v.expr,\n\t          options = v.options;\n\t\n\t      if (expr || options) {\n\t        if (expr) {\n\t          exprs[name] = expr;\n\t        }\n\t        if (options) {\n\t          exprConfig[name] = _commonConfig(options);\n\t        }\n\t      } else {\n\t        exprs[name] = v;\n\t      }\n\t    }\n\t  }, false, false);\n\t}\n\t\n\tmodule.exports = {\n\t  exprs: exprs,\n\t  exprConfig: exprConfig,\n\t  registerExpr: registerExpr\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3);\n\t\n\tfunction _createRegExp(reg, mode) {\n\t  return new RegExp(reg, mode);\n\t}\n\t\n\t//Clear the repeated characters\n\tfunction _clearRepeat(str) {\n\t  var ret = '',\n\t      i = 0,\n\t      l = str.length,\n\t      char;\n\t\n\t  for (; i < l; i++) {\n\t    char = str[i];\n\t    if (ret.indexOf(char) < 0) {\n\t      ret += char;\n\t    }\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\tmodule.exports = function (startRule, endRule, exprRule, externalRule, propRule, templateRule) {\n\t  if (tools.isObject(startRule)) {\n\t    var params = startRule;\n\t    startRule = params.start;\n\t    endRule = params.end;\n\t    exprRule = params.expr;\n\t    externalRule = params.external;\n\t    propRule = params.prop;\n\t    templateRule = params.template;\n\t  }\n\t  if (!startRule) {\n\t    startRule = '{';\n\t  }\n\t  if (!endRule) {\n\t    endRule = '}';\n\t  }\n\t  if (!exprRule) {\n\t    exprRule = '#';\n\t  }\n\t  if (!externalRule) {\n\t    externalRule = '@';\n\t  }\n\t  if (!propRule) {\n\t    propRule = '@';\n\t  }\n\t  if (!templateRule) {\n\t    templateRule = 'template';\n\t  }\n\t\n\t  var allRules = _clearRepeat(startRule + endRule),\n\t      firstChar = startRule[0],\n\t      otherChars = allRules.substr(1),\n\t      spChars = '#$@',\n\t      exprRules = _clearRepeat(exprRule + spChars),\n\t      escapeExprRule = exprRule.replace(/\\$/g, '\\\\$'),\n\t      escapeExternalRule = externalRule.replace(/\\$/g, '\\\\$');\n\t\n\t  //Reset the regexs to global list\n\t  tools.assign(nj.tmplRule, {\n\t    startRule: startRule,\n\t    endRule: endRule,\n\t    exprRule: exprRule,\n\t    externalRule: externalRule,\n\t    propRule: propRule,\n\t    xmlOpenTag: _createRegExp('^<([a-z' + firstChar + exprRules + '][-a-z0-9_|./' + otherChars + ']*)[^>]*>$', 'i'),\n\t    openTagParams: _createRegExp('[\\\\s]+(((' + startRule + '){1,2}([^' + allRules + ']+)(' + endRule + '){1,2})|[^\\\\s=>]+)(=((\\'[^\\']+\\')|(\"[^\"]+\")|([^\"\\'\\\\s]+)))?', 'g'),\n\t    insideBraceParam: _createRegExp('(' + startRule + '){1,2}([^' + allRules + ']+)(' + endRule + '){1,2}', 'i'),\n\t    spreadProp: _createRegExp('[\\\\s]+(' + startRule + '){1,2}[\\\\s]*(\\\\.\\\\.\\\\.[^' + allRules + ']+)(' + endRule + '){1,2}', 'g'),\n\t    replaceSplit: _createRegExp('(?:' + startRule + '){1,2}[^' + allRules + ']+(?:' + endRule + '){1,2}'),\n\t    replaceParam: function replaceParam() {\n\t      return _createRegExp('((' + startRule + '){1,2})([^' + allRules + ']+)(' + endRule + '){1,2}', 'g');\n\t    },\n\t    checkElem: function checkElem() {\n\t      return _createRegExp('([^>]*)(<([a-z' + firstChar + '/' + exprRules + '!][-a-z0-9_|.' + allRules + exprRules + ']*)([^>]*)>)([^<]*)', 'ig');\n\t    },\n\t    externalSplit: _createRegExp(escapeExternalRule + '\\\\{[^{}]*(?:\\\\{[^' + externalRule + ']*\\\\})*[^{}]*\\\\}'),\n\t    external: function external() {\n\t      return _createRegExp(escapeExternalRule + '\\\\{([^{}]*(\\\\{[^' + externalRule + ']*\\\\})*[^{}]*)\\\\}', 'g');\n\t    },\n\t    expr: _createRegExp('^' + escapeExprRule + '([^\\\\s]+)', 'i'),\n\t    include: function include() {\n\t      return _createRegExp('<' + escapeExprRule + 'include([^>]*)>', 'ig');\n\t    },\n\t    template: templateRule\n\t  });\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    utils = __webpack_require__(2),\n\t    buildRuntime = __webpack_require__(14),\n\t    compileStringTmpl = __webpack_require__(16);\n\t\n\t//编译模板并返回转换函数\n\tfunction compile(tmpl, tmplName, outputH, fileName) {\n\t  if (!tmpl) {\n\t    return;\n\t  }\n\t  if (utils.isObject(tmplName)) {\n\t    var params = tmplName;\n\t    tmplName = params.tmplName;\n\t    outputH = params.outputH;\n\t    fileName = params.fileName;\n\t  }\n\t\n\t  //编译模板函数\n\t  var tmplFns;\n\t  if (tmplName) {\n\t    tmplFns = nj.templates[tmplName];\n\t  }\n\t  if (!tmplFns) {\n\t    var isObj = utils.isObject(tmpl),\n\t        fns;\n\t    if (isObj && tmpl.main) {\n\t      //直接传入预编译模板\n\t      fns = tmpl;\n\t    } else {\n\t      //编译AST\n\t      var root;\n\t      if (tmplName) {\n\t        root = nj.asts[tmplName];\n\t      }\n\t      if (!root) {\n\t        //Can be directly introduced into the AST\n\t        if (isObj && tmpl.type === 'nj_root') {\n\t          root = tmpl;\n\t        } else {\n\t          root = _createAstRoot();\n\t\n\t          //Auto transform string template to array\n\t          if (utils.isString(tmpl)) {\n\t            //Merge all include blocks\n\t            var includeParser = nj.includeParser;\n\t            if (includeParser) {\n\t              tmpl = includeParser(tmpl, fileName);\n\t            }\n\t\n\t            tmpl = compileStringTmpl(tmpl);\n\t          }\n\t          tmpl = tmpl._njTmpl;\n\t\n\t          //分析传入参数并转换为节点树对象\n\t          utils.checkElem(tmpl, root);\n\t        }\n\t\n\t        //保存模板AST编译结果到全局集合中\n\t        if (tmplName) {\n\t          nj.asts[tmplName] = root;\n\t        }\n\t      }\n\t\n\t      fns = buildRuntime(root.content, !outputH);\n\t    }\n\t\n\t    tmplFns = utils.template(fns);\n\t\n\t    //保存模板函数编译结果到全局集合中\n\t    if (tmplName) {\n\t      nj.templates[tmplName] = tmplFns;\n\t    }\n\t  }\n\t\n\t  return tmplFns.main;\n\t}\n\t\n\t//Create template root object\n\tfunction _createAstRoot() {\n\t  var root = utils.lightObj();\n\t  root.type = 'nj_root';\n\t  root.content = [];\n\t\n\t  return root;\n\t}\n\t\n\t//编译字面量并返回组件转换函数\n\tfunction compileH(tmpl, tmplName) {\n\t  return compile(tmpl, tmplName, true);\n\t}\n\t\n\t//Precompile template\n\tfunction precompile(tmpl, outputH) {\n\t  var root = _createAstRoot();\n\t\n\t  if (utils.isString(tmpl)) {\n\t    tmpl = compileStringTmpl(tmpl);\n\t  }\n\t  tmpl = tmpl._njTmpl;\n\t  utils.checkElem(tmpl, root);\n\t\n\t  return buildRuntime(root.content, !outputH);\n\t}\n\t\n\tmodule.exports = {\n\t  compile: compile,\n\t  compileH: compileH,\n\t  precompile: precompile\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    utils = __webpack_require__(2),\n\t    errorTitle = nj.errorTitle,\n\t    exprConfig = utils.exprConfig,\n\t    filterConfig = utils.filterConfig,\n\t    replaceSpecialSymbol = __webpack_require__(15);\n\t\n\tfunction _buildFn(content, fns, no, newContext, level) {\n\t  var fnStr = '',\n\t      useString = fns.useString,\n\t      isTmplExpr = utils.isString(no),\n\t      //如果no为字符串, 则本次将构建tmpl块模板函数\n\t  main = isTmplExpr || no === 0,\n\t\n\t  /* retType\r\n\t   1: 只有单个子节点\r\n\t   2: 有多个子节点\r\n\t   object: 非构建函数时\r\n\t  */\n\t  retType = content.length === 1 ? '1' : '2',\n\t      counter = {\n\t    _type: 0,\n\t    _typeRefer: 0,\n\t    _params: 0,\n\t    _paramsE: 0,\n\t    _compParam: 0,\n\t    _dataRefer: 0,\n\t    _expr: 0,\n\t    _value: 0,\n\t    _filter: 0,\n\t    newContext: newContext\n\t  };\n\t\n\t  if (!useString) {\n\t    counter._compParam = 0;\n\t  } else {\n\t    counter._children = 0;\n\t  }\n\t\n\t  if (!main && newContext) {\n\t    fnStr += 'p2 = p1.newContext(p2, p3);\\n';\n\t  }\n\t\n\t  if (retType === '2') {\n\t    if (!useString) {\n\t      fnStr += 'var ret = [];\\n';\n\t    } else {\n\t      fnStr += 'var ret = \\'\\';\\n';\n\t    }\n\t  }\n\t\n\t  fnStr += _buildContent(content, fns, counter, retType, level);\n\t\n\t  if (retType === '2') {\n\t    fnStr += 'return ret;';\n\t  }\n\t\n\t  /* 构建块表达式函数\r\n\t   p1: 模板全局数据\r\n\t   p2: 节点上下文数据\r\n\t   p3: 块表达式内调用result及inverse方法传递的参数\r\n\t   p4: #props块变量\r\n\t  */\n\t  fns[main ? 'main' + (isTmplExpr ? no : '') : 'fn' + no] = new Function('p1', 'p2', 'p3', 'p4', fnStr);\n\t  return no;\n\t}\n\t\n\tfunction _buildOptions(config, node, fns, exprPropsStr, level) {\n\t  var hashStr = '',\n\t      noConfig = !config;\n\t\n\t  if (noConfig || config.useString) {\n\t    hashStr += ', useString: p1.useString';\n\t  }\n\t  if (node) {\n\t    var newContext = config ? config.newContext : true;\n\t    if (noConfig || config.exprProps) {\n\t      hashStr += ', exprProps: ' + exprPropsStr;\n\t    }\n\t\n\t    hashStr += ', result: ' + (node.content ? 'p1.exprRet(p1, p2, p1.fn' + _buildFn(node.content, fns, ++fns._no, newContext, level) + ', ' + exprPropsStr + ')' : 'p1.noop');\n\t    hashStr += ', inverse: ' + (node.contentElse ? 'p1.exprRet(p1, p2, p1.fn' + _buildFn(node.contentElse, fns, ++fns._no, newContext, level) + ', ' + exprPropsStr + ')' : 'p1.noop');\n\t  }\n\t\n\t  return hashStr.length ? '{ _njOpts: true' + hashStr + ' }' : '';\n\t}\n\t\n\tfunction _buildPropData(obj, counter, fns, noEscape) {\n\t  var dataValueStr,\n\t      useString = fns.useString,\n\t      escape = !noEscape ? obj.escape : false;\n\t\n\t  //先生成数据值\n\t  if (!obj.prop.isStr) {\n\t    var name = obj.prop.name,\n\t        parentNum = obj.prop.parentNum,\n\t        data = '',\n\t        special = false,\n\t        specialP = false;\n\t\n\t    if (name === '@index') {\n\t      data = 'index';\n\t      special = true;\n\t    } else if (name === 'this') {\n\t      data = 'data[0]';\n\t      special = true;\n\t    }\n\t\n\t    if (parentNum) {\n\t      if (!data) {\n\t        data = 'data';\n\t      }\n\t      for (var i = 0; i < parentNum; i++) {\n\t        data = 'parent.' + data;\n\t      }\n\t\n\t      if (!special) {\n\t        specialP = true;\n\t      }\n\t    }\n\t\n\t    if (!special && !specialP) {\n\t      dataValueStr = 'p1.getData(p2.data, \\'' + name + '\\')';\n\t    } else {\n\t      var dataStr = 'p2.' + data;\n\t      dataValueStr = special ? dataStr : 'p1.getData(' + dataStr + ', \\'' + name + '\\')';\n\t    }\n\t  } else {\n\t    dataValueStr = '\\'' + obj.prop.name + '\\'';\n\t  }\n\t\n\t  //有过滤器时需要生成\"_value\"值\n\t  var filters = obj.prop.filters;\n\t  if (filters) {\n\t    var valueStr = '_value' + counter._value++,\n\t        filterStr = 'var ' + valueStr + ' = ' + dataValueStr + ';\\n';\n\t\n\t    utils.each(filters, function (o) {\n\t      var _filterC = counter._filter++,\n\t          configF = filterConfig[o.name],\n\t          filterVarStr = '_filter' + _filterC,\n\t          globalFilterStr = 'p1.filters[\\'' + o.name + '\\']';\n\t\n\t      if (configF) {\n\t        filterStr += '\\nvar ' + filterVarStr + ' = ' + globalFilterStr + ';\\n';\n\t      } else {\n\t        //如果全局配置不存在,先从p2.data中获取\n\t        filterStr += '\\nvar ' + filterVarStr + ' = p1.getData(p2.data, \\'' + o.name + '\\');\\n';\n\t        filterStr += 'if(!' + filterVarStr + ') ' + filterVarStr + ' = ' + globalFilterStr + ';\\n';\n\t      }\n\t      filterStr += 'if (!' + filterVarStr + ') {\\n';\n\t      filterStr += '  p1.warn(\\'' + o.name + '\\', \\'filter\\');\\n';\n\t      filterStr += '}\\n';\n\t      filterStr += 'else {\\n';\n\t      filterStr += '  ' + valueStr + ' = ' + filterVarStr + '.apply(p2, [' + valueStr + (o.params ? o.params.reduce(function (p, c) {\n\t        return p + ', \\'' + c + '\\'';\n\t      }, '') : '') + ', ' + _buildOptions(configF) + ']);\\n';\n\t      filterStr += '}\\n';\n\t    }, false, true);\n\t\n\t    return {\n\t      valueStr: _buildEscape(valueStr, useString, escape),\n\t      filterStr: filterStr\n\t    };\n\t  } else {\n\t    return _buildEscape(dataValueStr, useString, escape);\n\t  }\n\t}\n\t\n\tfunction _buildEscape(valueStr, useString, escape) {\n\t  if (useString && escape) {\n\t    return 'p1.escape(' + valueStr + ')';\n\t  } else {\n\t    return valueStr;\n\t  }\n\t}\n\t\n\tfunction _buildProps(obj, counter, fns) {\n\t  var str0 = obj.strs[0],\n\t      valueStr = '',\n\t      filterStr = '';\n\t\n\t  if (utils.isString(str0)) {\n\t    //常规属性\n\t    valueStr = !obj.isAll && str0 !== '' ? '\\'' + str0 + '\\'' : '';\n\t    filterStr = '';\n\t\n\t    utils.each(obj.props, function (o, i) {\n\t      var propData = _buildPropData(o, counter, fns),\n\t          dataValueStr;\n\t      if (utils.isString(propData)) {\n\t        dataValueStr = propData;\n\t      } else {\n\t        dataValueStr = propData.valueStr;\n\t        filterStr += propData.filterStr;\n\t      }\n\t\n\t      if (!obj.isAll) {\n\t        var strI = obj.strs[i + 1];\n\t        dataValueStr = (str0 === '' && i == 0 ? '' : ' + ') + '(' + dataValueStr + ')' + (strI !== '' ? ' + \\'' + strI + '\\'' : '');\n\t      } else if (obj.isTmplPlace) {\n\t        //执行tmpl块模板函数\n\t        dataValueStr += '.call({ _njParent: p2, _njIndex: p2.index }, p2.data)';\n\t      }\n\t\n\t      valueStr += dataValueStr;\n\t      if (obj.isAll) {\n\t        return false;\n\t      }\n\t    }, false, true);\n\t  } else if (utils.isObject(str0) && str0.length != null) {\n\t    //tmpl块表达式\n\t    valueStr += '{\\n';\n\t    utils.each(str0, function (v, k, i, l) {\n\t      if (k !== 'length') {\n\t        valueStr += '  \"' + k + '\": p1.main' + _buildFn(v.content, fns, 'T' + ++fns._noT);\n\t      } else {\n\t        valueStr += '  length: ' + v;\n\t      }\n\t      if (i < l - 1) {\n\t        valueStr += ',';\n\t      }\n\t      valueStr += '\\n';\n\t    }, false, false);\n\t    valueStr += '}';\n\t  } else if (utils.isObject(str0) && str0._njEx) {\n\t    valueStr = str0._njEx;\n\t  } else {\n\t    //非字符串值\n\t    //The \"_njShim\" property is used to distinguish whether the incoming is an normal array.\n\t    valueStr = JSON.stringify(str0._njShim ? str0._njShim : str0);\n\t  }\n\t\n\t  if (filterStr === '') {\n\t    return valueStr;\n\t  } else {\n\t    //包含过滤器\n\t    return {\n\t      valueStr: valueStr,\n\t      filterStr: filterStr\n\t    };\n\t  }\n\t}\n\t\n\tfunction _buildNode(node, fns, counter, retType, level) {\n\t  var fnStr = '',\n\t      useString = fns.useString;\n\t\n\t  if (node.type === 'nj_plaintext') {\n\t    //文本节点\n\t    var valueStr = _buildProps(node.content[0], counter, fns),\n\t        filterStr;\n\t    if (utils.isObject(valueStr)) {\n\t      filterStr = valueStr.filterStr;\n\t      valueStr = valueStr.valueStr;\n\t    }\n\t\n\t    var textStr = _buildRender(1, retType, { text: valueStr }, fns, level);\n\t    if (filterStr) {\n\t      textStr = filterStr + textStr;\n\t    }\n\t\n\t    if (useString) {\n\t      fnStr += textStr;\n\t    } else {\n\t      //文本中的特殊字符需转义\n\t      fnStr += replaceSpecialSymbol(textStr);\n\t    }\n\t  } else if (node.type === 'nj_expr') {\n\t    //块表达式节点\n\t    var _exprC = counter._expr++,\n\t        _dataReferC = counter._dataRefer++,\n\t        dataReferStr = '',\n\t        filterStr = '',\n\t        configE = exprConfig[node.expr],\n\t        exprVarStr = '_expr' + _exprC,\n\t        globalExprStr = 'p1.exprs[\\'' + node.expr + '\\']';\n\t\n\t    if (configE) {\n\t      fnStr += '\\nvar ' + exprVarStr + ' = ' + globalExprStr + ';\\n';\n\t    } else {\n\t      //如果全局配置不存在,先从p2.data中获取\n\t      fnStr += '\\nvar ' + exprVarStr + ' = p1.getData(p2.data, \\'' + node.expr + '\\');\\n';\n\t      fnStr += 'if(!' + exprVarStr + ') ' + exprVarStr + ' = ' + globalExprStr + ';\\n';\n\t    }\n\t\n\t    dataReferStr += 'var _dataRefer' + _dataReferC + ' = [\\n';\n\t\n\t    if (node.refer) {\n\t      var props = node.refer.props;\n\t      utils.each(props, function (o, i) {\n\t        var valueStr = _buildPropData(o, counter, fns, true);\n\t        if (utils.isObject(valueStr)) {\n\t          filterStr += valueStr.filterStr;\n\t          valueStr = valueStr.valueStr;\n\t        }\n\t\n\t        dataReferStr += '  ' + valueStr + ',';\n\t      }, false, true);\n\t    }\n\t\n\t    //props块\n\t    var exprPropsStr = 'p4';\n\t    if (retType && retType._paramsE) {\n\t      exprPropsStr = retType._paramsE;\n\t    }\n\t\n\t    dataReferStr += _buildOptions(configE, node, fns, exprPropsStr, level);\n\t    dataReferStr += '\\n];\\n';\n\t\n\t    if (filterStr !== '') {\n\t      dataReferStr = filterStr + dataReferStr;\n\t    }\n\t\n\t    fnStr += dataReferStr;\n\t\n\t    //如果块表达式不存在则打印警告信息\n\t    fnStr += 'p1.throwIf(_expr' + _exprC + ', \\'' + node.expr + '\\', \\'expr\\');\\n';\n\t\n\t    //渲染\n\t    fnStr += _buildRender(2, retType, {\n\t      _expr: _exprC,\n\t      _dataRefer: _dataReferC\n\t    }, fns, level);\n\t  } else {\n\t    //元素节点\n\t    //节点类型和typeRefer\n\t    var _typeC = counter._type++,\n\t        _type;\n\t    if (node.typeRefer) {\n\t      _type = node.typeRefer.props[0].prop.name;\n\t    } else {\n\t      _type = node.type;\n\t    }\n\t\n\t    var typeStr;\n\t    if (!useString) {\n\t      typeStr = 'p1.components[\\'' + _type.toLowerCase() + '\\'] ? p1.components[\\'' + _type.toLowerCase() + '\\'] : \\'' + _type + '\\'';\n\t    } else {\n\t      typeStr = '\\'' + _type + '\\'';\n\t    }\n\t\n\t    if (node.typeRefer) {\n\t      var _typeReferC = counter._typeRefer++,\n\t          valueStrT = _buildProps(node.typeRefer, counter, fns);\n\t      if (utils.isObject(valueStrT)) {\n\t        fnStr += valueStrT.filterStr;\n\t        valueStrT = valueStrT.valueStr;\n\t      }\n\t\n\t      fnStr += '\\nvar _typeRefer' + _typeReferC + ' = ' + valueStrT + ';\\n';\n\t      fnStr += 'var _type' + _typeC + ' = _typeRefer' + _typeReferC + ' ? _typeRefer' + _typeReferC + ' : (' + typeStr + ');\\n';\n\t    } else {\n\t      fnStr += '\\nvar _type' + _typeC + ' = ' + typeStr + ';\\n';\n\t    }\n\t\n\t    //节点参数\n\t    var params = node.params,\n\t        paramsExpr = node.paramsExpr,\n\t        paramsStr = '';\n\t    if (params || paramsExpr) {\n\t      var _paramsC = counter._params++;\n\t      paramsStr = 'var _params' + _paramsC + ' = ';\n\t\n\t      //params块\n\t      if (paramsExpr) {\n\t        var _paramsEC = counter._paramsE++;\n\t        paramsStr += (useString ? '\\'\\'' : 'null') + ';\\n';\n\t        paramsStr += 'var _paramsE' + _paramsEC + ' = {};\\n';\n\t\n\t        //params块的子节点\n\t        paramsStr += _buildContent(paramsExpr.content, fns, counter, { _paramsE: '_paramsE' + _paramsEC });\n\t\n\t        //合并params块的值\n\t        if (!useString) {\n\t          paramsStr += '\\n_params' + _paramsC + ' = _paramsE' + _paramsEC + ';\\n';\n\t          //paramsStr += '\\np1.assign(_params' + _paramsC + ', _paramsE' + _paramsEC + ');\\n';\n\t        } else {\n\t          var keys = '';\n\t          utils.each(params, function (v, k, i, l) {\n\t            if (i == 0) {\n\t              keys += '{ ';\n\t            }\n\t            keys += k + ': 1';\n\t\n\t            if (i < l - 1) {\n\t              keys += ', ';\n\t            } else {\n\t              keys += ' }';\n\t            }\n\t          }, false, false);\n\t          paramsStr += '_params' + _paramsC + ' += p1.assignStringProp(_paramsE' + _paramsEC + ', ' + (keys === '' ? 'null' : keys) + ');\\n';\n\t        }\n\t      }\n\t\n\t      if (params) {\n\t        var paramKeys = Object.keys(params),\n\t            len = paramKeys.length,\n\t            filterStr = '';\n\t\n\t        if (!useString && !paramsExpr) {\n\t          paramsStr += '{\\n';\n\t        }\n\t\n\t        utils.each(paramKeys, function (k, i) {\n\t          var valueStr = _buildProps(params[k], counter, fns);\n\t          if (utils.isObject(valueStr)) {\n\t            filterStr += valueStr.filterStr;\n\t            valueStr = valueStr.valueStr;\n\t          }\n\t\n\t          if (!useString && k === 'style') {\n\t            //将style字符串转换为对象\n\t            valueStr = 'p1.styleProps(' + valueStr + ')';\n\t          }\n\t\n\t          var key = k,\n\t              onlyKey = '\\'' + key + '\\'' === valueStr;\n\t          if (!useString) {\n\t            key = utils.fixPropName(k);\n\t          }\n\t          if (!paramsExpr) {\n\t            if (!useString) {\n\t              paramsStr += '  \\'' + key + '\\': ' + (!onlyKey ? valueStr : 'true') + (i < len - 1 ? ',\\n' : '');\n\t            } else {\n\t              paramsStr += (i > 0 ? '  + ' : '') + '\\' ' + key + (!onlyKey ? '=\"\\' + ' + valueStr + ' + \\'\"\\'' : ' \\'') + (i == len - 1 ? ';' : '') + '\\n';\n\t            }\n\t          } else {\n\t            if (!useString) {\n\t              paramsStr += '_params' + _paramsC + '[\\'' + key + '\\'] = ' + (!onlyKey ? valueStr : 'true') + ';\\n';\n\t            } else {\n\t              paramsStr += '_params' + _paramsC + ' += \\' ' + key + (!onlyKey ? '=\"\\' + ' + valueStr + ' + \\'\"\\'' : ' \\'') + ';\\n';\n\t            }\n\t          }\n\t        }, false, false);\n\t\n\t        if (!useString && !paramsExpr) {\n\t          paramsStr += '\\n};\\n';\n\t        }\n\t\n\t        if (filterStr !== '') {\n\t          paramsStr = filterStr + paramsStr;\n\t        }\n\t      }\n\t\n\t      fnStr += paramsStr;\n\t    }\n\t\n\t    var _compParamC, _childrenC;\n\t    if (!useString) {\n\t      //组件引擎参数\n\t      _compParamC = counter._compParam++;\n\t      fnStr += 'var _compParam' + _compParamC + ' = [_type' + _typeC + ', ' + (paramsStr !== '' ? '_params' + _paramsC : 'null') + '];\\n';\n\t    } else {\n\t      //子节点字符串\n\t      _childrenC = counter._children++;\n\t      fnStr += 'var _children' + _childrenC + ' = \\'\\';\\n';\n\t    }\n\t\n\t    //子节点\n\t    fnStr += _buildContent(node.content, fns, counter, !useString ? { _compParam: '_compParam' + _compParamC } : { _children: '_children' + _childrenC }, level != null ? level + 1 : level);\n\t\n\t    //渲染\n\t    fnStr += _buildRender(3, retType, !useString ? { _compParam: _compParamC } : { _type: _typeC, _params: paramsStr !== '' ? _paramsC : null, _children: _childrenC, _selfClose: node.selfCloseTag }, fns, level);\n\t  }\n\t\n\t  return fnStr;\n\t}\n\t\n\tfunction _buildContent(content, fns, counter, retType, level) {\n\t  var fnStr = '';\n\t  if (!content) {\n\t    return fnStr;\n\t  }\n\t\n\t  utils.each(content, function (node) {\n\t    fnStr += _buildNode(node, fns, counter, retType, level);\n\t  }, false, true);\n\t\n\t  return fnStr;\n\t}\n\t\n\tfunction _buildRender(nodeType, retType, params, fns, level) {\n\t  var retStr,\n\t      useString = fns.useString;\n\t\n\t  switch (nodeType) {\n\t    case 1:\n\t      //文本节点\n\t      retStr = _buildLevelSpace(level, useString) + params.text + (!useString || level == null ? '' : ' + \\'\\\\n\\'');\n\t      break;\n\t    case 2:\n\t      //块表达式\n\t      retStr = '_expr' + params._expr + '.apply(p2, _dataRefer' + params._dataRefer + ')';\n\t      break;\n\t    case 3:\n\t      //元素节点\n\t      if (!useString) {\n\t        retStr = 'p1.h.apply(null, _compParam' + params._compParam + ')';\n\t      } else {\n\t        var levelSpace = _buildLevelSpace(level, useString);\n\t        retStr = levelSpace + '\\'<\\' + _type' + params._type + ' + ' + (params._params != null ? '_params' + params._params + ' + ' : '');\n\t        if (!params._selfClose) {\n\t          retStr += '\\'>\\\\n\\'';\n\t          retStr += ' + _children' + params._children + ' + ';\n\t          retStr += levelSpace + '\\'</\\' + _type' + params._type + ' + \\'>\\\\n\\'';\n\t        } else {\n\t          retStr += '\\' />\\\\n\\'';\n\t        }\n\t      }\n\t      break;\n\t  }\n\t\n\t  //保存方式\n\t  if (retType === '1') {\n\t    return '\\nreturn ' + retStr + ';';\n\t  } else if (retType === '2') {\n\t    if (!useString) {\n\t      return '\\nret.push(' + retStr + ');\\n';\n\t    } else {\n\t      return '\\nret += ' + retStr + ';\\n';\n\t    }\n\t  } else if (retType._paramsE) {\n\t    return '\\n' + retStr + ';\\n';\n\t  } else {\n\t    if (!useString) {\n\t      return '\\n' + retType._compParam + '.push(' + retStr + ');\\n';\n\t    } else {\n\t      return '\\n' + retType._children + ' += ' + retStr + ';\\n';\n\t    }\n\t  }\n\t}\n\t\n\tfunction _buildLevelSpace(level, useString) {\n\t  var ret = '';\n\t  if (useString && level != null && level > 0) {\n\t    ret += '\\'';\n\t    for (var i = 0; i < level; i++) {\n\t      ret += '  ';\n\t    }\n\t    ret += '\\' + ';\n\t  }\n\t  return ret;\n\t}\n\t\n\tmodule.exports = function (ast, useString) {\n\t  var fns = {\n\t    useString: useString,\n\t    _no: 0, //块表达式函数计数\n\t    _noT: 0 //tmpl块模板函数计数\n\t  };\n\t\n\t  _buildFn(ast, fns, fns._no, null, 0);\n\t  return fns;\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar SPACIAL_SYMBOLS = {\n\t  nbsp: '\\xA0',\n\t  ensp: '\\u2002',\n\t  emsp: '\\u2003',\n\t  thinsp: '\\u2009',\n\t  zwnj: '\\u200C',\n\t  zwj: '\\u200D',\n\t  lt: '<',\n\t  gt: '>',\n\t  amp: '&'\n\t};\n\t\n\tvar REGEX_SYMBOLS = new RegExp('&(' + Object.keys(SPACIAL_SYMBOLS).join('|') + ');', 'g');\n\tfunction replace(str) {\n\t  return str.replace(REGEX_SYMBOLS, function (all, match) {\n\t    return SPACIAL_SYMBOLS[match];\n\t  });\n\t}\n\t\n\tmodule.exports = replace;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    tools = __webpack_require__(3),\n\t    tranElem = __webpack_require__(4),\n\t    tmplRule = nj.tmplRule,\n\t    shim = __webpack_require__(17),\n\t    tmplStrs = nj.tmplStrs;\n\t\n\t//Compile string template\n\tfunction compileStringTmpl(tmpl) {\n\t  var tmplKey = tmpl.toString(),\n\t      //Get unique key\n\t  ret = tmplStrs[tmplKey];\n\t\n\t  if (!ret) {\n\t    //If the cache already has template data, direct return the template.\n\t    var isStr = tools.isString(tmpl),\n\t        xmls = tmpl,\n\t        args = arguments,\n\t        splitNo = 0,\n\t        params = [],\n\t        fullXml = '',\n\t        exArgs;\n\t\n\t    if (isStr) {\n\t      xmls = tmpl.split(tmplRule.externalSplit);\n\t\n\t      var pattern = tmplRule.external(),\n\t          matchArr;\n\t      exArgs = [];\n\t      while (matchArr = pattern.exec(tmpl)) {\n\t        exArgs.push(matchArr[1]);\n\t      }\n\t    }\n\t\n\t    //Connection xml string\n\t    var l = xmls.length;\n\t    tools.each(xmls, function (xml, i) {\n\t      var split = '';\n\t      if (i < l - 1) {\n\t        var last = xml.length - 1,\n\t            useShim = xml[last] === '@',\n\t            arg,\n\t            isEx;\n\t\n\t        if (isStr) {\n\t          var exArg = exArgs[i],\n\t              match = exArg.match(/#(\\d+)/);\n\t\n\t          if (match && match[1] != null) {\n\t            //分隔符格式为\"${#x}\", 则按其编号顺序从nj函数参数列表中获取\n\t            arg = args[parseInt(match[1], 10) + 1];\n\t          } else {\n\t            arg = exArg;\n\t            useShim = isEx = true;\n\t          }\n\t        } else {\n\t          arg = args[i + 1];\n\t        }\n\t\n\t        if (!tools.isString(arg) || useShim) {\n\t          split = '_nj-split' + splitNo + '_';\n\t\n\t          //Use the shim function to convert the parameter when the front of it with a \"@\" mark.\n\t          if (useShim) {\n\t            if (isEx) {\n\t              arg = shim({ _njEx: arg });\n\t            } else {\n\t              xml = xml.substr(0, last);\n\t              arg = shim(arg);\n\t            }\n\t          }\n\t\n\t          params.push(arg._njTmpl ? arg._njTmpl : arg);\n\t          splitNo++;\n\t        } else {\n\t          split = arg;\n\t        }\n\t      }\n\t\n\t      fullXml += xml + split;\n\t    }, false, true);\n\t\n\t    fullXml = _clearNotesAndBlank(fullXml);\n\t\n\t    //Resolve string to element\n\t    ret = _checkStringElem(fullXml, params);\n\t\n\t    //Save to the cache\n\t    tmplStrs[tmplKey] = ret;\n\t  }\n\t\n\t  var outputH = this ? this.outputH : false,\n\t      tmplFn = function tmplFn() {\n\t    return nj['compile' + (outputH ? 'H' : '')]({ _njTmpl: ret }, tmplKey).apply(null, arguments);\n\t  };\n\t  tmplFn._njTmpl = ret;\n\t\n\t  return tmplFn;\n\t}\n\t\n\t//Resolve string to element\n\tfunction _checkStringElem(xml, params) {\n\t  var root = [],\n\t      current = {\n\t    elem: root,\n\t    elemName: 'root',\n\t    parent: null\n\t  },\n\t      parent = null,\n\t      pattern = tmplRule.checkElem(),\n\t      matchArr;\n\t\n\t  while (matchArr = pattern.exec(xml)) {\n\t    var textBefore = matchArr[1],\n\t        elem = matchArr[2],\n\t        elemName = matchArr[3],\n\t        elemParams = matchArr[4],\n\t        textAfter = matchArr[5];\n\t\n\t    //Text before tag\n\t    if (textBefore && textBefore !== '\\n') {\n\t      textBefore = _formatText(textBefore);\n\t      _setText(textBefore, current.elem, params);\n\t    }\n\t\n\t    //Element tag\n\t    if (elem) {\n\t      if (elemName[0] === '/') {\n\t        //Close tag\n\t        if (elemName === '/' + current.elemName) {\n\t          current = current.parent;\n\t        }\n\t      } else if (elem[elem.length - 2] === '/') {\n\t        //Self close tag\n\t        _setSelfCloseElem(elem, elemName, elemParams, current.elem, params);\n\t      } else {\n\t        //Open tag\n\t        parent = current;\n\t        current = {\n\t          elem: [],\n\t          elemName: elemName,\n\t          parent: parent\n\t        };\n\t\n\t        parent.elem.push(current.elem);\n\t        _setElem(elem, elemName, elemParams, current.elem, params);\n\t      }\n\t    }\n\t\n\t    //Text after tag\n\t    if (textAfter && textAfter !== '\\n') {\n\t      textAfter = _formatText(textAfter);\n\t      _setText(textAfter, current.elem, params);\n\t    }\n\t  }\n\t\n\t  return root;\n\t}\n\t\n\tfunction _clearNotesAndBlank(str) {\n\t  return str.replace(/<!--[\\s\\S]*?-->/g, '').replace(/>\\s+([^\\s<]*)\\s+</g, '>$1<').trim();\n\t}\n\t\n\tfunction _formatText(str) {\n\t  return str.replace(/\\n/g, '\\\\n').replace(/\\r/g, '').trim();\n\t}\n\t\n\t//Set element node\n\tfunction _setElem(elem, elemName, elemParams, elemArr, params, bySelfClose) {\n\t  var ret, paramsExpr;\n\t  if (elemName[0] === tmplRule.exprRule) {\n\t    ret = elem.substring(1, elem.length - 1);\n\t  } else if (elemName.indexOf(tmplRule.propRule) === 0) {\n\t    ret = tmplRule.exprRule + 'prop {\\'' + elemName.substr(tmplRule.propRule.length) + '\\'}' + elemParams;\n\t  } else {\n\t    var retS = _getSplitParams(elem, params);\n\t    ret = retS.elem;\n\t    paramsExpr = retS.params;\n\t  }\n\t\n\t  if (bySelfClose) {\n\t    var retC = [ret];\n\t    if (paramsExpr) {\n\t      retC.push(paramsExpr);\n\t    }\n\t\n\t    elemArr.push(retC);\n\t  } else {\n\t    elemArr.push(ret);\n\t    if (paramsExpr) {\n\t      elemArr.push(paramsExpr);\n\t    }\n\t  }\n\t}\n\t\n\t//Extract split parameters\n\tfunction _getSplitParams(elem, params) {\n\t  var exprRule = tmplRule.exprRule,\n\t      startRule = tmplRule.startRule,\n\t      endRule = tmplRule.endRule,\n\t      paramsExpr;\n\t\n\t  //Replace the parameter like \"prop=_nj-split0_\".\n\t  elem = elem.replace(/([^\\s={}>]+)=['\"]?_nj-split(\\d+)_['\"]?/g, function (all, key, no) {\n\t    if (!paramsExpr) {\n\t      paramsExpr = [exprRule + 'params'];\n\t    }\n\t\n\t    paramsExpr.push([exprRule + \"param \" + startRule + \"'\" + key + \"'\" + endRule, params[no]]);\n\t    return '';\n\t  });\n\t\n\t  //Replace the parameter like \"{...props}\".\n\t  elem = elem.replace(tmplRule.spreadProp, function (all, begin, prop) {\n\t    prop = prop.trim();\n\t\n\t    if (!paramsExpr) {\n\t      paramsExpr = [exprRule + 'props'];\n\t    }\n\t\n\t    paramsExpr.push([exprRule + 'spread ' + startRule + prop.replace(/\\.\\.\\./g, '') + endRule + '/']);\n\t    return ' ';\n\t  });\n\t\n\t  return {\n\t    elem: elem,\n\t    params: paramsExpr\n\t  };\n\t}\n\t\n\t//Set self close element node\n\tfunction _setSelfCloseElem(elem, elemName, elemParams, elemArr, params) {\n\t  if (elemName === tmplRule.exprRule + 'else') {\n\t    elemArr.push(elem.substr(1, 5));\n\t  } else {\n\t    _setElem(elem, elemName, elemParams, elemArr, params, true);\n\t  }\n\t}\n\t\n\t//Set text node\n\tfunction _setText(text, elemArr, params) {\n\t  var pattern = /_nj-split(\\d+)_/g,\n\t      matchArr,\n\t      splitNos = [];\n\t\n\t  while (matchArr = pattern.exec(text)) {\n\t    splitNos.push(matchArr[1]);\n\t  }\n\t\n\t  if (splitNos.length) {\n\t    tools.each(text.split(/_nj-split(?:\\d+)_/), function (t) {\n\t      if (t !== '') {\n\t        elemArr.push(t);\n\t      }\n\t\n\t      var no = splitNos.shift();\n\t      if (no != null) {\n\t        elemArr.push(params[no]);\n\t      }\n\t    }, false, true);\n\t  } else {\n\t    elemArr.push(text);\n\t  }\n\t}\n\t\n\tmodule.exports = compileStringTmpl;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t//Converts any value to the parameter of NornJ template can be parsed.\n\t\n\tmodule.exports = function (obj) {\n\t  return {\n\t    _njShim: obj\n\t  };\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar compileStringTmpl = __webpack_require__(16);\n\t\n\tmodule.exports = {\n\t  tmplTag: function tmplTag() {\n\t    return compileStringTmpl.apply({ outputH: false }, arguments);\n\t  },\n\t  tmplTagH: function tmplTagH() {\n\t    return compileStringTmpl.apply({ outputH: true }, arguments);\n\t  }\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar nj = __webpack_require__(1),\n\t    setTmplRule = __webpack_require__(12);\n\t\n\tmodule.exports = function (configs) {\n\t  var delimiters = configs.delimiters,\n\t      includeParser = configs.includeParser,\n\t      createElement = configs.createElement,\n\t      outputH = configs.outputH;\n\t\n\t  if (delimiters) {\n\t    setTmplRule(delimiters);\n\t  }\n\t\n\t  if (includeParser) {\n\t    nj.includeParser = includeParser;\n\t  }\n\t\n\t  if (createElement) {\n\t    nj.createElement = createElement;\n\t  }\n\t\n\t  if (outputH != null) {\n\t    nj.outputH = outputH;\n\t  }\n\t};\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// nornj.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3fd77b8e9aee447679c9","'use strict';\r\n\r\nvar nj = require('./core'),\r\n  utils = require('./utils/utils'),\r\n  compiler = require('./compiler/compile'),\r\n  compileStringTmpl = require('./parser/checkStringElem'),\r\n  tmplTag = require('./utils/tmplTag'),\r\n  config = require('./config');\r\n\r\nnj.compileStringTmpl = compileStringTmpl;\r\nnj.config = config;\r\nutils.assign(nj, compiler, tmplTag, utils);\r\n\r\nvar _global = typeof self !== 'undefined' ? self : global;\r\n\r\nmodule.exports = _global.NornJ = _global.nj = nj;\n\n\n// WEBPACK FOOTER //\n// ./src/base.js","'use strict';\r\n\r\nfunction nj() {\r\n  return nj['tmplTag' + (nj.outputH ? 'H' : '')].apply(null, arguments);\r\n}\r\n\r\nnj.createElement = null;\r\nnj.components = {};\r\nnj.asts = {};\r\nnj.templates = {};\r\nnj.tmplStrs = {};\r\nnj.errorTitle = '[NornJ error]';\r\nnj.tmplRule = {};\r\nnj.outputH = false;\r\n\r\nmodule.exports = nj;\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","'use strict';\r\n\r\nvar tools = require('./tools'),\r\n  transformElement = require('../transforms/transformElement'),\r\n  transformParam = require('../transforms/transformParam'),\r\n  transformData = require('../transforms/transformData'),\r\n  escape = require('./escape'),\r\n  checkElem = require('../parser/checkElem'),\r\n  registerComponent = require('./registerComponent'),\r\n  filter = require('../helpers/filter'),\r\n  expression = require('../helpers/expression'),\r\n  setTmplRule = require('./setTmplRule');\r\n\r\n//Set default param rule\r\nsetTmplRule();\r\n\r\nmodule.exports = tools.assign(\r\n  {\r\n    escape,\r\n    setTmplRule\r\n  },\r\n  checkElem,\r\n  registerComponent,\r\n  filter,\r\n  expression,\r\n  tools,\r\n  transformElement,\r\n  transformParam,\r\n  transformData\r\n);\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  nativeArrayPush = Array.prototype.push,\r\n  nativeArraySlice = Array.prototype.slice,\r\n  hasOwnProperty = Object.prototype.hasOwnProperty,\r\n  errorTitle = nj.errorTitle;\r\n\r\n//Push one by one to array\r\nfunction arrayPush(arr1, arr2) {\r\n  nativeArrayPush.apply(arr1, arr2);\r\n  return arr1;\r\n}\r\n\r\nfunction arraySlice(arrLike) {\r\n  return nativeArraySlice.call(arrLike);\r\n}\r\n\r\n//判断是否为数组\r\nfunction isArray(obj) {\r\n  return Array.isArray(obj);\r\n}\r\n\r\n//判断是否为对象\r\nfunction isObject(obj) {\r\n  var type = typeof obj;\r\n  return !isArray(obj) && (type === 'function' || type === 'object' && !!obj);\r\n}\r\n\r\n//判断是否为字符串\r\nfunction isString(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object String]';\r\n}\r\n\r\n//获取属性值\r\nfunction _getProperty(key) {\r\n  return function(obj) {\r\n    return obj == null ? void 0 : obj[key];\r\n  };\r\n}\r\n\r\n//是否为类数组\r\nvar _getLength = _getProperty('length');\r\n\r\nfunction isArrayLike(obj) {\r\n  var length = _getLength(obj);\r\n  return typeof length == 'number' && length >= 0;\r\n}\r\n\r\n//遍历数组或对象\r\nfunction each(obj, func, context, isArr) {\r\n  if (!obj) {\r\n    return;\r\n  }\r\n\r\n  if (isArr == null) {\r\n    isArr = isArrayLike(obj);\r\n  }\r\n\r\n  //设置回调函数上下文\r\n  context = context ? context : obj;\r\n\r\n  if (isArr) {\r\n    for (var i = 0, l = obj.length; i < l; i++) {\r\n      var ret = func.call(context, obj[i], i);\r\n\r\n      if (ret === false) {\r\n        break;\r\n      }\r\n    }\r\n  } else {\r\n    var keys = Object.keys(obj),\r\n      l = keys.length;\r\n    for (var i = 0; i < l; i++) {\r\n      var k = keys[i],\r\n        ret = func.call(context, obj[k], k, i, l);\r\n\r\n      if (ret === false) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n//Transform multidimensional array to one-dimensional array\r\nfunction flatten(obj) {\r\n  var output = [],\r\n    idx = 0;\r\n\r\n  if (isArray(obj)) {\r\n    for (var i = 0, l = _getLength(obj); i < l; i++) {\r\n      var value = obj[i];\r\n      //flatten current level of array or arguments object\r\n      value = flatten(value);\r\n\r\n      var j = 0,\r\n        len = value.length;\r\n      output.length += len;\r\n      while (j < len) {\r\n        output[idx++] = value[j++];\r\n      }\r\n    }\r\n  } else {\r\n    output[idx++] = obj;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\n//Noop function\r\nfunction noop() {}\r\n\r\n//抛出异常\r\nfunction throwIf(val, msg, type) {\r\n  if (!val) {\r\n    switch (type) {\r\n      case 'expr':\r\n        throw Error(errorTitle + 'Expression \"' + msg + '\" is undefined, please check it has been registered.');\r\n      default:\r\n        throw Error(errorTitle + (msg || val));\r\n    }\r\n  }\r\n}\r\n\r\n//Print warn\r\nfunction warn(msg, type) {\r\n  var ret = errorTitle;\r\n  switch (type) {\r\n    case 'filter':\r\n      ret += 'A filter called \"' + msg + '\" is undefined.';\r\n      break;\r\n    default:\r\n      ret += msg;\r\n  }\r\n\r\n  console.warn(ret);\r\n}\r\n\r\n//create a unique key\r\nfunction uniqueKey(str, hash) {\r\n  var len = str.length;\r\n  if (len == 0) {\r\n    return str;\r\n  }\r\n  if (hash == null) {\r\n    hash = 0;\r\n  }\r\n\r\n  var i, chr;\r\n  for (i = 0, len = str.length; i < len; i++) {\r\n    chr = str.charCodeAt(i);\r\n    hash = ((hash << 5) - hash) + chr;\r\n    hash |= 0;\r\n  }\r\n\r\n  return hash;\r\n}\r\n\r\n//create light weight object\r\nfunction lightObj() {\r\n  return Object.create(null);\r\n}\r\n\r\n//Clear quotation marks\r\nvar REGEX_QUOT_D = /[\"]+/g,\r\n  REGEX_QUOT_S = /[']+/g;\r\n\r\nfunction clearQuot(value, clearDouble) {\r\n  if (value == null) {\r\n    return;\r\n  }\r\n\r\n  var regex;\r\n  if (clearDouble == null) {\r\n    var charF = value[0];\r\n    if (charF === '\\'') {\r\n      regex = REGEX_QUOT_S;\r\n    } else if (charF === '\"') {\r\n      regex = REGEX_QUOT_D;\r\n    }\r\n  } else if (clearDouble) {\r\n    regex = REGEX_QUOT_D;\r\n  } else {\r\n    regex = REGEX_QUOT_S;\r\n  }\r\n\r\n  if (regex) {\r\n    value = value.replace(regex, '');\r\n  }\r\n  return value;\r\n}\r\n\r\n//Transform to camel-case\r\nfunction toCamelCase(str) {\r\n  if (str.indexOf('-') > -1) {\r\n    str = str.replace(/-\\w/g, function(letter) {\r\n      return letter.substr(1).toUpperCase();\r\n    });\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n//Reference by babel-external-helpers\r\nvar assign = Object.assign || function(target) {\r\n  for (var i = 1, args = arguments; i < args.length; i++) {\r\n    var source = args[i];\r\n\r\n    for (var key in source) {\r\n      if (hasOwnProperty.call(source, key)) {\r\n        target[key] = source[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return target;\r\n};\r\n\r\nvar tools = {\r\n  isArray,\r\n  isArrayLike,\r\n  isObject,\r\n  isString,\r\n  each,\r\n  flatten,\r\n  throwIf,\r\n  assign,\r\n  uniqueKey,\r\n  lightObj,\r\n  arrayPush,\r\n  arraySlice,\r\n  clearQuot,\r\n  toCamelCase,\r\n  warn,\r\n  noop\r\n};\r\n\r\nmodule.exports = tools;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/tools.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('../utils/tools'),\r\n  tranParam = require('./transformParam'),\r\n  tmplRule = nj.tmplRule;\r\n\r\n//提取xml open tag\r\nfunction getXmlOpenTag(obj) {\r\n  return tmplRule.xmlOpenTag.exec(obj);\r\n}\r\n\r\n//验证xml self close tag\r\nvar REGEX_XML_SELF_CLOSE_TAG = /^<[^>]+\\/>$/i;\r\nfunction isXmlSelfCloseTag(obj) {\r\n  return REGEX_XML_SELF_CLOSE_TAG.test(obj);\r\n}\r\n\r\n//Verify self close tag name\r\nvar OMITTED_CLOSE_TAGS = {\r\n  'area': true,\r\n  'base': true,\r\n  'br': true,\r\n  'col': true,\r\n  'embed': true,\r\n  'hr': true,\r\n  'img': true,\r\n  'input': true,\r\n  'keygen': true,\r\n  'link': true,\r\n  'meta': true,\r\n  'param': true,\r\n  'source': true,\r\n  'track': true,\r\n  'wbr': true\r\n};\r\nfunction verifySelfCloseTag(tagName) {\r\n  return OMITTED_CLOSE_TAGS[tagName.toLowerCase()];\r\n}\r\n\r\n//Extract parameters inside the xml open tag\r\nfunction getOpenTagParams(tag) {\r\n  var pattern = tmplRule.openTagParams,\r\n    matchArr, ret;\r\n\r\n  while ((matchArr = pattern.exec(tag))) {\r\n    var key = matchArr[1];\r\n    if (key === '/') {  //If match to the last of \"/\", then continue the loop.\r\n      continue;\r\n    }\r\n\r\n    if (!ret) {\r\n      ret = [];\r\n    }\r\n\r\n    var value = matchArr[7],\r\n      onlyBrace = matchArr[4];\r\n    if (value != null) {\r\n      value = tools.clearQuot(value);  //Remove quotation marks\r\n    }\r\n    else {\r\n      value = key;  //Match to Similar to \"checked\" or \"disabled\" attribute.\r\n    }\r\n\r\n    //Removed at the end of \"/>\", \">\" or \"/\".\r\n    if (/\\/>$/.test(value)) {\r\n      value = value.substr(0, value.length - 2);\r\n    }\r\n    else if (/>$/.test(value) || /\\/$/.test(value)) {\r\n      value = value.substr(0, value.length - 1);\r\n    }\r\n\r\n    ret.push({\r\n      key: key,\r\n      value: value,\r\n      onlyBrace: onlyBrace\r\n    });\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n//判断xml close tag\r\nfunction isXmlCloseTag(obj, tagName) {\r\n  return tools.isString(obj) && obj.toLowerCase() === '</' + tagName + '>';\r\n}\r\n\r\n//get inside brace param\r\nfunction getInsideBraceParam(obj) {\r\n  return tmplRule.insideBraceParam.exec(obj);\r\n}\r\n\r\n//判断块表达式并返回参数\r\nfunction isExpr(obj) {\r\n  var ret, ret1 = tmplRule.expr.exec(obj);\r\n  if (ret1) {\r\n    ret = [ret1[1]];\r\n\r\n    var params = getOpenTagParams(obj);  //提取各参数\r\n    if (params) {\r\n      ret.push(params);\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n//判断块表达式close tag\r\nfunction isExprCloseTag(obj, tagName) {\r\n  return tools.isString(obj) && obj === '/' + tmplRule.exprRule + tagName;\r\n}\r\n\r\n//判断是否模板元素\r\nfunction isTmpl(obj) {\r\n  return obj === 'tmpl';\r\n}\r\n\r\n//加入到模板集合中\r\nfunction addTmpl(node, parent, name) {\r\n  var paramsP = parent.params;\r\n  if (!paramsP) {\r\n    paramsP = parent.params = tools.lightObj();\r\n  }\r\n\r\n  var tmpls = paramsP.tmpls;\r\n  if (!tmpls) {\r\n    var objT = { length: 0 };\r\n    if (name != null) {\r\n      objT[name] = node;\r\n    }\r\n    else {\r\n      objT['0'] = node;\r\n      objT.length = 1;\r\n    }\r\n\r\n    paramsP.tmpls = tranParam.compiledParam(objT);\r\n  }\r\n  else {  //Insert the compiled template to the parameter name for \"tmpls\"'s \"strs\" array.\r\n    var objT = tmpls.strs[0],\r\n      len = objT.length;\r\n\r\n    if (name != null) {\r\n      objT[name] = node;\r\n    }\r\n    else {\r\n      objT[len] = node;\r\n      objT.length = ++len;\r\n    }\r\n  }\r\n}\r\n\r\n//Test whether as parameters expression\r\nfunction isParamsExpr(obj) {\r\n  return obj === 'params' || obj === 'props';\r\n}\r\n\r\n//Add to the \"paramsExpr\" property of the parent node\r\nfunction addParamsExpr(node, parent) {\r\n  if (!parent.paramsExpr) {\r\n    parent.paramsExpr = node;\r\n  }\r\n  else {\r\n    tools.arrayPush(parent.paramsExpr.content, node.content);\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  getXmlOpenTag,\r\n  isXmlSelfCloseTag,\r\n  verifySelfCloseTag,\r\n  getOpenTagParams,\r\n  isXmlCloseTag,\r\n  getInsideBraceParam,\r\n  isExpr,\r\n  isExprCloseTag,\r\n  isTmpl,\r\n  addTmpl,\r\n  isParamsExpr,\r\n  addParamsExpr\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/transforms/transformElement.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('../utils/tools'),\r\n  tmplRule = nj.tmplRule;\r\n\r\n//Get compiled parameters from a object\r\nfunction compiledParams(obj) {\r\n  var ret = tools.lightObj();\r\n  tools.each(obj, function (v, k) {\r\n    ret[k] = compiledParam(v);\r\n  }, false, false);\r\n\r\n  return ret;\r\n}\r\n\r\n//Get compiled property\r\nfunction compiledProp(prop, isString) {\r\n  var ret = tools.lightObj();\r\n\r\n  //Extract the dot data path to the 'prop' filter.\r\n  if (!isString && prop.indexOf('.') > -1) {\r\n    prop = prop.replace(/\\.([^\\s.|\\/]+)/g, '|prop($1)');\r\n  }\r\n\r\n  //If there are colons in the property,then use filter\r\n  if (prop.indexOf('|') >= 0) {\r\n    var filters = [],\r\n      filtersTmp;\r\n    filtersTmp = prop.split('|');\r\n    prop = filtersTmp[0].trim();  //Extract property\r\n\r\n    filtersTmp = filtersTmp.slice(1);\r\n    tools.each(filtersTmp, function (filter) {\r\n      var retF = _getFilterParam(filter.trim()),\r\n        filterObj = tools.lightObj(),\r\n        filterName = retF[1];  //Get filter name\r\n\r\n      if (filterName) {\r\n        var paramsF = retF[3];  //Get filter param\r\n\r\n        //Multiple params are separated by commas.\r\n        if (paramsF) {\r\n          var params = [];\r\n          tools.each(paramsF.split(','), function (p) {\r\n            params[params.length] = tools.clearQuot(p).trim();\r\n          }, false, true);\r\n\r\n          filterObj.params = params;\r\n        }\r\n\r\n        filterObj.name = filterName;\r\n        filters.push(filterObj);\r\n      }\r\n    }, false, true);\r\n\r\n    ret.filters = filters;\r\n  }\r\n\r\n  //Extract the parent data path\r\n  if (!isString && prop.indexOf('../') > -1) {\r\n    var n = 0;\r\n    prop = prop.replace(/\\.\\.\\//g, function () {\r\n      n++;\r\n      return '';\r\n    });\r\n\r\n    ret.parentNum = n;\r\n  }\r\n\r\n  ret.name = prop;\r\n  if (isString) {  //Sign the parameter is a pure string.\r\n    ret.isStr = true;\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n//Get filter param\r\nvar REGEX_FILTER_PARAM = /([\\w$]+)(\\(([^()]+)\\))*/;\r\nfunction _getFilterParam(obj) {\r\n  return REGEX_FILTER_PARAM.exec(obj);\r\n}\r\n\r\n//Extract replace parameters\r\nvar _quots = ['\\'', '\"'];\r\nfunction _getReplaceParam(obj, strs) {\r\n  var pattern = tmplRule.replaceParam(),\r\n    matchArr, ret, i = 0;\r\n\r\n  while ((matchArr = pattern.exec(obj))) {\r\n    if (!ret) {\r\n      ret = [];\r\n    }\r\n\r\n    var prop = matchArr[3],\r\n      item = [matchArr[0], matchArr[1], null, false, true];\r\n\r\n    if (i > 0) {\r\n      item[4] = false;  //Sign not contain all of placehorder\r\n    }\r\n\r\n    //Clear parameter at both ends of the space.\r\n    prop = prop.trim();\r\n\r\n    //If parameter has quotation marks, this's a pure string parameter.\r\n    if (_quots.indexOf(prop[0]) > -1) {\r\n      prop = tools.clearQuot(prop);  //TODO 此处也会去除过滤器参数的引号\r\n      item[3] = true;\r\n    }\r\n\r\n    item[2] = prop;\r\n    ret.push(item);\r\n    i++;\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n//Get compiled parameter\r\nfunction compiledParam(value) {\r\n  var ret = tools.lightObj(),\r\n    strs = tools.isString(value) ? value.split(tmplRule.replaceSplit) : [value],\r\n    props = null,\r\n    isAll = false;  //此处指替换符是否占满整个属性值;若无替换符时为false\r\n\r\n  //If have placehorder\r\n  if (strs.length > 1) {\r\n    var params = _getReplaceParam(value, strs);\r\n    props = [];\r\n\r\n    tools.each(params, function (param) {\r\n      var retP = tools.lightObj();\r\n      isAll = param[4] ? param[0] === value : false;  //If there are several curly braces, \"isAll\" must be false.\r\n      retP.prop = compiledProp(param[2], param[3]);\r\n\r\n      //If parameter's open rules are several,then it need escape.\r\n      retP.escape = param[1].split(tmplRule.startRule).length < 3;\r\n      props.push(retP);\r\n    }, false, true);\r\n  }\r\n\r\n  ret.props = props;\r\n  ret.strs = strs;\r\n  ret.isAll = isAll;\r\n\r\n  //标记为模板函数替换变量\r\n  if (isAll) {\r\n    var prop = props[0].prop;\r\n    if (prop.name.indexOf('#') === 0) {\r\n      prop.name = prop.name.substr(1);\r\n      ret.isTmplPlace = true;\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nmodule.exports = {\r\n  compiledParam,\r\n  compiledParams,\r\n  compiledProp\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/transforms/transformParam.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('../utils/tools'),\r\n  errorTitle = nj.errorTitle;\r\n\r\n//提取style内参数\r\nfunction styleProps(obj) {\r\n  //If the parameter is a style object,then direct return.\r\n  if (tools.isObject(obj)) {\r\n    return obj;\r\n  }\r\n\r\n  //参数为字符串\r\n  var pattern = /([^\\s:]+)[\\s]?:[\\s]?([^\\s;]+)[;]?/g,\r\n    matchArr, ret;\r\n\r\n  while ((matchArr = pattern.exec(obj))) {\r\n    var key = matchArr[1],\r\n      value = matchArr[2];\r\n\r\n    if (!ret) {\r\n      ret = {};\r\n    }\r\n\r\n    //Convert to lowercase when style name is all capital.\r\n    if (/^[A-Z-]+$/.test(key)) {\r\n      key = key.toLowerCase();\r\n    }\r\n\r\n    //将连字符转为驼峰命名\r\n    key = tools.toCamelCase(key);\r\n\r\n    ret[key] = value;\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n//Get value from multiple datas\r\nfunction getData(data, prop) {\r\n  var ret, obj;\r\n  for (var i = 0, l = data.length; i < l; i++) {\r\n    obj = data[i];\r\n    if (obj) {\r\n      ret = obj[prop];\r\n      if (ret != null) {\r\n        return ret;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n//Rebuild local variables in the new context\r\nfunction newContext(p2, p3) {\r\n  var newData = [];\r\n  if ('data' in p3) {\r\n    newData.push(p3.data);\r\n  }\r\n  if ('extra' in p3) {\r\n    newData.push(p3.extra);\r\n  }\r\n\r\n  return {\r\n    data: newData.length ? tools.arrayPush(newData, p2.data) : p2.data,\r\n    parent: p3.fallback ? p2 : p2.parent,\r\n    index: 'index' in p3 ? p3.index : p2.index\r\n  };\r\n}\r\n\r\n//修正属性名\r\nfunction fixPropName(name) {\r\n  switch (name) {\r\n    case 'class':\r\n      name = 'className';\r\n      break;\r\n    case 'for':\r\n      name = 'htmlFor';\r\n      break;\r\n  }\r\n\r\n  return name;\r\n}\r\n\r\n//合并字符串属性\r\nfunction assignStringProp(paramsE, keys) {\r\n  var ret = '';\r\n  for (var k in paramsE) {\r\n    if (!keys || !keys[k]) {\r\n      var v = paramsE[k];\r\n      ret += ' ' + k + (k !== v ? '=\"' + v + '\"' : ' ');\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n//创建块表达式子节点函数\r\nfunction exprRet(p1, p2, fn, p4) {\r\n  return function(param) {\r\n    return fn(p1, p2, param, p4);\r\n  };\r\n}\r\n\r\n//构建可运行的模板函数\r\nfunction tmplWrap(configs, main) {\r\n  return function() {\r\n    var args = arguments,\r\n      initCtx = this,\r\n      data = !tools.isArray(args[0]) ? tools.arraySlice(args) : args[0];\r\n\r\n    return main(configs, {\r\n      data: initCtx && initCtx._njData ? tools.arrayPush([initCtx._njData], data) : data,\r\n      parent: initCtx && initCtx._njParent ? initCtx._njParent : null,\r\n      index: initCtx && initCtx._njIndex ? initCtx._njIndex : null\r\n    });\r\n  };\r\n}\r\n\r\n//创建模板函数\r\nfunction template(fns) {\r\n  var configs = {\r\n    useString: fns.useString,\r\n    exprs: nj.exprs,\r\n    filters: nj.filters,\r\n    getData: getData,\r\n    noop: tools.noop,\r\n    lightObj: tools.lightObj,\r\n    throwIf: tools.throwIf,\r\n    warn: tools.warn,\r\n    newContext: newContext,\r\n    styleProps: styleProps,\r\n    exprRet: exprRet\r\n  };\r\n\r\n  if (!configs.useString) {\r\n    configs.h = nj.createElement;\r\n    configs.components = nj.components;\r\n    //configs.assign = tools.assign;\r\n  } else {\r\n    configs.assignStringProp = assignStringProp;\r\n    configs.escape = nj.escape;\r\n  }\r\n\r\n  tools.each(fns, function(v, k) {\r\n    if (k.indexOf('main') === 0) { //将每个主函数构建为可运行的模板函数\r\n      configs[k] = tmplWrap(configs, v);\r\n      configs['_' + k] = v;\r\n    } else if (k.indexOf('fn') === 0) { //块表达式函数\r\n      configs[k] = v;\r\n    }\r\n  }, false, false);\r\n\r\n  return configs;\r\n}\r\n\r\nmodule.exports = {\r\n  newContext,\r\n  getData,\r\n  fixPropName,\r\n  styleProps,\r\n  assignStringProp,\r\n  exprRet,\r\n  tmplWrap,\r\n  template\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/transforms/transformData.js","'use strict';\r\n\r\nvar ESCAPE_LOOKUP = {\r\n  '&': '&amp;',\r\n  '>': '&gt;',\r\n  '<': '&lt;',\r\n  '\"': '&quot;',\r\n  '\\'': '&#x27;'\r\n};\r\n\r\nfunction escape(text) {\r\n  if (text == null) {\r\n    return '';\r\n  }\r\n  else if(!text.replace) {\r\n    return text;\r\n  }\r\n\r\n  return text.replace(/[&><\"']/g, function (match) {\r\n    return ESCAPE_LOOKUP[match];\r\n  });\r\n}\r\n\r\nmodule.exports = escape;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/escape.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('../utils/tools'),\r\n  tranParam = require('../transforms/transformParam'),\r\n  tranElem = require('../transforms/transformElement'),\r\n  tmplRule = nj.tmplRule;\r\n\r\n//检测元素节点\r\nfunction checkElem(obj, parent) {\r\n  var node = {},\r\n    parentContent = !parent.hasElse ? 'content' : 'contentElse';\r\n\r\n  if (!tools.isArray(obj)) {  //判断是否为文本节点\r\n    if (tools.isObject(obj) && '_njShim' in obj && !tools.isArray(obj._njShim)) {  //Get the shim value\r\n      obj = obj._njShim;\r\n    }\r\n\r\n    node.type = 'nj_plaintext';\r\n    node.content = [tranParam.compiledParam(obj)];\r\n    parent[parentContent].push(node);\r\n    return;\r\n  }\r\n\r\n  var first = obj[0];\r\n  if (tools.isString(first)) {  //第一个子节点为字符串\r\n    var first = first,\r\n      len = obj.length,\r\n      last = obj[len - 1],\r\n      isElemNode = false,\r\n      expr,\r\n      exprParams;\r\n\r\n    //判断是否为xml标签\r\n    var openTagName,\r\n      hasCloseTag = false,\r\n      isTmpl, isParamsExpr;\r\n\r\n    expr = tranElem.isExpr(first);\r\n    if (!expr) {\r\n      var xmlOpenTag = tranElem.getXmlOpenTag(first);\r\n      if (xmlOpenTag) {  //tagname为xml标签时,则认为是元素节点\r\n        openTagName = xmlOpenTag[1];\r\n\r\n        if (!tranElem.isXmlSelfCloseTag(first)) {  //非自闭合标签才验证是否存在关闭标签\r\n          hasCloseTag = tranElem.isXmlCloseTag(last, openTagName);\r\n        }\r\n        else {  //自闭合标签\r\n          node.selfCloseTag = true;\r\n        }\r\n        isElemNode = true;\r\n      }\r\n    }\r\n    else {  //为块表达式,也可视为一个元素节点\r\n      var exprName = expr[0];\r\n      exprParams = expr[1];\r\n      isTmpl = tranElem.isTmpl(exprName);\r\n      isParamsExpr = tranElem.isParamsExpr(exprName);\r\n\r\n      node.type = 'nj_expr';\r\n      node.expr = exprName;\r\n      if (exprParams != null && !isTmpl) {\r\n        node.refer = tranParam.compiledParam(exprParams.reduce(function (p, c) {\r\n          return p + (c.onlyBrace ? ' ' + c.key : '');\r\n        }, ''));\r\n      }\r\n\r\n      if (tranElem.isExprCloseTag(last, exprName)) {  //判断是否有块表达式闭合标签\r\n        hasCloseTag = true;\r\n      }\r\n      isElemNode = true;\r\n    }\r\n\r\n    if (isElemNode) {  //判断是否为元素节点\r\n      var elseIndex = -1,\r\n        pushContent = true;\r\n\r\n      if (!expr) {\r\n        node.type = openTagName;\r\n\r\n        //If open tag has a brace,add the typeRefer param.\r\n        var typeRefer = tranElem.getInsideBraceParam(openTagName);\r\n        if (typeRefer) {\r\n          node.typeRefer = tranParam.compiledParam(typeRefer[0]);\r\n        }\r\n\r\n        //获取openTag内参数\r\n        var tagParams = tranElem.getOpenTagParams(first);\r\n        if (tagParams) {\r\n          if (!node.params) {\r\n            node.params = tools.lightObj();\r\n          }\r\n\r\n          tools.each(tagParams, function (param) {  //The parameter like \"{prop}\" needs to be replaced.\r\n            node.params[param.onlyBrace ? param.onlyBrace.replace(/\\.\\.\\//g, '') : param.key] = tranParam.compiledParam(param.value);\r\n          }, false, true);\r\n        }\r\n\r\n        //Verify if self closing tag again, because the tag may be similar to \"<br></br>\".\r\n        if (!node.selfCloseTag) {\r\n          node.selfCloseTag = tranElem.verifySelfCloseTag(openTagName);\r\n        }\r\n      }\r\n      else {  //为块表达式时判断是否有#else\r\n        if (isTmpl) {  //模板元素\r\n          pushContent = false;\r\n\r\n          //将模板添加到父节点的params中\r\n          tranElem.addTmpl(node, parent, exprParams ? exprParams[0].value : null);\r\n        }\r\n        else if (isParamsExpr) {\r\n          pushContent = false;\r\n        }\r\n        else {\r\n          elseIndex = obj.indexOf(tmplRule.exprRule + 'else');\r\n        }\r\n      }\r\n\r\n      //放入父节点content内\r\n      if (pushContent) {\r\n        parent[parentContent].push(node);\r\n      }\r\n\r\n      //取出子节点集合\r\n      var end = len - (hasCloseTag ? 1 : 0),\r\n        content = obj.slice(1, (elseIndex < 0 ? end : elseIndex));\r\n      if (content && content.length) {\r\n        checkContentElem(content, node);\r\n      }\r\n\r\n      //如果有$else,则将$else后面的部分存入content_else集合中\r\n      if (elseIndex >= 0) {\r\n        var contentElse = obj.slice(elseIndex + 1, end);\r\n        node.hasElse = true;\r\n\r\n        if (contentElse && contentElse.length) {\r\n          checkContentElem(contentElse, node);\r\n        }\r\n      }\r\n\r\n      //If this is params block, set on the \"paramsExpr\" property of the parent node.\r\n      if (isParamsExpr) {\r\n        tranElem.addParamsExpr(node, parent);\r\n      }\r\n    }\r\n    else {  //如果不是元素节点,则为节点集合\r\n      checkContentElem(obj, parent);\r\n    }\r\n  }\r\n  else if (tools.isArray(first)) {  //如果第一个子节点为数组,则该节点一定为节点集合(可以是多层数组嵌套的集合)\r\n    checkContentElem(obj, parent);\r\n  }\r\n}\r\n\r\n//检测子元素节点\r\nfunction checkContentElem(obj, parent) {\r\n  if (!parent.content) {\r\n    parent.content = [];\r\n  }\r\n  if (parent.hasElse && !parent.contentElse) {\r\n    parent.contentElse = [];\r\n  }\r\n\r\n  tools.each(obj, function (item) {\r\n    checkElem(item, parent);\r\n  }, false, true);\r\n}\r\n\r\nmodule.exports = {\r\n  checkElem\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/parser/checkElem.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('./tools');\r\n\r\n//注册组件\r\nfunction registerComponent(name, component) {\r\n  var params = name;\r\n  if (!tools.isObject(name)) {\r\n    params = {};\r\n    params[name] = component;\r\n  }\r\n\r\n  tools.each(params, function (v, k) {\r\n    nj.components[k.toLowerCase()] = v;\r\n  }, false, false);\r\n\r\n  return component;\r\n}\r\n\r\nmodule.exports = {\r\n  registerComponent\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/registerComponent.js","'use strict';\r\n\r\nvar tools = require('../utils/tools');\r\n\r\n//Global filter list\r\nvar filters = {\r\n  //Get param properties\r\n  prop: function(obj, props) {\r\n    var ret = obj;\r\n    ret && tools.each(props.split('.'), function(p) {\r\n      ret = ret[p];\r\n    }, false, true);\r\n\r\n    return ret;\r\n  },\r\n\r\n  //Get list count\r\n  count: function(obj) {\r\n    return obj ? obj.length : 0;\r\n  },\r\n\r\n  //Get list item\r\n  item: function(obj, no) {\r\n    return obj ? obj[no] : null;\r\n  },\r\n\r\n  //Judge equal\r\n  equal: function(obj, val) {\r\n    return obj == val;\r\n  },\r\n\r\n  //Less than\r\n  lt: function(val1, val2, noEqual) {\r\n    var ret;\r\n    val1 = parseFloat(val1);\r\n    val2 = parseFloat(val2);\r\n\r\n    if (noEqual) {\r\n      ret = val1 < val2;\r\n    } else {\r\n      ret = val1 <= val2;\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  //Greater than\r\n  gt: function(val1, val2, noEqual) {\r\n    var ret;\r\n    val1 = parseFloat(val1);\r\n    val2 = parseFloat(val2);\r\n\r\n    if (noEqual) {\r\n      ret = val1 > val2;\r\n    } else {\r\n      ret = val1 >= val2;\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  //Addition\r\n  add: function(val1, val2, isFloat) {\r\n    return val1 + (isFloat ? parseFloat(val2) : parseInt(val2, 10));\r\n  },\r\n\r\n  //Convert to int \r\n  int: function(val) {\r\n    return parseInt(val, 10);\r\n  },\r\n\r\n  //Convert to float \r\n  float: function(val) {\r\n    return parseFloat(val);\r\n  },\r\n\r\n  //Convert to boolean \r\n  bool: function(val) {\r\n    if (val === 'false') {\r\n      return false;\r\n    }\r\n\r\n    return Boolean(val);\r\n  }\r\n};\r\n\r\nfunction _commonConfig(params) {\r\n  var ret = {\r\n    useString: true\r\n  };\r\n\r\n  if (params) {\r\n    ret = tools.assign(ret, params);\r\n  }\r\n  return ret;\r\n}\r\n\r\n//Filter default config\r\nvar filterConfig = {\r\n  prop: _commonConfig(),\r\n  count: _commonConfig(),\r\n  item: _commonConfig(),\r\n  equal: _commonConfig(),\r\n  lt: _commonConfig(),\r\n  gt: _commonConfig(),\r\n  add: _commonConfig(),\r\n  int: _commonConfig(),\r\n  float: _commonConfig(),\r\n  bool: _commonConfig()\r\n};\r\n\r\n//Register filter and also can batch add\r\nfunction registerFilter(name, filter, options) {\r\n  var params = name;\r\n  if (!tools.isObject(name)) {\r\n    params = {};\r\n    params[name] = {\r\n      filter: filter,\r\n      options: options\r\n    };\r\n  }\r\n\r\n  tools.each(params, function(v, name) {\r\n    if (v) {\r\n      var filter = v.filter,\r\n        options = v.options;\r\n\r\n      if (filter || options) {\r\n        if (filter) {\r\n          filters[name] = filter;\r\n        }\r\n        if (options) {\r\n          filterConfig[name] = _commonConfig(options);\r\n        }\r\n      } else {\r\n        filters[name] = v;\r\n      }\r\n    }\r\n  }, false, false);\r\n}\r\n\r\nmodule.exports = {\r\n  filters,\r\n  filterConfig,\r\n  registerFilter\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/filter.js","'use strict';\r\n\r\nvar tools = require('../utils/tools');\r\n\r\n//Global expression list\r\nvar exprs = {\r\n  'if': function(refer, options) {\r\n    if (refer === 'false') {\r\n      refer = false;\r\n    }\r\n\r\n    var referR, ret;\r\n    if (!options.useUnless) {\r\n      referR = !!refer;\r\n    } else {\r\n      referR = !!!refer;\r\n    }\r\n    if (referR) {\r\n      ret = options.result();\r\n    } else {\r\n      ret = options.inverse();\r\n    }\r\n\r\n    if (options.useString && ret == null) {\r\n      return '';\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  unless: function(refer, options) {\r\n    options.useUnless = true;\r\n    return exprs['if'].call(this, refer, options);\r\n  },\r\n\r\n  each: function(refer, options) {\r\n    var useString = options.useString,\r\n      ret;\r\n\r\n    if (refer) {\r\n      if (useString) {\r\n        ret = '';\r\n      } else {\r\n        ret = [];\r\n      }\r\n\r\n      tools.each(refer, function(item, index) {\r\n        var retI = options.result({\r\n          data: item,\r\n          index: index,\r\n          fallback: true\r\n        });\r\n\r\n        if (useString) {\r\n          ret += retI;\r\n        } else {\r\n          ret.push(retI);\r\n        }\r\n      }, false, tools.isArrayLike(refer));\r\n\r\n      //Return null when not use string and result is empty.\r\n      if (!useString && !ret.length) {\r\n        ret = null;\r\n      }\r\n    } else {\r\n      ret = options.inverse();\r\n      if (useString && ret == null) {\r\n        ret = '';\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  //Parameter\r\n  param: function(name, options) {\r\n    var ret = options.result(), //Get parameter value\r\n      value;\r\n\r\n    //If the value length greater than 1, it need to be connected to a whole string.\r\n    if (ret != null) {\r\n      if (!tools.isArray(ret)) {\r\n        value = ret;\r\n      } else {\r\n        value = '';\r\n        tools.each(tools.flatten(ret), function(item) {\r\n          value += item != null ? item : '';\r\n        }, false, true);\r\n      }\r\n    } else { //Match to Similar to \"checked\" or \"disabled\" attribute.\r\n      value = !options.useString ? true : name;\r\n    }\r\n\r\n    options.exprProps[name] = value;\r\n  },\r\n\r\n  //Spread parameters\r\n  spread: function(refer, options) {\r\n    if (!refer) {\r\n      return;\r\n    }\r\n\r\n    tools.each(refer, function(v, k) {\r\n      options.exprProps[k] = v;\r\n    }, false, false);\r\n  },\r\n\r\n  equal: function(value1, value2, options) {\r\n    var ret;\r\n    if (value1 == value2) {\r\n      ret = options.result();\r\n    } else {\r\n      ret = options.inverse();\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  'for': function(start, end, options) {\r\n    var ret, useString = options.useString;\r\n    if (useString) {\r\n      ret = '';\r\n    } else {\r\n      ret = [];\r\n    }\r\n\r\n    if (end == null) {\r\n      end = start;\r\n      start = 0;\r\n    }\r\n    start = parseInt(start, 10);\r\n    end = parseInt(end, 10);\r\n\r\n    for (; start <= end; start++) {\r\n      var retI = options.result({\r\n        index: start\r\n      });\r\n\r\n      if (useString) {\r\n        ret += retI;\r\n      } else {\r\n        ret.push(retI);\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  blank: function(options) {\r\n    return options.result();\r\n  }\r\n};\r\n\r\nfunction _commonConfig(params) {\r\n  var ret = {\r\n    useString: true,\r\n    exprProps: false,\r\n    newContext: true\r\n  };\r\n\r\n  if (params) {\r\n    ret = tools.assign(ret, params);\r\n  }\r\n  return ret;\r\n}\r\n\r\n//Expression default config\r\nvar exprConfig = {\r\n  'if': _commonConfig({ newContext: false }),\r\n  unless: _commonConfig({ newContext: false }),\r\n  each: _commonConfig(),\r\n  param: _commonConfig({ newContext: false, exprProps: true }),\r\n  spread: _commonConfig({ newContext: false, useString: false, exprProps: true }),\r\n  equal: _commonConfig({ newContext: false, useString: false }),\r\n  'for': _commonConfig(),\r\n  blank: _commonConfig({ newContext: false, useString: false })\r\n};\r\n\r\n//Expression alias\r\nexprs.prop = exprs.p = exprs.param;\r\nexprConfig.prop = exprConfig.p = exprConfig.param;\r\n\r\n//Register expression and also can batch add\r\nfunction registerExpr(name, expr, options) {\r\n  var params = name;\r\n  if (!tools.isObject(name)) {\r\n    params = {};\r\n    params[name] = {\r\n      expr: expr,\r\n      options: options\r\n    };\r\n  }\r\n\r\n  tools.each(params, function(v, name) {\r\n    if (v) {\r\n      var expr = v.expr,\r\n        options = v.options;\r\n\r\n      if (expr || options) {\r\n        if (expr) {\r\n          exprs[name] = expr;\r\n        }\r\n        if (options) {\r\n          exprConfig[name] = _commonConfig(options);\r\n        }\r\n      } else {\r\n        exprs[name] = v;\r\n      }\r\n    }\r\n  }, false, false);\r\n}\r\n\r\nmodule.exports = {\r\n  exprs,\r\n  exprConfig,\r\n  registerExpr\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/expression.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('./tools');\r\n\r\nfunction _createRegExp(reg, mode) {\r\n  return new RegExp(reg, mode);\r\n}\r\n\r\n//Clear the repeated characters\r\nfunction _clearRepeat(str) {\r\n  var ret = '',\r\n    i = 0,\r\n    l = str.length,\r\n    char;\r\n\r\n  for (; i < l; i++) {\r\n    char = str[i];\r\n    if (ret.indexOf(char) < 0) {\r\n      ret += char;\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nmodule.exports = function (startRule, endRule, exprRule, externalRule, propRule, templateRule) {\r\n  if(tools.isObject(startRule)){\r\n    var params = startRule;\r\n    startRule = params.start;\r\n    endRule = params.end;\r\n    exprRule = params.expr;\r\n    externalRule = params.external;\r\n    propRule = params.prop;\r\n    templateRule = params.template;\r\n  }\r\n  if (!startRule) {\r\n    startRule = '{';\r\n  }\r\n  if (!endRule) {\r\n    endRule = '}';\r\n  }\r\n  if (!exprRule) {\r\n    exprRule = '#';\r\n  }\r\n  if (!externalRule) {\r\n    externalRule = '@';\r\n  }\r\n  if (!propRule) {\r\n    propRule = '@';\r\n  }\r\n  if (!templateRule) {\r\n    templateRule = 'template';\r\n  }\r\n\r\n  var allRules = _clearRepeat(startRule + endRule),\r\n    firstChar = startRule[0],\r\n    otherChars = allRules.substr(1),\r\n    spChars = '#$@',\r\n    exprRules = _clearRepeat(exprRule + spChars),\r\n    escapeExprRule = exprRule.replace(/\\$/g, '\\\\$'),\r\n    escapeExternalRule = externalRule.replace(/\\$/g, '\\\\$');\r\n\r\n  //Reset the regexs to global list\r\n  tools.assign(nj.tmplRule, {\r\n    startRule,\r\n    endRule,\r\n    exprRule,\r\n    externalRule,\r\n    propRule,\r\n    xmlOpenTag: _createRegExp('^<([a-z' + firstChar + exprRules + '][-a-z0-9_|./' + otherChars + ']*)[^>]*>$', 'i'),\r\n    openTagParams: _createRegExp('[\\\\s]+(((' + startRule + '){1,2}([^' + allRules + ']+)(' + endRule + '){1,2})|[^\\\\s=>]+)(=((\\'[^\\']+\\')|(\"[^\"]+\")|([^\"\\'\\\\s]+)))?', 'g'),\r\n    insideBraceParam: _createRegExp('(' + startRule + '){1,2}([^' + allRules + ']+)(' + endRule + '){1,2}', 'i'),\r\n    spreadProp: _createRegExp('[\\\\s]+(' + startRule + '){1,2}[\\\\s]*(\\\\.\\\\.\\\\.[^' + allRules + ']+)(' + endRule + '){1,2}', 'g'),\r\n    replaceSplit: _createRegExp('(?:' + startRule + '){1,2}[^' + allRules + ']+(?:' + endRule + '){1,2}'),\r\n    replaceParam: function() {\r\n      return _createRegExp('((' + startRule + '){1,2})([^' + allRules + ']+)(' + endRule + '){1,2}', 'g');\r\n    },\r\n    checkElem: function() {\r\n      return _createRegExp('([^>]*)(<([a-z' + firstChar + '/' + exprRules + '!][-a-z0-9_|.' + allRules + exprRules + ']*)([^>]*)>)([^<]*)', 'ig');\r\n    },\r\n    externalSplit: _createRegExp(escapeExternalRule + '\\\\{[^{}]*(?:\\\\{[^' + externalRule + ']*\\\\})*[^{}]*\\\\}'),\r\n    external: function() {\r\n      return _createRegExp(escapeExternalRule + '\\\\{([^{}]*(\\\\{[^' + externalRule + ']*\\\\})*[^{}]*)\\\\}', 'g');\r\n    },\r\n    expr: _createRegExp('^' + escapeExprRule + '([^\\\\s]+)', 'i'),\r\n    include: function() {\r\n      return _createRegExp('<' + escapeExprRule + 'include([^>]*)>', 'ig');\r\n    },\r\n    template: templateRule\r\n  });\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/setTmplRule.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  utils = require('../utils/utils'),\r\n  buildRuntime = require('./buildRuntime'),\r\n  compileStringTmpl = require('../parser/checkStringElem');\r\n\r\n//编译模板并返回转换函数\r\nfunction compile(tmpl, tmplName, outputH, fileName) {\r\n  if (!tmpl) {\r\n    return;\r\n  }\r\n  if (utils.isObject(tmplName)) {\r\n    var params = tmplName;\r\n    tmplName = params.tmplName;\r\n    outputH = params.outputH;\r\n    fileName = params.fileName;\r\n  }\r\n\r\n  //编译模板函数\r\n  var tmplFns;\r\n  if (tmplName) {\r\n    tmplFns = nj.templates[tmplName];\r\n  }\r\n  if (!tmplFns) {\r\n    var isObj = utils.isObject(tmpl), fns;\r\n    if (isObj && tmpl.main) {  //直接传入预编译模板\r\n      fns = tmpl;\r\n    }\r\n    else {  //编译AST\r\n      var root;\r\n      if (tmplName) {\r\n        root = nj.asts[tmplName];\r\n      }\r\n      if (!root) {\r\n        //Can be directly introduced into the AST\r\n        if (isObj && tmpl.type === 'nj_root') {\r\n          root = tmpl;\r\n        }\r\n        else {\r\n          root = _createAstRoot();\r\n\r\n          //Auto transform string template to array\r\n          if (utils.isString(tmpl)) {\r\n            //Merge all include blocks\r\n            var includeParser = nj.includeParser;\r\n            if (includeParser) {\r\n              tmpl = includeParser(tmpl, fileName);\r\n            }\r\n\r\n            tmpl = compileStringTmpl(tmpl);\r\n          }\r\n          tmpl = tmpl._njTmpl;\r\n\r\n          //分析传入参数并转换为节点树对象\r\n          utils.checkElem(tmpl, root);\r\n        }\r\n\r\n        //保存模板AST编译结果到全局集合中\r\n        if (tmplName) {\r\n          nj.asts[tmplName] = root;\r\n        }\r\n      }\r\n\r\n      fns = buildRuntime(root.content, !outputH);\r\n    }\r\n\r\n    tmplFns = utils.template(fns);\r\n\r\n    //保存模板函数编译结果到全局集合中\r\n    if (tmplName) {\r\n      nj.templates[tmplName] = tmplFns;\r\n    }\r\n  }\r\n\r\n  return tmplFns.main;\r\n}\r\n\r\n//Create template root object\r\nfunction _createAstRoot() {\r\n  var root = utils.lightObj();\r\n  root.type = 'nj_root';\r\n  root.content = [];\r\n\r\n  return root;\r\n}\r\n\r\n//编译字面量并返回组件转换函数\r\nfunction compileH(tmpl, tmplName) {\r\n  return compile(tmpl, tmplName, true);\r\n}\r\n\r\n//Precompile template\r\nfunction precompile(tmpl, outputH) {\r\n  var root = _createAstRoot();\r\n\r\n  if (utils.isString(tmpl)) {\r\n    tmpl = compileStringTmpl(tmpl);\r\n  }\r\n  tmpl = tmpl._njTmpl;\r\n  utils.checkElem(tmpl, root);\r\n\r\n  return buildRuntime(root.content, !outputH);\r\n}\r\n\r\nmodule.exports = {\r\n  compile,\r\n  compileH,\r\n  precompile\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/compiler/compile.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  utils = require('../utils/utils'),\r\n  errorTitle = nj.errorTitle,\r\n  exprConfig = utils.exprConfig,\r\n  filterConfig = utils.filterConfig,\r\n  replaceSpecialSymbol = require('../utils/replaceSpecialSymbol');\r\n\r\nfunction _buildFn(content, fns, no, newContext, level) {\r\n  var fnStr = '',\r\n    useString = fns.useString,\r\n    isTmplExpr = utils.isString(no), //如果no为字符串, 则本次将构建tmpl块模板函数\r\n    main = isTmplExpr || no === 0,\r\n    /* retType\r\n     1: 只有单个子节点\r\n     2: 有多个子节点\r\n     object: 非构建函数时\r\n    */\r\n    retType = content.length === 1 ? '1' : '2',\r\n    counter = {\r\n      _type: 0,\r\n      _typeRefer: 0,\r\n      _params: 0,\r\n      _paramsE: 0,\r\n      _compParam: 0,\r\n      _dataRefer: 0,\r\n      _expr: 0,\r\n      _value: 0,\r\n      _filter: 0,\r\n      newContext: newContext\r\n    };\r\n\r\n  if (!useString) {\r\n    counter._compParam = 0;\r\n  } else {\r\n    counter._children = 0;\r\n  }\r\n\r\n  if (!main && newContext) {\r\n    fnStr += 'p2 = p1.newContext(p2, p3);\\n';\r\n  }\r\n\r\n  if (retType === '2') {\r\n    if (!useString) {\r\n      fnStr += 'var ret = [];\\n';\r\n    } else {\r\n      fnStr += 'var ret = \\'\\';\\n';\r\n    }\r\n  }\r\n\r\n  fnStr += _buildContent(content, fns, counter, retType, level);\r\n\r\n  if (retType === '2') {\r\n    fnStr += 'return ret;';\r\n  }\r\n\r\n  /* 构建块表达式函数\r\n   p1: 模板全局数据\r\n   p2: 节点上下文数据\r\n   p3: 块表达式内调用result及inverse方法传递的参数\r\n   p4: #props块变量\r\n  */\r\n  fns[main ? 'main' + (isTmplExpr ? no : '') : 'fn' + no] = new Function('p1', 'p2', 'p3', 'p4', fnStr);\r\n  return no;\r\n}\r\n\r\nfunction _buildOptions(config, node, fns, exprPropsStr, level) {\r\n  var hashStr = '',\r\n    noConfig = !config;\r\n\r\n  if (noConfig || config.useString) {\r\n    hashStr += ', useString: p1.useString';\r\n  }\r\n  if (node) {\r\n    var newContext = config ? config.newContext : true;\r\n    if (noConfig || config.exprProps) {\r\n      hashStr += ', exprProps: ' + exprPropsStr;\r\n    }\r\n\r\n    hashStr += ', result: ' + (node.content ? 'p1.exprRet(p1, p2, p1.fn' + _buildFn(node.content, fns, ++fns._no, newContext, level) + ', ' + exprPropsStr + ')' : 'p1.noop');\r\n    hashStr += ', inverse: ' + (node.contentElse ? 'p1.exprRet(p1, p2, p1.fn' + _buildFn(node.contentElse, fns, ++fns._no, newContext, level) + ', ' + exprPropsStr + ')' : 'p1.noop');\r\n  }\r\n\r\n  return hashStr.length ? '{ _njOpts: true' + hashStr + ' }' : '';\r\n}\r\n\r\nfunction _buildPropData(obj, counter, fns, noEscape) {\r\n  var dataValueStr,\r\n    useString = fns.useString,\r\n    escape = !noEscape ? obj.escape : false;\r\n\r\n  //先生成数据值\r\n  if (!obj.prop.isStr) {\r\n    var name = obj.prop.name,\r\n      parentNum = obj.prop.parentNum,\r\n      data = '',\r\n      special = false,\r\n      specialP = false;\r\n\r\n    if (name === '@index') {\r\n      data = 'index';\r\n      special = true;\r\n    } else if (name === 'this') {\r\n      data = 'data[0]';\r\n      special = true;\r\n    }\r\n\r\n    if (parentNum) {\r\n      if (!data) {\r\n        data = 'data';\r\n      }\r\n      for (var i = 0; i < parentNum; i++) {\r\n        data = 'parent.' + data;\r\n      }\r\n\r\n      if (!special) {\r\n        specialP = true;\r\n      }\r\n    }\r\n\r\n    if (!special && !specialP) {\r\n      dataValueStr = 'p1.getData(p2.data, \\'' + name + '\\')';\r\n    } else {\r\n      var dataStr = 'p2.' + data;\r\n      dataValueStr = special ? dataStr : 'p1.getData(' + dataStr + ', \\'' + name + '\\')';\r\n    }\r\n  } else {\r\n    dataValueStr = '\\'' + obj.prop.name + '\\'';\r\n  }\r\n\r\n  //有过滤器时需要生成\"_value\"值\r\n  var filters = obj.prop.filters;\r\n  if (filters) {\r\n    var valueStr = '_value' + counter._value++,\r\n      filterStr = 'var ' + valueStr + ' = ' + dataValueStr + ';\\n';\r\n\r\n    utils.each(filters, function(o) {\r\n      var _filterC = counter._filter++,\r\n        configF = filterConfig[o.name],\r\n        filterVarStr = '_filter' + _filterC,\r\n        globalFilterStr = 'p1.filters[\\'' + o.name + '\\']';\r\n\r\n      if (configF) {\r\n        filterStr += '\\nvar ' + filterVarStr + ' = ' + globalFilterStr + ';\\n';\r\n      } else { //如果全局配置不存在,先从p2.data中获取\r\n        filterStr += '\\nvar ' + filterVarStr + ' = p1.getData(p2.data, \\'' + o.name + '\\');\\n';\r\n        filterStr += 'if(!' + filterVarStr + ') ' + filterVarStr + ' = ' + globalFilterStr + ';\\n';\r\n      }\r\n      filterStr += 'if (!' + filterVarStr + ') {\\n';\r\n      filterStr += '  p1.warn(\\'' + o.name + '\\', \\'filter\\');\\n';\r\n      filterStr += '}\\n';\r\n      filterStr += 'else {\\n';\r\n      filterStr += '  ' + valueStr + ' = ' + filterVarStr + '.apply(p2, [' + valueStr +\r\n        (o.params ? o.params.reduce(function(p, c) {\r\n          return p + ', \\'' + c + '\\'';\r\n        }, '') : '') +\r\n        ', ' + _buildOptions(configF) +\r\n        ']);\\n';\r\n      filterStr += '}\\n';\r\n    }, false, true);\r\n\r\n    return {\r\n      valueStr: _buildEscape(valueStr, useString, escape),\r\n      filterStr: filterStr\r\n    };\r\n  } else {\r\n    return _buildEscape(dataValueStr, useString, escape);\r\n  }\r\n}\r\n\r\nfunction _buildEscape(valueStr, useString, escape) {\r\n  if (useString && escape) {\r\n    return 'p1.escape(' + valueStr + ')';\r\n  } else {\r\n    return valueStr;\r\n  }\r\n}\r\n\r\nfunction _buildProps(obj, counter, fns) {\r\n  var str0 = obj.strs[0],\r\n    valueStr = '',\r\n    filterStr = '';\r\n\r\n  if (utils.isString(str0)) { //常规属性\r\n    valueStr = !obj.isAll && str0 !== '' ? ('\\'' + str0 + '\\'') : '';\r\n    filterStr = '';\r\n\r\n    utils.each(obj.props, function(o, i) {\r\n      var propData = _buildPropData(o, counter, fns),\r\n        dataValueStr;\r\n      if (utils.isString(propData)) {\r\n        dataValueStr = propData;\r\n      } else {\r\n        dataValueStr = propData.valueStr;\r\n        filterStr += propData.filterStr;\r\n      }\r\n\r\n      if (!obj.isAll) {\r\n        var strI = obj.strs[i + 1];\r\n        dataValueStr = (str0 === '' && i == 0 ? '' : ' + ') +\r\n          '(' + dataValueStr + ')' +\r\n          (strI !== '' ? ' + \\'' + strI + '\\'' : '');\r\n      } else if (obj.isTmplPlace) { //执行tmpl块模板函数\r\n        dataValueStr += '.call({ _njParent: p2, _njIndex: p2.index }, p2.data)';\r\n      }\r\n\r\n      valueStr += dataValueStr;\r\n      if (obj.isAll) {\r\n        return false;\r\n      }\r\n    }, false, true);\r\n  } else if (utils.isObject(str0) && str0.length != null) { //tmpl块表达式\r\n    valueStr += '{\\n';\r\n    utils.each(str0, function(v, k, i, l) {\r\n      if (k !== 'length') {\r\n        valueStr += '  \"' + k + '\": p1.main' + _buildFn(v.content, fns, 'T' + ++fns._noT);\r\n      } else {\r\n        valueStr += '  length: ' + v;\r\n      }\r\n      if (i < l - 1) {\r\n        valueStr += ',';\r\n      }\r\n      valueStr += '\\n';\r\n    }, false, false);\r\n    valueStr += '}';\r\n  } else if (utils.isObject(str0) && str0._njEx) {\r\n    valueStr = str0._njEx;\r\n  } else { //非字符串值\r\n    //The \"_njShim\" property is used to distinguish whether the incoming is an normal array.\r\n    valueStr = JSON.stringify(str0._njShim ? str0._njShim : str0);\r\n  }\r\n\r\n  if (filterStr === '') {\r\n    return valueStr;\r\n  } else { //包含过滤器\r\n    return {\r\n      valueStr: valueStr,\r\n      filterStr: filterStr\r\n    };\r\n  }\r\n}\r\n\r\nfunction _buildNode(node, fns, counter, retType, level) {\r\n  var fnStr = '',\r\n    useString = fns.useString;\r\n\r\n  if (node.type === 'nj_plaintext') { //文本节点\r\n    var valueStr = _buildProps(node.content[0], counter, fns),\r\n      filterStr;\r\n    if (utils.isObject(valueStr)) {\r\n      filterStr = valueStr.filterStr;\r\n      valueStr = valueStr.valueStr;\r\n    }\r\n\r\n    var textStr = _buildRender(1, retType, { text: valueStr }, fns, level);\r\n    if (filterStr) {\r\n      textStr = filterStr + textStr;\r\n    }\r\n\r\n    if (useString) {\r\n      fnStr += textStr;\r\n    } else { //文本中的特殊字符需转义\r\n      fnStr += replaceSpecialSymbol(textStr);\r\n    }\r\n  } else if (node.type === 'nj_expr') { //块表达式节点\r\n    var _exprC = counter._expr++,\r\n      _dataReferC = counter._dataRefer++,\r\n      dataReferStr = '',\r\n      filterStr = '',\r\n      configE = exprConfig[node.expr],\r\n      exprVarStr = '_expr' + _exprC,\r\n      globalExprStr = 'p1.exprs[\\'' + node.expr + '\\']';\r\n\r\n    if (configE) {\r\n      fnStr += '\\nvar ' + exprVarStr + ' = ' + globalExprStr + ';\\n';\r\n    } else { //如果全局配置不存在,先从p2.data中获取\r\n      fnStr += '\\nvar ' + exprVarStr + ' = p1.getData(p2.data, \\'' + node.expr + '\\');\\n';\r\n      fnStr += 'if(!' + exprVarStr + ') ' + exprVarStr + ' = ' + globalExprStr + ';\\n';\r\n    }\r\n\r\n    dataReferStr += 'var _dataRefer' + _dataReferC + ' = [\\n';\r\n\r\n    if (node.refer) {\r\n      var props = node.refer.props;\r\n      utils.each(props, function(o, i) {\r\n        var valueStr = _buildPropData(o, counter, fns, true);\r\n        if (utils.isObject(valueStr)) {\r\n          filterStr += valueStr.filterStr;\r\n          valueStr = valueStr.valueStr;\r\n        }\r\n\r\n        dataReferStr += '  ' + valueStr + ',';\r\n      }, false, true);\r\n    }\r\n\r\n    //props块\r\n    var exprPropsStr = 'p4';\r\n    if (retType && retType._paramsE) {\r\n      exprPropsStr = retType._paramsE;\r\n    }\r\n\r\n    dataReferStr += _buildOptions(configE, node, fns, exprPropsStr, level);\r\n    dataReferStr += '\\n];\\n';\r\n\r\n    if (filterStr !== '') {\r\n      dataReferStr = filterStr + dataReferStr;\r\n    }\r\n\r\n    fnStr += dataReferStr;\r\n\r\n    //如果块表达式不存在则打印警告信息\r\n    fnStr += 'p1.throwIf(_expr' + _exprC + ', \\'' + node.expr + '\\', \\'expr\\');\\n';\r\n\r\n    //渲染\r\n    fnStr += _buildRender(2, retType, {\r\n      _expr: _exprC,\r\n      _dataRefer: _dataReferC\r\n    }, fns, level);\r\n  } else { //元素节点\r\n    //节点类型和typeRefer\r\n    var _typeC = counter._type++,\r\n      _type;\r\n    if (node.typeRefer) {\r\n      _type = node.typeRefer.props[0].prop.name;\r\n    } else {\r\n      _type = node.type;\r\n    }\r\n\r\n    var typeStr;\r\n    if (!useString) {\r\n      typeStr = 'p1.components[\\'' + _type.toLowerCase() + '\\'] ? p1.components[\\'' + _type.toLowerCase() + '\\'] : \\'' + _type + '\\'';\r\n    } else {\r\n      typeStr = '\\'' + _type + '\\'';\r\n    }\r\n\r\n    if (node.typeRefer) {\r\n      var _typeReferC = counter._typeRefer++,\r\n        valueStrT = _buildProps(node.typeRefer, counter, fns);\r\n      if (utils.isObject(valueStrT)) {\r\n        fnStr += valueStrT.filterStr;\r\n        valueStrT = valueStrT.valueStr;\r\n      }\r\n\r\n      fnStr += '\\nvar _typeRefer' + _typeReferC + ' = ' + valueStrT + ';\\n';\r\n      fnStr += 'var _type' + _typeC + ' = _typeRefer' + _typeReferC + ' ? _typeRefer' + _typeReferC + ' : (' + typeStr + ');\\n';\r\n    } else {\r\n      fnStr += '\\nvar _type' + _typeC + ' = ' + typeStr + ';\\n';\r\n    }\r\n\r\n    //节点参数\r\n    var params = node.params,\r\n      paramsExpr = node.paramsExpr,\r\n      paramsStr = '';\r\n    if (params || paramsExpr) {\r\n      var _paramsC = counter._params++;\r\n      paramsStr = 'var _params' + _paramsC + ' = ';\r\n\r\n      //params块\r\n      if (paramsExpr) {\r\n        var _paramsEC = counter._paramsE++;\r\n        paramsStr += (useString ? '\\'\\'' : 'null') + ';\\n';\r\n        paramsStr += 'var _paramsE' + _paramsEC + ' = {};\\n';\r\n\r\n        //params块的子节点\r\n        paramsStr += _buildContent(paramsExpr.content, fns, counter, { _paramsE: '_paramsE' + _paramsEC });\r\n\r\n        //合并params块的值\r\n        if (!useString) {\r\n          paramsStr += '\\n_params' + _paramsC + ' = _paramsE' + _paramsEC + ';\\n';\r\n          //paramsStr += '\\np1.assign(_params' + _paramsC + ', _paramsE' + _paramsEC + ');\\n';\r\n        } else {\r\n          var keys = '';\r\n          utils.each(params, function(v, k, i, l) {\r\n            if (i == 0) {\r\n              keys += '{ ';\r\n            }\r\n            keys += k + ': 1';\r\n\r\n            if (i < l - 1) {\r\n              keys += ', ';\r\n            } else {\r\n              keys += ' }';\r\n            }\r\n          }, false, false);\r\n          paramsStr += '_params' + _paramsC + ' += p1.assignStringProp(_paramsE' + _paramsEC + ', ' + (keys === '' ? 'null' : keys) + ');\\n';\r\n        }\r\n      }\r\n\r\n      if (params) {\r\n        var paramKeys = Object.keys(params),\r\n          len = paramKeys.length,\r\n          filterStr = '';\r\n\r\n        if (!useString && !paramsExpr) {\r\n          paramsStr += '{\\n';\r\n        }\r\n\r\n        utils.each(paramKeys, function(k, i) {\r\n          var valueStr = _buildProps(params[k], counter, fns);\r\n          if (utils.isObject(valueStr)) {\r\n            filterStr += valueStr.filterStr;\r\n            valueStr = valueStr.valueStr;\r\n          }\r\n\r\n          if (!useString && k === 'style') { //将style字符串转换为对象\r\n            valueStr = 'p1.styleProps(' + valueStr + ')';\r\n          }\r\n\r\n          var key = k,\r\n            onlyKey = ('\\'' + key + '\\'') === valueStr;\r\n          if (!useString) {\r\n            key = utils.fixPropName(k);\r\n          }\r\n          if (!paramsExpr) {\r\n            if (!useString) {\r\n              paramsStr += '  \\'' + key + '\\': ' + (!onlyKey ? valueStr : 'true') + (i < len - 1 ? ',\\n' : '');\r\n            } else {\r\n              paramsStr += (i > 0 ? '  + ' : '') + '\\' ' + key + (!onlyKey ? '=\"\\' + ' + valueStr + ' + \\'\"\\'' : ' \\'') + (i == len - 1 ? ';' : '') + '\\n';\r\n            }\r\n          } else {\r\n            if (!useString) {\r\n              paramsStr += '_params' + _paramsC + '[\\'' + key + '\\'] = ' + (!onlyKey ? valueStr : 'true') + ';\\n';\r\n            } else {\r\n              paramsStr += '_params' + _paramsC + ' += \\' ' + key + (!onlyKey ? '=\"\\' + ' + valueStr + ' + \\'\"\\'' : ' \\'') + ';\\n';\r\n            }\r\n          }\r\n        }, false, false);\r\n\r\n        if (!useString && !paramsExpr) {\r\n          paramsStr += '\\n};\\n';\r\n        }\r\n\r\n        if (filterStr !== '') {\r\n          paramsStr = filterStr + paramsStr;\r\n        }\r\n      }\r\n\r\n      fnStr += paramsStr;\r\n    }\r\n\r\n    var _compParamC, _childrenC;\r\n    if (!useString) { //组件引擎参数\r\n      _compParamC = counter._compParam++;\r\n      fnStr += 'var _compParam' + _compParamC + ' = [_type' + _typeC + ', ' + (paramsStr !== '' ? '_params' + _paramsC : 'null') + '];\\n';\r\n    } else { //子节点字符串\r\n      _childrenC = counter._children++;\r\n      fnStr += 'var _children' + _childrenC + ' = \\'\\';\\n';\r\n    }\r\n\r\n    //子节点\r\n    fnStr += _buildContent(node.content, fns, counter, !useString ? { _compParam: '_compParam' + _compParamC } : { _children: '_children' + _childrenC }, level != null ? level + 1 : level);\r\n\r\n    //渲染\r\n    fnStr += _buildRender(3, retType, !useString ? { _compParam: _compParamC } : { _type: _typeC, _params: paramsStr !== '' ? _paramsC : null, _children: _childrenC, _selfClose: node.selfCloseTag }, fns, level);\r\n  }\r\n\r\n  return fnStr;\r\n}\r\n\r\nfunction _buildContent(content, fns, counter, retType, level) {\r\n  var fnStr = '';\r\n  if (!content) {\r\n    return fnStr;\r\n  }\r\n\r\n  utils.each(content, function(node) {\r\n    fnStr += _buildNode(node, fns, counter, retType, level);\r\n  }, false, true);\r\n\r\n  return fnStr;\r\n}\r\n\r\nfunction _buildRender(nodeType, retType, params, fns, level) {\r\n  var retStr,\r\n    useString = fns.useString;\r\n\r\n  switch (nodeType) {\r\n    case 1: //文本节点\r\n      retStr = _buildLevelSpace(level, useString) + params.text + (!useString || level == null ? '' : ' + \\'\\\\n\\'');\r\n      break;\r\n    case 2: //块表达式\r\n      retStr = '_expr' + params._expr + '.apply(p2, _dataRefer' + params._dataRefer + ')';\r\n      break;\r\n    case 3: //元素节点\r\n      if (!useString) {\r\n        retStr = 'p1.h.apply(null, _compParam' + params._compParam + ')';\r\n      } else {\r\n        var levelSpace = _buildLevelSpace(level, useString);\r\n        retStr = levelSpace + '\\'<\\' + _type' + params._type + ' + ' + (params._params != null ? '_params' + params._params + ' + ' : '');\r\n        if (!params._selfClose) {\r\n          retStr += '\\'>\\\\n\\'';\r\n          retStr += ' + _children' + params._children + ' + ';\r\n          retStr += levelSpace + '\\'</\\' + _type' + params._type + ' + \\'>\\\\n\\'';\r\n        } else {\r\n          retStr += '\\' />\\\\n\\'';\r\n        }\r\n      }\r\n      break;\r\n  }\r\n\r\n  //保存方式\r\n  if (retType === '1') {\r\n    return '\\nreturn ' + retStr + ';';\r\n  } else if (retType === '2') {\r\n    if (!useString) {\r\n      return '\\nret.push(' + retStr + ');\\n';\r\n    } else {\r\n      return '\\nret += ' + retStr + ';\\n';\r\n    }\r\n  } else if (retType._paramsE) {\r\n    return '\\n' + retStr + ';\\n';\r\n  } else {\r\n    if (!useString) {\r\n      return '\\n' + retType._compParam + '.push(' + retStr + ');\\n';\r\n    } else {\r\n      return '\\n' + retType._children + ' += ' + retStr + ';\\n';\r\n    }\r\n  }\r\n}\r\n\r\nfunction _buildLevelSpace(level, useString) {\r\n  var ret = '';\r\n  if (useString && level != null && level > 0) {\r\n    ret += '\\'';\r\n    for (var i = 0; i < level; i++) {\r\n      ret += '  ';\r\n    }\r\n    ret += '\\' + ';\r\n  }\r\n  return ret;\r\n}\r\n\r\nmodule.exports = function(ast, useString) {\r\n  var fns = {\r\n    useString: useString,\r\n    _no: 0, //块表达式函数计数\r\n    _noT: 0 //tmpl块模板函数计数\r\n  };\r\n\r\n  _buildFn(ast, fns, fns._no, null, 0);\r\n  return fns;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/compiler/buildRuntime.js","'use strict';\r\n\r\nvar SPACIAL_SYMBOLS = {\r\n  nbsp: '\\u00A0',\r\n  ensp: '\\u2002',\r\n  emsp: '\\u2003',\r\n  thinsp: '\\u2009',\r\n  zwnj: '\\u200C',\r\n  zwj: '\\u200D',\r\n  lt: '<',\r\n  gt: '>',\r\n  amp: '&'\r\n};\r\n\r\nvar REGEX_SYMBOLS = new RegExp('&(' + Object.keys(SPACIAL_SYMBOLS).join('|') + ');', 'g');\r\nfunction replace(str) {\r\n  return str.replace(REGEX_SYMBOLS, function (all, match) {\r\n    return SPACIAL_SYMBOLS[match];\r\n  });\r\n}\r\n\r\nmodule.exports = replace;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/replaceSpecialSymbol.js","'use strict';\r\n\r\nvar nj = require('../core'),\r\n  tools = require('../utils/tools'),\r\n  tranElem = require('../transforms/transformElement'),\r\n  tmplRule = nj.tmplRule,\r\n  shim = require('../utils/shim'),\r\n  tmplStrs = nj.tmplStrs;\r\n\r\n//Compile string template\r\nfunction compileStringTmpl(tmpl) {\r\n  var tmplKey = tmpl.toString(), //Get unique key\r\n    ret = tmplStrs[tmplKey];\r\n\r\n  if (!ret) { //If the cache already has template data, direct return the template.\r\n    var isStr = tools.isString(tmpl),\r\n      xmls = tmpl,\r\n      args = arguments,\r\n      splitNo = 0,\r\n      params = [],\r\n      fullXml = '',\r\n      exArgs;\r\n\r\n    if (isStr) {\r\n      xmls = tmpl.split(tmplRule.externalSplit);\r\n\r\n      var pattern = tmplRule.external(),\r\n        matchArr;\r\n      exArgs = [];\r\n      while (matchArr = pattern.exec(tmpl)) {\r\n        exArgs.push(matchArr[1]);\r\n      }\r\n    }\r\n\r\n    //Connection xml string\r\n    var l = xmls.length;\r\n    tools.each(xmls, function(xml, i) {\r\n      var split = '';\r\n      if (i < l - 1) {\r\n        var last = xml.length - 1,\r\n          useShim = xml[last] === '@',\r\n          arg, isEx;\r\n\r\n        if (isStr) {\r\n          var exArg = exArgs[i],\r\n            match = exArg.match(/#(\\d+)/);\r\n\r\n          if (match && match[1] != null) { //分隔符格式为\"${#x}\", 则按其编号顺序从nj函数参数列表中获取\r\n            arg = args[parseInt(match[1], 10) + 1];\r\n          } else {\r\n            arg = exArg;\r\n            useShim = isEx = true;\r\n          }\r\n        } else {\r\n          arg = args[i + 1];\r\n        }\r\n\r\n        if (!tools.isString(arg) || useShim) {\r\n          split = '_nj-split' + splitNo + '_';\r\n\r\n          //Use the shim function to convert the parameter when the front of it with a \"@\" mark.\r\n          if (useShim) {\r\n            if (isEx) {\r\n              arg = shim({ _njEx: arg });\r\n            } else {\r\n              xml = xml.substr(0, last);\r\n              arg = shim(arg);\r\n            }\r\n          }\r\n\r\n          params.push(arg._njTmpl ? arg._njTmpl : arg);\r\n          splitNo++;\r\n        } else {\r\n          split = arg;\r\n        }\r\n      }\r\n\r\n      fullXml += xml + split;\r\n    }, false, true);\r\n\r\n    fullXml = _clearNotesAndBlank(fullXml);\r\n\r\n    //Resolve string to element\r\n    ret = _checkStringElem(fullXml, params);\r\n\r\n    //Save to the cache\r\n    tmplStrs[tmplKey] = ret;\r\n  }\r\n\r\n  var outputH = this ? this.outputH : false,\r\n    tmplFn = function() {\r\n      return nj['compile' + (outputH ? 'H' : '')]({ _njTmpl: ret }, tmplKey).apply(null, arguments);\r\n    };\r\n  tmplFn._njTmpl = ret;\r\n\r\n  return tmplFn;\r\n}\r\n\r\n//Resolve string to element\r\nfunction _checkStringElem(xml, params) {\r\n  var root = [],\r\n    current = {\r\n      elem: root,\r\n      elemName: 'root',\r\n      parent: null\r\n    },\r\n    parent = null,\r\n    pattern = tmplRule.checkElem(),\r\n    matchArr;\r\n\r\n  while (matchArr = pattern.exec(xml)) {\r\n    var textBefore = matchArr[1],\r\n      elem = matchArr[2],\r\n      elemName = matchArr[3],\r\n      elemParams = matchArr[4],\r\n      textAfter = matchArr[5];\r\n\r\n    //Text before tag\r\n    if (textBefore && textBefore !== '\\n') {\r\n      textBefore = _formatText(textBefore);\r\n      _setText(textBefore, current.elem, params);\r\n    }\r\n\r\n    //Element tag\r\n    if (elem) {\r\n      if (elemName[0] === '/') { //Close tag\r\n        if (elemName === '/' + current.elemName) {\r\n          current = current.parent;\r\n        }\r\n      } else if (elem[elem.length - 2] === '/') { //Self close tag\r\n        _setSelfCloseElem(elem, elemName, elemParams, current.elem, params);\r\n      } else { //Open tag\r\n        parent = current;\r\n        current = {\r\n          elem: [],\r\n          elemName: elemName,\r\n          parent: parent\r\n        };\r\n\r\n        parent.elem.push(current.elem);\r\n        _setElem(elem, elemName, elemParams, current.elem, params);\r\n      }\r\n    }\r\n\r\n    //Text after tag\r\n    if (textAfter && textAfter !== '\\n') {\r\n      textAfter = _formatText(textAfter);\r\n      _setText(textAfter, current.elem, params);\r\n    }\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\nfunction _clearNotesAndBlank(str) {\r\n  return str.replace(/<!--[\\s\\S]*?-->/g, '').replace(/>\\s+([^\\s<]*)\\s+</g, '>$1<').trim();\r\n}\r\n\r\nfunction _formatText(str) {\r\n  return str.replace(/\\n/g, '\\\\n').replace(/\\r/g, '').trim();\r\n}\r\n\r\n//Set element node\r\nfunction _setElem(elem, elemName, elemParams, elemArr, params, bySelfClose) {\r\n  var ret, paramsExpr;\r\n  if (elemName[0] === tmplRule.exprRule) {\r\n    ret = elem.substring(1, elem.length - 1);\r\n  } else if (elemName.indexOf(tmplRule.propRule) === 0) {\r\n    ret = tmplRule.exprRule + 'prop {\\'' + elemName.substr(tmplRule.propRule.length) + '\\'}' + elemParams;\r\n  } else {\r\n    var retS = _getSplitParams(elem, params);\r\n    ret = retS.elem;\r\n    paramsExpr = retS.params;\r\n  }\r\n\r\n  if (bySelfClose) {\r\n    var retC = [ret];\r\n    if (paramsExpr) {\r\n      retC.push(paramsExpr);\r\n    }\r\n\r\n    elemArr.push(retC);\r\n  } else {\r\n    elemArr.push(ret);\r\n    if (paramsExpr) {\r\n      elemArr.push(paramsExpr);\r\n    }\r\n  }\r\n}\r\n\r\n//Extract split parameters\r\nfunction _getSplitParams(elem, params) {\r\n  var exprRule = tmplRule.exprRule,\r\n    startRule = tmplRule.startRule,\r\n    endRule = tmplRule.endRule,\r\n    paramsExpr;\r\n\r\n  //Replace the parameter like \"prop=_nj-split0_\".\r\n  elem = elem.replace(/([^\\s={}>]+)=['\"]?_nj-split(\\d+)_['\"]?/g, function(all, key, no) {\r\n    if (!paramsExpr) {\r\n      paramsExpr = [exprRule + 'params'];\r\n    }\r\n\r\n    paramsExpr.push([exprRule + \"param \" + startRule + \"'\" + key + \"'\" + endRule, params[no]]);\r\n    return '';\r\n  });\r\n\r\n  //Replace the parameter like \"{...props}\".\r\n  elem = elem.replace(tmplRule.spreadProp, function(all, begin, prop) {\r\n    prop = prop.trim();\r\n\r\n    if (!paramsExpr) {\r\n      paramsExpr = [exprRule + 'props'];\r\n    }\r\n\r\n    paramsExpr.push([exprRule + 'spread ' + startRule + prop.replace(/\\.\\.\\./g, '') + endRule + '/']);\r\n    return ' ';\r\n  });\r\n\r\n  return {\r\n    elem: elem,\r\n    params: paramsExpr\r\n  };\r\n}\r\n\r\n//Set self close element node\r\nfunction _setSelfCloseElem(elem, elemName, elemParams, elemArr, params) {\r\n  if (elemName === tmplRule.exprRule + 'else') {\r\n    elemArr.push(elem.substr(1, 5));\r\n  } else {\r\n    _setElem(elem, elemName, elemParams, elemArr, params, true);\r\n  }\r\n}\r\n\r\n//Set text node\r\nfunction _setText(text, elemArr, params) {\r\n  var pattern = /_nj-split(\\d+)_/g,\r\n    matchArr,\r\n    splitNos = [];\r\n\r\n  while ((matchArr = pattern.exec(text))) {\r\n    splitNos.push(matchArr[1]);\r\n  }\r\n\r\n  if (splitNos.length) {\r\n    tools.each(text.split(/_nj-split(?:\\d+)_/), function(t) {\r\n      if (t !== '') {\r\n        elemArr.push(t);\r\n      }\r\n\r\n      var no = splitNos.shift();\r\n      if (no != null) {\r\n        elemArr.push(params[no]);\r\n      }\r\n    }, false, true);\r\n  } else {\r\n    elemArr.push(text);\r\n  }\r\n}\r\n\r\nmodule.exports = compileStringTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/parser/checkStringElem.js","'use strict';\r\n\r\n//Converts any value to the parameter of NornJ template can be parsed.\r\nmodule.exports = function (obj) {\r\n  return {\r\n    _njShim: obj\r\n  };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/shim.js","'use strict';\r\n\r\nvar compileStringTmpl = require('../parser/checkStringElem');\r\n\r\nmodule.exports = {\r\n  tmplTag: function() {\r\n    return compileStringTmpl.apply({ outputH: false }, arguments);\r\n  },\r\n  tmplTagH: function() {\r\n    return compileStringTmpl.apply({ outputH: true }, arguments);\r\n  }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/tmplTag.js","'use strict';\r\n\r\nvar nj = require('./core'),\r\n  setTmplRule = require('./utils/setTmplRule');\r\n\r\nmodule.exports = function (configs) {\r\n  var delimiters = configs.delimiters,\r\n    includeParser = configs.includeParser,\r\n    createElement = configs.createElement,\r\n    outputH = configs.outputH;\r\n\r\n  if(delimiters) {\r\n    setTmplRule(delimiters);\r\n  }\r\n\r\n  if(includeParser) {\r\n    nj.includeParser = includeParser;\r\n  }\r\n\r\n  if(createElement) {\r\n    nj.createElement = createElement;\r\n  }\r\n\r\n  if(outputH != null) {\r\n    nj.outputH = outputH;\r\n  }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config.js"],"sourceRoot":""}